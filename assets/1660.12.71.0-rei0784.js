(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[1660,7627,2979],{14284:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,"._formPanel{background:var(--panel);border-radius:var(--radius)}._formLabel{font-size:80%;padding:0 16px 8px;opacity:.8}._formLabel:empty{display:none}._formCaption{font-size:80%;padding:8px 16px 0;opacity:.8}._formCaption:empty{display:none}._formItem+._formItem{margin-top:24px}",""]),e.exports=a},27362:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".rbusrurv[data-v-5c1d5677]{line-height:1.4em;background:var(--bg);padding:32px}.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]{padding:32px 0}.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]> * ._formPanel{border:.5px solid var(--divider);border-radius:0;border-left:none;border-right:none}.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]> * ._form_group>:not(:first-child)._formPanel,.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]> * ._form_group>:not(:first-child) ._formPanel{border-top:none}.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]> * ._form_group>:not(:last-child)._formPanel,.rbusrurv:not(.wide).max-width_400px[data-v-5c1d5677]> * ._form_group>:not(:last-child) ._formPanel{border-bottom:.5px solid var(--divider)}",""]),e.exports=a},36475:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".yzpgjkxe>.main[data-v-2ce9f6c2]{display:flex;width:100%;box-sizing:border-box;padding:14px 16px;text-align:left;align-items:center}.yzpgjkxe>.main.center[data-v-2ce9f6c2]{display:block;text-align:center}.yzpgjkxe>.main.primary[data-v-2ce9f6c2]{color:var(--accent)}.yzpgjkxe>.main.danger[data-v-2ce9f6c2]{color:#ff2a2a}.yzpgjkxe>.main>.suffix[data-v-2ce9f6c2]{display:inline-flex;margin-left:auto;opacity:.7}.yzpgjkxe>.main>.suffix>.icon[data-v-2ce9f6c2]{margin-left:1em}",""]),e.exports=a},39648:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".vrtktovg>.main[data-v-8e636df8]> *{margin:0}.vrtktovg>.main[data-v-8e636df8]> *:not(:first-child)._formPanel,.vrtktovg>.main[data-v-8e636df8]> *:not(:first-child) ._formPanel{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.vrtktovg>.main[data-v-8e636df8]> *:not(:last-child)._formPanel,.vrtktovg>.main[data-v-8e636df8]> *:not(:last-child) ._formPanel{border-bottom:.5px solid var(--divider);border-bottom-left-radius:0;border-bottom-right-radius:0}",""]),e.exports=a},50663:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".anocepby[data-v-8820bd94]{display:flex;align-items:center;padding:14px 16px}.anocepby>.value[data-v-8820bd94]{margin-left:auto;opacity:.7}",""]),e.exports=a},51636:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".uawsfosz>div[data-v-9e019354]{padding:24px}.uawsfosz>div>.meter[data-v-9e019354]{background:rgba(0,0,0,.1);border-radius:6px;overflow:hidden}.uawsfosz>div>.meter>div[data-v-9e019354]{height:12px;border-radius:6px}",""]),e.exports=a},30320:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var a=o(55393);const r=(0,a.withScopeId)("data-v-5c1d5677")(((e,t,o,r,d,s)=>{const i=(0,a.resolveDirective)("size");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("div",{class:["rbusrurv",{wide:e.forceWide}]},[(0,a.renderSlot)(e.$slots,"default")],2)),[[i,{max:[400]}]])})),d=(0,a.defineComponent)({props:{forceWide:{type:Boolean,required:!1,default:!1}}});o(25997);d.render=r,d.__scopeId="data-v-5c1d5677";const s=d},11937:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var a=o(55393);const r=(0,a.withScopeId)("data-v-2ce9f6c2");(0,a.pushScopeId)("data-v-2ce9f6c2");const d={class:"yzpgjkxe _formItem"},s={class:"_formLabel"},i={class:"suffix"},n={class:"icon"},l={class:"_formCaption"};(0,a.popScopeId)();const c=r(((e,t,o,r,c,p)=>((0,a.openBlock)(),(0,a.createBlock)("div",d,[(0,a.createVNode)("div",s,[(0,a.renderSlot)(e.$slots,"label")]),(0,a.createVNode)("button",{class:["main _button _formPanel _formClickable",{center:e.center,primary:e.primary,danger:e.danger}]},[(0,a.renderSlot)(e.$slots,"default"),(0,a.createVNode)("div",i,[(0,a.renderSlot)(e.$slots,"suffix"),(0,a.createVNode)("div",n,[(0,a.renderSlot)(e.$slots,"suffixIcon")])])],2),(0,a.createVNode)("div",l,[(0,a.renderSlot)(e.$slots,"desc")])]))));o(23090);const p=(0,a.defineComponent)({props:{primary:{type:Boolean,required:!1,default:!1},danger:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},center:{type:Boolean,required:!1,default:!0}}});o(93910);p.render=c,p.__scopeId="data-v-2ce9f6c2";const u=p},42519:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var a=o(55393);const r=(0,a.withScopeId)("data-v-8e636df8");(0,a.pushScopeId)("data-v-8e636df8");const d={class:"vrtktovg _formItem"},s={class:"_formLabel"},i={class:"main _form_group"},n={class:"_formCaption"};(0,a.popScopeId)();const l=r(((e,t,o,r,l,c)=>{const p=(0,a.resolveDirective)("size");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("div",d,[(0,a.createVNode)("div",s,[(0,a.renderSlot)(e.$slots,"label")]),(0,a.createVNode)("div",i,[(0,a.renderSlot)(e.$slots,"default")]),(0,a.createVNode)("div",n,[(0,a.renderSlot)(e.$slots,"caption")])],512)),[[p,{max:[500]}]])})),c=(0,a.defineComponent)({});o(77590);c.render=l,c.__scopeId="data-v-8e636df8";const p=c},64051:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var a=o(55393);const r=(0,a.withScopeId)("data-v-8820bd94");(0,a.pushScopeId)("data-v-8820bd94");const d={class:"_formItem"},s={class:"_formPanel anocepby"},i={class:"key"},n={class:"value"};(0,a.popScopeId)();const l=r(((e,t,o,r,l,c)=>((0,a.openBlock)(),(0,a.createBlock)("div",d,[(0,a.createVNode)("div",s,[(0,a.createVNode)("span",i,[(0,a.renderSlot)(e.$slots,"key")]),(0,a.createVNode)("span",n,[(0,a.renderSlot)(e.$slots,"value")])])]))));o(23090);const c=(0,a.defineComponent)({});o(35293);c.render=l,c.__scopeId="data-v-8820bd94";const p=c},1660:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>V});var a=o(55393);const r=(0,a.withScopeId)("data-v-9e019354");(0,a.pushScopeId)("data-v-9e019354");const d={class:"_formItem uawsfosz"},s={class:"_formPanel"},i={class:"meter"},n={class:"_formItem"},l={class:"_formLabel"},c={class:"_formPanel"},p={ref:"chart"};(0,a.popScopeId)();const u=r(((e,t,o,u,f,m)=>{const v=(0,a.resolveComponent)("FormKeyValueView"),h=(0,a.resolveComponent)("FormGroup"),g=(0,a.resolveComponent)("Fa"),y=(0,a.resolveComponent)("FormButton"),b=(0,a.resolveComponent)("FormBase");return(0,a.openBlock)(),(0,a.createBlock)(b,{class:""},{default:r((()=>[e.fetching?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(h,{key:0},{label:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.usageAmount),1)])),default:r((()=>[(0,a.createVNode)("div",d,[(0,a.createVNode)("div",s,[(0,a.createVNode)("div",i,[(0,a.createVNode)("div",{style:e.meterStyle},null,4)])])]),(0,a.createVNode)(v,null,{key:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.capacity),1)])),value:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.bytes(e.capacity,1)),1)])),_:1}),(0,a.createVNode)(v,null,{key:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.inUse),1)])),value:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.bytes(e.usage,1)),1)])),_:1})])),_:1})),(0,a.createVNode)("div",n,[(0,a.createVNode)("div",l,(0,a.toDisplayString)(e.$ts.statistics),1),(0,a.createVNode)("div",c,[(0,a.createVNode)("div",p,null,512)])]),(0,a.createVNode)(y,{center:!1,onClick:t[1]||(t[1]=t=>e.chooseUploadFolder()),primary:""},{suffix:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.uploadFolder?e.uploadFolder.name:"-"),1)])),suffixIcon:r((()=>[(0,a.createVNode)(g,{icon:e.faFolderOpen},null,8,["icon"])])),default:r((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.uploadFolder)+" ",1)])),_:1})])),_:1})}));var f=o(17621),m=o(35927),v=o.n(m),h=o(51436),g=o(56024),y=o(11937),b=o(42519),x=o(64051),_=o(30320),k=o(10192),w=o(59092);const S=(0,a.defineComponent)({components:{FormBase:_.Z,FormButton:y.Z,FormGroup:b.Z,FormKeyValueView:x.Z},emits:["info"],data(){return{INFO:{title:this.$ts.drive,icon:h.uM9},fetching:!0,usage:null,capacity:null,uploadFolder:null,faCloud:h.uM9,faClock:g.SZ,faEyeSlash:g.Aq,faFolderOpen:h.cC_,faTrashAlt:g.I7}},computed:{meterStyle(){return{width:this.usage/this.capacity*100+"%",background:f({h:180-this.usage/this.capacity*180,s:.7,l:.5})}}},async created(){k.hi("drive").then((e=>{this.capacity=e.capacity,this.usage=e.usage,this.fetching=!1,this.$nextTick((()=>{this.renderChart()}))})),this.$store.state.uploadFolder&&(this.uploadFolder=await k.hi("drive/folders/show",{folderId:this.$store.state.uploadFolder}))},mounted(){this.$emit("info",this.INFO)},methods:{chooseUploadFolder(){k.LD(!1).then((async e=>{this.$store.set("uploadFolder",e?e.id:null),k.Vp(),this.$store.state.uploadFolder?this.uploadFolder=await k.hi("drive/folders/show",{folderId:this.$store.state.uploadFolder}):this.uploadFolder=null}))},renderChart(){k.hi("charts/user/drive",{userId:this.$i.id,span:"day",limit:21}).then((e=>{const t=[],o=[],a=new Date,r=a.getFullYear(),d=a.getMonth(),s=a.getDate();for(let a=0;a<21;a++){const i=new Date(r,d,s-a);t.push([i,e.incSize[a]]),o.push([i,-e.decSize[a]])}new(v())(this.$refs.chart,{chart:{type:"bar",stacked:!0,height:150,toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{columnWidth:"80%"}},grid:{clipMarkers:!1,borderColor:"rgba(0, 0, 0, 0.1)",xaxis:{lines:{show:!0}}},tooltip:{shared:!0,intersect:!1,theme:this.$store.state.darkMode?"dark":"light"},dataLabels:{enabled:!1},legend:{show:!1},series:[{name:"Additions",data:t},{name:"Deletions",data:o}],xaxis:{type:"datetime",labels:{style:{colors:f(getComputedStyle(document.documentElement).getPropertyValue("--fg")).toRgbString()}},axisBorder:{color:"rgba(0, 0, 0, 0.1)"},axisTicks:{color:"rgba(0, 0, 0, 0.1)"},crosshairs:{width:1,opacity:1}},yaxis:{labels:{formatter:e=>(0,w.Z)(e,0),style:{colors:f(getComputedStyle(document.documentElement).getPropertyValue("--fg")).toRgbString()}}}}).render()}))},bytes:w.Z}});o(37327);S.render=u,S.__scopeId="data-v-9e019354";const V=S},23090:(e,t,o)=>{var a=o(14284);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("1e03181e",a,!0,{})},25997:(e,t,o)=>{var a=o(27362);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("71182c12",a,!0,{})},93910:(e,t,o)=>{var a=o(36475);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("8ac89f98",a,!0,{})},77590:(e,t,o)=>{var a=o(39648);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("0d93efb6",a,!0,{})},35293:(e,t,o)=>{var a=o(50663);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("5cebe7cb",a,!0,{})},37327:(e,t,o)=>{var a=o(51636);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("79b3cca1",a,!0,{})}}]);