(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[9554],{99874:(e,i,t)=>{var a=t(23645)((function(e){return e[1]}));a.push([e.id,".zdjebgpv[data-v-6ec0e189]{position:relative}.zdjebgpv>.icon-sub[data-v-6ec0e189]{position:absolute;width:30%;height:auto;margin:0;right:4%;bottom:4%}.zdjebgpv>*[data-v-6ec0e189]{margin:auto}.zdjebgpv>.icon[data-v-6ec0e189]{pointer-events:none;height:65%;width:65%}",""]),e.exports=a},69088:(e,i,t)=>{var a=t(23645)((function(e){return e[1]}));a.push([e.id,".skeikyzd[data-v-51ecb12c]{padding:8px 16px;position:relative}.skeikyzd>.files[data-v-51ecb12c]{display:flex;flex-wrap:wrap}.skeikyzd>.files>div[data-v-51ecb12c]{position:relative;width:64px;height:64px;margin-right:4px;border-radius:4px;overflow:hidden;cursor:move}.skeikyzd>.files>div:hover>.remove[data-v-51ecb12c]{display:block}.skeikyzd>.files>div>.thumbnail[data-v-51ecb12c]{width:100%;height:100%;z-index:1;color:var(--fg)}.skeikyzd>.files>div>.sensitive[data-v-51ecb12c]{display:flex;position:absolute;width:64px;height:64px;top:0;left:0;z-index:2;background:rgba(17,17,17,.7);color:#fff}.skeikyzd>.files>div>.sensitive>.icon[data-v-51ecb12c]{margin:auto}.skeikyzd>.remain[data-v-51ecb12c]{display:block;position:absolute;top:8px;right:8px;margin:0;padding:0}",""]),e.exports=a},797:(e,i,t)=>{"use strict";t.d(i,{Z:()=>p});var a=t(55393);const o=(0,a.withScopeId)("data-v-6ec0e189");(0,a.pushScopeId)("data-v-6ec0e189");const n={class:"zdjebgpv",ref:"thumbnail"};(0,a.popScopeId)();const s=o(((e,i,t,o,s,l)=>{const c=(0,a.resolveComponent)("ImgWithBlurhash"),d=(0,a.resolveComponent)("Fa");return(0,a.openBlock)(),(0,a.createBlock)("div",n,[e.isThumbnailAvailable?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,hash:e.file.blurhash,src:e.file.thumbnailUrl,alt:e.file.name,title:e.file.name,style:"object-fit: "+e.fit},null,8,["hash","src","alt","title","style"])):"image"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,icon:e.faFileImage,class:"icon"},null,8,["icon"])):"video"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,icon:e.faFileVideo,class:"icon"},null,8,["icon"])):"audio"===e.is||"midi"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:3,icon:e.faMusic,class:"icon"},null,8,["icon"])):"csv"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:4,icon:e.faFileCsv,class:"icon"},null,8,["icon"])):"pdf"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:5,icon:e.faFilePdf,class:"icon"},null,8,["icon"])):"textfile"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:6,icon:e.faFileAlt,class:"icon"},null,8,["icon"])):"archive"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:7,icon:e.faFileArchive,class:"icon"},null,8,["icon"])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:8,icon:e.faFile,class:"icon"},null,8,["icon"])),e.isThumbnailAvailable&&"video"===e.is?((0,a.openBlock)(),(0,a.createBlock)(d,{key:9,icon:e.faFilm,class:"icon-sub"},null,8,["icon"])):(0,a.createCommentVNode)("",!0)],512)}));var l=t(51436),c=t(27718),d=t(73120);const r=(0,a.defineComponent)({components:{ImgWithBlurhash:c.Z},props:{file:{type:Object,required:!0},fit:{type:String,required:!1,default:"cover"}},data:()=>({isContextmenuShowing:!1,isDragging:!1,faFile:l.gMD,faFileAlt:l.cwv,faFileImage:l.Oi0,faMusic:l.Xig,faFileVideo:l.hvm,faFileCsv:l.fUD,faFilePdf:l.gSj,faFileArchive:l.W2U,faFilm:l.CjD}),computed:{is(){return this.file.type.startsWith("image/")?"image":this.file.type.startsWith("video/")?"video":"audio/midi"===this.file.type?"midi":this.file.type.startsWith("audio/")?"audio":this.file.type.endsWith("/csv")?"csv":this.file.type.endsWith("/pdf")?"pdf":this.file.type.startsWith("text/")?"textfile":["application/zip","application/x-cpio","application/x-bzip","application/x-bzip2","application/java-archive","application/x-rar-compressed","application/x-tar","application/gzip","application/x-7z-compressed"].some((e=>e===this.file.type))?"archive":"unknown"},isThumbnailAvailable(){return!!this.file.thumbnailUrl&&("image"===this.is||"video"===this.is)}},mounted(){const e=this.$refs.volumectrl;e&&(e.volume=d.cP.get("mediaVolume"))},methods:{volumechange(){const e=this.$refs.volumectrl;d.cP.set("mediaVolume",e.volume)}}});t(21969);r.render=s,r.__scopeId="data-v-6ec0e189";const p=r},39554:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>v});var a=t(55393);const o=(0,a.withScopeId)("data-v-51ecb12c");(0,a.pushScopeId)("data-v-51ecb12c");const n={class:"skeikyzd"},s={key:0,class:"sensitive"},l={class:"remain"};(0,a.popScopeId)();const c=o(((e,i,t,c,d,r)=>{const p=(0,a.resolveComponent)("MkDriveFileThumbnail"),h=(0,a.resolveComponent)("Fa"),u=(0,a.resolveComponent)("XDraggable");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("div",n,[(0,a.createVNode)(u,{class:"files",modelValue:e._files,"onUpdate:modelValue":i[1]||(i[1]=i=>e._files=i),"item-key":"id",animation:"150",delay:"100","delay-on-touch-only":"true"},{item:o((({element:i})=>[(0,a.createVNode)("div",{onClick:t=>e.showFileMenu(i,t),onContextmenu:(0,a.withModifiers)((t=>e.showFileMenu(i,t)),["prevent"])},[(0,a.createVNode)(p,{"data-id":i.id,class:"thumbnail",file:i,fit:"cover"},null,8,["data-id","file"]),i.isSensitive?((0,a.openBlock)(),(0,a.createBlock)("div",s,[(0,a.createVNode)(h,{class:"icon",icon:e.faExclamationTriangle},null,8,["icon"])])):(0,a.createCommentVNode)("",!0)],40,["onClick","onContextmenu"])])),_:1},8,["modelValue"]),(0,a.createVNode)("p",l,(0,a.toDisplayString)(4-e.files.length)+"/4",1)],512)),[[a.vShow,0!=e.files.length]])}));var d=t(56024),r=t(51436),p=t(797),h=t(10192);const u=(0,a.defineComponent)({components:{XDraggable:(0,a.defineAsyncComponent)((()=>t.e(9980).then(t.t.bind(t,82021,23)).then((e=>e.default)))),MkDriveFileThumbnail:p.Z},props:{files:{type:Array,required:!0},detachMediaFn:{type:Function,required:!1}},emits:["updated","detach","changeSensitive","changeName"],data:()=>({menu:null,faExclamationTriangle:r.eHv}),computed:{_files:{get(){return this.files},set(e){this.$emit("updated",e)}}},methods:{detachMedia(e){this.detachMediaFn?this.detachMediaFn(e):this.$emit("detach",e)},toggleSensitive(e){h.hi("drive/files/update",{fileId:e.id,isSensitive:!e.isSensitive}).then((()=>{this.$emit("changeSensitive",e,!e.isSensitive)}))},async rename(e){const{canceled:i,result:t}=await h.WZ({title:this.$ts.enterFileName,input:{default:e.name},allowEmpty:!1});i||h.hi("drive/files/update",{fileId:e.id,name:t}).then((()=>{this.$emit("changeName",e,t),e.name=t}))},showFileMenu(e,i){this.menu||(this.menu=h.n4([{text:this.$ts.renameFile,icon:r.sdN,action:()=>{this.rename(e)}},{text:e.isSensitive?this.$ts.unmarkAsSensitive:this.$ts.markAsSensitive,icon:e.isSensitive?d.Aq:d.Md,action:()=>{this.toggleSensitive(e)}},{text:this.$ts.attachCancel,icon:d.nY,action:()=>{this.detachMedia(e.id)}}],i.currentTarget||i.target).then((()=>this.menu=null)))}}});t(36009);u.render=c,u.__scopeId="data-v-51ecb12c";const v=u},21969:(e,i,t)=>{var a=t(99874);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,t(45346).Z)("907f8486",a,!0,{})},36009:(e,i,t)=>{var a=t(69088);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,t(45346).Z)("96541264",a,!0,{})}}]);