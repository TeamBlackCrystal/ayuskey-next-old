(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[2979],{50663:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".anocepby[data-v-8820bd94]{display:flex;align-items:center;padding:14px 16px}.anocepby>.value[data-v-8820bd94]{margin-left:auto;opacity:.7}",""]),e.exports=a},51636:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".uawsfosz>div[data-v-9e019354]{padding:24px}.uawsfosz>div>.meter[data-v-9e019354]{background:rgba(0,0,0,.1);border-radius:6px;overflow:hidden}.uawsfosz>div>.meter>div[data-v-9e019354]{height:12px;border-radius:6px}",""]),e.exports=a},64051:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var a=o(55393);const s=(0,a.withScopeId)("data-v-8820bd94");(0,a.pushScopeId)("data-v-8820bd94");const r={class:"_formItem"},d={class:"_formPanel anocepby"},l={class:"key"},i={class:"value"};(0,a.popScopeId)();const c=s(((e,t,o,s,c,n)=>((0,a.openBlock)(),(0,a.createBlock)("div",r,[(0,a.createVNode)("div",d,[(0,a.createVNode)("span",l,[(0,a.renderSlot)(e.$slots,"key")]),(0,a.createVNode)("span",i,[(0,a.renderSlot)(e.$slots,"value")])])]))));o(23090);const n=(0,a.defineComponent)({});o(35293);n.render=c,n.__scopeId="data-v-8820bd94";const p=n},1660:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>N});var a=o(55393);const s=(0,a.withScopeId)("data-v-9e019354");(0,a.pushScopeId)("data-v-9e019354");const r={class:"_formItem uawsfosz"},d={class:"_formPanel"},l={class:"meter"},i={class:"_formItem"},c={class:"_formLabel"},n={class:"_formPanel"},p={ref:"chart"};(0,a.popScopeId)();const u=s(((e,t,o,u,h,m)=>{const y=(0,a.resolveComponent)("FormKeyValueView"),f=(0,a.resolveComponent)("FormGroup"),g=(0,a.resolveComponent)("Fa"),v=(0,a.resolveComponent)("FormButton"),b=(0,a.resolveComponent)("FormBase");return(0,a.openBlock)(),(0,a.createBlock)(b,{class:""},{default:s((()=>[e.fetching?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(f,{key:0},{label:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.usageAmount),1)])),default:s((()=>[(0,a.createVNode)("div",r,[(0,a.createVNode)("div",d,[(0,a.createVNode)("div",l,[(0,a.createVNode)("div",{style:e.meterStyle},null,4)])])]),(0,a.createVNode)(y,null,{key:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.capacity),1)])),value:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.bytes(e.capacity,1)),1)])),_:1}),(0,a.createVNode)(y,null,{key:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.inUse),1)])),value:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.bytes(e.usage,1)),1)])),_:1})])),_:1})),(0,a.createVNode)("div",i,[(0,a.createVNode)("div",c,(0,a.toDisplayString)(e.$ts.statistics),1),(0,a.createVNode)("div",n,[(0,a.createVNode)("div",p,null,512)])]),(0,a.createVNode)(v,{center:!1,onClick:t[1]||(t[1]=t=>e.chooseUploadFolder()),primary:""},{suffix:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.uploadFolder?e.uploadFolder.name:"-"),1)])),suffixIcon:s((()=>[(0,a.createVNode)(g,{icon:e.faFolderOpen},null,8,["icon"])])),default:s((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.uploadFolder)+" ",1)])),_:1})])),_:1})}));var h=o(17621),m=o(35927),y=o.n(m),f=o(51436),g=o(56024),v=o(11937),b=o(42519),V=o(64051),x=o(30320),F=o(10192),k=o(59092);const S=(0,a.defineComponent)({components:{FormBase:x.Z,FormButton:v.Z,FormGroup:b.Z,FormKeyValueView:V.Z},emits:["info"],data(){return{INFO:{title:this.$ts.drive,icon:f.uM9},fetching:!0,usage:null,capacity:null,uploadFolder:null,faCloud:f.uM9,faClock:g.SZ,faEyeSlash:g.Aq,faFolderOpen:f.cC_,faTrashAlt:g.I7}},computed:{meterStyle(){return{width:this.usage/this.capacity*100+"%",background:h({h:180-this.usage/this.capacity*180,s:.7,l:.5})}}},async created(){F.hi("drive").then((e=>{this.capacity=e.capacity,this.usage=e.usage,this.fetching=!1,this.$nextTick((()=>{this.renderChart()}))})),this.$store.state.uploadFolder&&(this.uploadFolder=await F.hi("drive/folders/show",{folderId:this.$store.state.uploadFolder}))},mounted(){this.$emit("info",this.INFO)},methods:{chooseUploadFolder(){F.LD(!1).then((async e=>{this.$store.set("uploadFolder",e?e.id:null),F.Vp(),this.$store.state.uploadFolder?this.uploadFolder=await F.hi("drive/folders/show",{folderId:this.$store.state.uploadFolder}):this.uploadFolder=null}))},renderChart(){F.hi("charts/user/drive",{userId:this.$i.id,span:"day",limit:21}).then((e=>{const t=[],o=[],a=new Date,s=a.getFullYear(),r=a.getMonth(),d=a.getDate();for(let a=0;a<21;a++){const l=new Date(s,r,d-a);t.push([l,e.incSize[a]]),o.push([l,-e.decSize[a]])}new(y())(this.$refs.chart,{chart:{type:"bar",stacked:!0,height:150,toolbar:{show:!1},zoom:{enabled:!1}},plotOptions:{bar:{columnWidth:"80%"}},grid:{clipMarkers:!1,borderColor:"rgba(0, 0, 0, 0.1)",xaxis:{lines:{show:!0}}},tooltip:{shared:!0,intersect:!1,theme:this.$store.state.darkMode?"dark":"light"},dataLabels:{enabled:!1},legend:{show:!1},series:[{name:"Additions",data:t},{name:"Deletions",data:o}],xaxis:{type:"datetime",labels:{style:{colors:h(getComputedStyle(document.documentElement).getPropertyValue("--fg")).toRgbString()}},axisBorder:{color:"rgba(0, 0, 0, 0.1)"},axisTicks:{color:"rgba(0, 0, 0, 0.1)"},crosshairs:{width:1,opacity:1}},yaxis:{labels:{formatter:e=>(0,k.Z)(e,0),style:{colors:h(getComputedStyle(document.documentElement).getPropertyValue("--fg")).toRgbString()}}}}).render()}))},bytes:k.Z}});o(37327);S.render=u,S.__scopeId="data-v-9e019354";const N=S},35293:(e,t,o)=>{var a=o(50663);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("5cebe7cb",a,!0,{})},37327:(e,t,o)=>{var a=o(51636);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("79b3cca1",a,!0,{})}}]);