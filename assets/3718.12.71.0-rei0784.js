(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[3718,9055],{27582:(e,t,a)=>{var n=a(23645)((function(e){return e[1]}));n.push([e.id,'.juejbjww[data-v-32b1e952]{position:relative;margin:32px 0}.juejbjww[data-v-32b1e952]:not(.inline):first-child{margin-top:8px}.juejbjww[data-v-32b1e952]:not(.inline):last-child{margin-bottom:8px}.juejbjww>.icon[data-v-32b1e952]{position:absolute;top:0;left:0;width:24px;text-align:center;line-height:32px}.juejbjww>.icon:not(:empty)+.input[data-v-32b1e952]{margin-left:28px}.juejbjww>.input[data-v-32b1e952]{position:relative}.juejbjww>.input[data-v-32b1e952]:before{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:1px;background:var(--inputBorder)}.juejbjww>.input[data-v-32b1e952]:after{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:2px;background:var(--accent);opacity:0;transform:scaleX(.12);transition:border .3s cubic-bezier(.4,0,.2,1),opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1);will-change:border opacity transform}.juejbjww>.input>.label[data-v-32b1e952]{position:absolute;z-index:1;top:0;left:0;transition:.4s cubic-bezier(.25,.8,.25,1);transition-duration:.3s;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none;transform-origin:top left;transform:scale(1)}.juejbjww>.input>.title[data-v-32b1e952]{position:absolute;z-index:1;top:-17px;left:0!important;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none;transform-origin:top left;transform:scale(.75);white-space:nowrap;width:133%;overflow:hidden;text-overflow:ellipsis}.juejbjww>.input>.title>.warning[data-v-32b1e952]{margin-left:.5em;color:var(--infoWarnFg)}.juejbjww>.input>.title>.warning>svg[data-v-32b1e952]{margin-right:.1em}.juejbjww>.input>input[data-v-32b1e952]{display:block;height:32px;width:100%;margin:0;padding:0;font:inherit;font-weight:400;font-size:1em;line-height:32px;color:var(--inputText);background:transparent;border:none;border-radius:0;outline:none;box-shadow:none;box-sizing:border-box}.juejbjww>.input>input[type=file][data-v-32b1e952]{display:none}.juejbjww>.input>.prefix[data-v-32b1e952],.juejbjww>.input>.suffix[data-v-32b1e952]{display:block;position:absolute;z-index:1;top:0;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none}.juejbjww>.input>.prefix[data-v-32b1e952]:empty,.juejbjww>.input>.suffix[data-v-32b1e952]:empty{display:none}.juejbjww>.input>.prefix>*[data-v-32b1e952],.juejbjww>.input>.suffix>*[data-v-32b1e952]{display:inline-block;min-width:16px;max-width:150px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.juejbjww>.input>.prefix[data-v-32b1e952]{left:0;padding-right:4px}.juejbjww>.input>.suffix[data-v-32b1e952]{right:0;padding-left:4px}.juejbjww>.save[data-v-32b1e952]{margin:6px 0 0;font-size:.8em}.juejbjww>.desc[data-v-32b1e952]{margin:6px 0 0}.juejbjww>.desc[data-v-32b1e952]:empty{display:none}.juejbjww>.desc *[data-v-32b1e952]{margin:0}.juejbjww.focused>.input[data-v-32b1e952]:after{opacity:1;transform:scaleX(1)}.juejbjww.focused>.input>.label[data-v-32b1e952]{color:var(--accent)}.juejbjww.filled>.input>.label[data-v-32b1e952],.juejbjww.focused>.input>.label[data-v-32b1e952]{top:-17px;left:0!important;transform:scale(.75)}.juejbjww.inline[data-v-32b1e952]{display:inline-block;margin:0}.juejbjww.disabled[data-v-32b1e952]{opacity:.7}.juejbjww.disabled[data-v-32b1e952],.juejbjww.disabled *[data-v-32b1e952]{cursor:not-allowed!important}',""]),e.exports=n},92008:(e,t,a)=>{var n=a(23645)((function(e){return e[1]}));n.push([e.id,'.adhpbeos[data-v-e827983a]{margin:42px 0 32px;position:relative}.adhpbeos[data-v-e827983a]:first-child{margin-top:16px}.adhpbeos[data-v-e827983a]:last-child{margin-bottom:0}.adhpbeos>.input[data-v-e827983a]{position:relative}.adhpbeos>.input[data-v-e827983a]:before{content:"";display:block;position:absolute;top:0;bottom:0;left:0;right:0;background:none;border:1px solid var(--inputBorder);border-radius:3px;pointer-events:none}.adhpbeos>.input[data-v-e827983a]:after{content:"";display:block;position:absolute;top:0;bottom:0;left:0;right:0;background:none;border:2px solid var(--accent);border-radius:3px;opacity:0;transition:opacity .3s cubic-bezier(.4,0,.2,1);pointer-events:none}.adhpbeos>.input>.label[data-v-e827983a]{position:absolute;top:6px;left:12px;transition:.4s cubic-bezier(.25,.8,.25,1);transition-duration:.3s;font-size:1em;line-height:32px;pointer-events:none;transform-origin:top left;transform:scale(1)}.adhpbeos>.input>textarea[data-v-e827983a]{display:block;width:100%;min-width:100%;max-width:100%;min-height:130px;padding:12px;box-sizing:border-box;font:inherit;font-weight:400;font-size:1em;background:transparent;border:none;border-radius:0;outline:none;box-shadow:none;color:var(--fg)}.adhpbeos>.input>textarea.code[data-v-e827983a]{tab-size:2}.adhpbeos>.save[data-v-e827983a]{margin:6px 0 0;font-size:.8em}.adhpbeos>.desc[data-v-e827983a]{margin:6px 0 0}.adhpbeos>.desc[data-v-e827983a]:empty{display:none}.adhpbeos>.desc *[data-v-e827983a]{margin:0}.adhpbeos.focused>.input[data-v-e827983a]:after{opacity:1}.adhpbeos.focused>.input>.label[data-v-e827983a]{color:var(--accent)}.adhpbeos.filled>.input>.label[data-v-e827983a],.adhpbeos.focused>.input>.label[data-v-e827983a]{top:-24px;left:0!important;transform:scale(.75)}.adhpbeos.tall>.input>textarea[data-v-e827983a]{min-height:200px}.adhpbeos.pre>.input>textarea[data-v-e827983a]{white-space:pre}',""]),e.exports=n},34319:e=>{e.exports=function(e,t){var a=null;return function(){clearTimeout(a);var n=arguments,o=this;a=setTimeout((function(){e.apply(o,n)}),t)}}},45030:(e,t,a)=>{const n=a(34319);function o(e,t){t.value!==t.oldValue&&(e.oninput=o.debounce((function(t){e.dispatchEvent(function(e){if("function"==typeof Event)var t=new Event(e);else{(t=document.createEvent("Event")).initEvent(e,!0,!0)}return t}("change"))}),parseInt(t.value)||800))}o.debounce=n,e.exports=o},77121:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var n=a(55393);const o=(0,n.withScopeId)("data-v-32b1e952");(0,n.pushScopeId)("data-v-32b1e952");const i={class:"icon",ref:"icon"},l={class:"input"},r={class:"label",ref:"labelEl"},d={class:"title",ref:"title"},s={key:0,class:"warning"},c={class:"prefix",ref:"prefixEl"},p={class:"suffix",ref:"suffixEl"},u={class:"desc _caption"};(0,n.popScopeId)();const v=o(((e,t,a,o,v,b)=>{const f=(0,n.resolveComponent)("Fa"),h=(0,n.resolveDirective)("debounce");return(0,n.openBlock)(),(0,n.createBlock)("div",{class:["juejbjww",{focused:e.focused,filled:e.filled,inline:e.inline,disabled:e.disabled}]},[(0,n.createVNode)("div",i,[(0,n.renderSlot)(e.$slots,"icon")],512),(0,n.createVNode)("div",l,[(0,n.createVNode)("span",r,[(0,n.renderSlot)(e.$slots,"default")],512),(0,n.createVNode)("span",d,[(0,n.renderSlot)(e.$slots,"title"),e.invalid?((0,n.openBlock)(),(0,n.createBlock)("span",s,[(0,n.createVNode)(f,{icon:e.faExclamationCircle},null,8,["icon"]),(0,n.createTextVNode)((0,n.toDisplayString)(e.$refs.input.validationMessage),1)])):(0,n.createCommentVNode)("",!0)],512),(0,n.createVNode)("div",c,[(0,n.renderSlot)(e.$slots,"prefix")],512),e.debounce?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)("input",{key:0,ref:"inputEl",type:e.type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v=t),disabled:e.disabled,required:e.required,readonly:e.readonly,placeholder:e.placeholder,pattern:e.pattern,autocomplete:e.autocomplete,spellcheck:e.spellcheck,step:e.step,onFocus:t[2]||(t[2]=t=>e.focused=!0),onBlur:t[3]||(t[3]=t=>e.focused=!1),onKeydown:t[4]||(t[4]=t=>e.onKeydown(t)),onInput:t[5]||(t[5]=(...t)=>e.onInput&&e.onInput(...t)),list:e.id},null,40,["type","disabled","required","readonly","placeholder","pattern","autocomplete","spellcheck","step","list"])),[[h,500],[n.vModelDynamic,e.v,void 0,{lazy:!0}]]):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)("input",{key:1,ref:"inputEl",type:e.type,"onUpdate:modelValue":t[6]||(t[6]=t=>e.v=t),disabled:e.disabled,required:e.required,readonly:e.readonly,placeholder:e.placeholder,pattern:e.pattern,autocomplete:e.autocomplete,spellcheck:e.spellcheck,step:e.step,onFocus:t[7]||(t[7]=t=>e.focused=!0),onBlur:t[8]||(t[8]=t=>e.focused=!1),onKeydown:t[9]||(t[9]=t=>e.onKeydown(t)),onInput:t[10]||(t[10]=(...t)=>e.onInput&&e.onInput(...t)),list:e.id},null,40,["type","disabled","required","readonly","placeholder","pattern","autocomplete","spellcheck","step","list"])),[[n.vModelDynamic,e.v]]),e.datalist?((0,n.openBlock)(),(0,n.createBlock)("datalist",{key:2,id:e.id},[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(e.datalist,(e=>((0,n.openBlock)(),(0,n.createBlock)("option",{value:e},null,8,["value"])))),256))],8,["id"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)("div",p,[(0,n.renderSlot)(e.$slots,"suffix")],512)]),e.save&&e.changed?((0,n.openBlock)(),(0,n.createBlock)("button",{key:0,class:"save _textButton",onClick:t[11]||(t[11]=()=>{e.changed=!1,e.save()})},(0,n.toDisplayString)(e.$ts.save),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)("div",u,[(0,n.renderSlot)(e.$slots,"desc")])],2)}));var b=a(45030),f=a.n(b),h=a(51436);const m=(0,n.defineComponent)({directives:{debounce:f()},props:{value:{required:!1},type:{type:String,required:!1},required:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},pattern:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!1},autocomplete:{required:!1},spellcheck:{required:!1},step:{required:!1},debounce:{required:!1},datalist:{type:Array,required:!1},inline:{type:Boolean,required:!1,default:!1},save:{type:Function,required:!1}},emits:["change","keydown","enter"],setup(e,t){const{value:a,type:o,autofocus:i}=(0,n.toRefs)(e),l=(0,n.ref)(a.value),r=Math.random().toString(),d=(0,n.ref)(!1),s=(0,n.ref)(!1),c=(0,n.ref)(!1),p=(0,n.computed)((()=>""!==l.value&&null!=l.value)),u=(0,n.ref)(null),v=(0,n.ref)(null),b=(0,n.ref)(null),f=(0,n.ref)(null),m=()=>u.value.focus();return(0,n.watch)(a,(e=>{l.value=e})),(0,n.watch)(l,(e=>{"number"===(null==o?void 0:o.value)?t.emit("update:value",parseFloat(e)):t.emit("update:value",e),c.value=u.value.validity.badInput})),(0,n.onMounted)((()=>{(0,n.nextTick)((()=>{i.value&&m();const e=setInterval((()=>{v.value&&(f.value.style.left=v.value.offsetLeft+v.value.offsetWidth+"px",v.value.offsetWidth&&(u.value.style.paddingLeft=v.value.offsetWidth+"px")),b.value&&b.value.offsetWidth&&(u.value.style.paddingRight=b.value.offsetWidth+"px")}),100);(0,n.onUnmounted)((()=>{clearInterval(e)}))}))})),{id:r,v:l,focused:d,invalid:c,changed:s,filled:p,inputEl:u,prefixEl:v,suffixEl:b,labelEl:f,focus:m,onInput:e=>{s.value=!0,t.emit("change",e)},onKeydown:e=>{t.emit("keydown",e),"Enter"===e.code&&t.emit("enter")},faExclamationCircle:h.RLE}}});a(7803);m.render=v,m.__scopeId="data-v-32b1e952";const w=m},19055:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(55393);const o=(0,n.withScopeId)("data-v-e827983a");(0,n.pushScopeId)("data-v-e827983a");const i={class:"input"},l={class:"label",ref:"label"},r={class:"desc _caption"};(0,n.popScopeId)();const d=o(((e,t,a,o,d,s)=>((0,n.openBlock)(),(0,n.createBlock)("div",{class:["adhpbeos",{focused:e.focused,filled:e.filled,tall:e.tall,pre:e.pre}]},[(0,n.createVNode)("div",i,[(0,n.createVNode)("span",l,[(0,n.renderSlot)(e.$slots,"default")],512),(0,n.createVNode)("textarea",{ref:"input",class:{code:e.code,_monospace:e.code},value:e.value,required:e.required,readonly:e.readonly,pattern:e.pattern,autocomplete:e.autocomplete,spellcheck:!e.code,onInput:t[1]||(t[1]=(...t)=>e.onInput&&e.onInput(...t)),onFocus:t[2]||(t[2]=t=>e.focused=!0),onBlur:t[3]||(t[3]=t=>e.focused=!1)},null,42,["value","required","readonly","pattern","autocomplete","spellcheck"])]),e.save&&e.changed?((0,n.openBlock)(),(0,n.createBlock)("button",{key:0,class:"save _textButton",onClick:t[4]||(t[4]=()=>{e.changed=!1,e.save()})},(0,n.toDisplayString)(e.$ts.save),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)("div",r,[(0,n.renderSlot)(e.$slots,"desc")])],2)))),s=(0,n.defineComponent)({props:{value:{required:!1},required:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},pattern:{type:String,required:!1},autocomplete:{type:String,required:!1},code:{type:Boolean,required:!1},tall:{type:Boolean,required:!1,default:!1},pre:{type:Boolean,required:!1,default:!1},save:{type:Function,required:!1}},data:()=>({focused:!1,changed:!1}),computed:{filled(){return""!=this.value&&null!=this.value}},methods:{focus(){this.$refs.input.focus()},onInput(e){this.changed=!0,this.$emit("update:value",e.target.value)}}});a(33391);s.render=d,s.__scopeId="data-v-e827983a";const c=s},13718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(55393);const o={class:"ztgjmzrw"},i={class:"_section"},l={class:"_content"},r={class:"_card _vMargin announcements"},d={class:"_content announcement"},s={key:0},c={class:"buttons"};var p=a(51436),u=a(56024),v=a(42453),b=a(77121),f=a(19055),h=a(10192);const m=(0,n.defineComponent)({components:{MkButton:v.Z,MkInput:b.Z,MkTextarea:f.Z},data(){return{INFO:{title:this.$ts.announcements,icon:p.T07},announcements:[],faBroadcastTower:p.T07,faSave:u.r6,faTrashAlt:u.I7,faPlus:p.r8p}},created(){h.hi("admin/announcements/list").then((e=>{this.announcements=e}))},methods:{add(){this.announcements.unshift({id:null,title:"",text:"",imageUrl:null})},remove(e){h.WZ({type:"warning",text:this.$t("removeAreYouSure",{x:e.title}),showCancelButton:!0}).then((({canceled:t})=>{t||(this.announcements=this.announcements.filter((t=>t!=e)),h.hi("admin/announcements/delete",e))}))},save(e){null==e.id?h.hi("admin/announcements/create",e).then((()=>{h.WZ({type:"success",text:this.$ts.saved})})).catch((e=>{h.WZ({type:"error",text:e})})):h.hi("admin/announcements/update",e).then((()=>{h.WZ({type:"success",text:this.$ts.saved})})).catch((e=>{h.WZ({type:"error",text:e})}))}}});m.render=function(e,t,a,p,u,v){const b=(0,n.resolveComponent)("Fa"),f=(0,n.resolveComponent)("MkButton"),h=(0,n.resolveComponent)("MkInput"),m=(0,n.resolveComponent)("MkTextarea");return(0,n.openBlock)(),(0,n.createBlock)("div",o,[(0,n.createVNode)("div",i,[(0,n.createVNode)("div",l,[(0,n.createVNode)(f,{onClick:t[1]||(t[1]=t=>e.add()),primary:"",style:{margin:"0 auto 16px auto"}},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{icon:e.faPlus},null,8,["icon"]),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$ts.add),1)])),_:1}),((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(e.announcements,(t=>((0,n.openBlock)(),(0,n.createBlock)("section",r,[(0,n.createVNode)("div",d,[(0,n.createVNode)(h,{value:t.title,"onUpdate:value":e=>t.title=e},{default:(0,n.withCtx)((()=>[(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.$ts.title),1)])),_:2},1032,["value","onUpdate:value"]),(0,n.createVNode)(m,{value:t.text,"onUpdate:value":e=>t.text=e},{default:(0,n.withCtx)((()=>[(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.$ts.text),1)])),_:2},1032,["value","onUpdate:value"]),(0,n.createVNode)(h,{value:t.imageUrl,"onUpdate:value":e=>t.imageUrl=e},{default:(0,n.withCtx)((()=>[(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.$ts.imageUrl),1)])),_:2},1032,["value","onUpdate:value"]),t.reads?((0,n.openBlock)(),(0,n.createBlock)("p",s,(0,n.toDisplayString)(e.$t("nUsersRead",{n:t.reads})),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)("div",c,[(0,n.createVNode)(f,{class:"button",inline:"",onClick:a=>e.save(t),primary:""},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{icon:e.faSave},null,8,["icon"]),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$ts.save),1)])),_:2},1032,["onClick"]),(0,n.createVNode)(f,{class:"button",inline:"",onClick:a=>e.remove(t)},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{icon:e.faTrashAlt},null,8,["icon"]),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.$ts.remove),1)])),_:2},1032,["onClick"])])])])))),256))])])])};const w=m},7803:(e,t,a)=>{var n=a(27582);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("1c67ebb2",n,!0,{})},33391:(e,t,a)=>{var n=a(92008);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("d5bc55b6",n,!0,{})}}]);