(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[5024,4586],{26051:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,'.eiipwacr[data-v-bcae1c0a]{position:relative;margin:32px 0}.eiipwacr[data-v-bcae1c0a]:not(.inline):first-child{margin-top:8px}.eiipwacr[data-v-bcae1c0a]:not(.inline):last-child{margin-bottom:8px}.eiipwacr>.icon[data-v-bcae1c0a]{position:absolute;top:0;left:0;width:24px;text-align:center;line-height:32px}.eiipwacr>.icon:not(:empty)+.input[data-v-bcae1c0a]{margin-left:28px}.eiipwacr>.input[data-v-bcae1c0a]{display:flex;position:relative}.eiipwacr>.input[data-v-bcae1c0a]:before{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:1px;background:var(--inputBorder)}.eiipwacr>.input[data-v-bcae1c0a]:after{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:2px;background:var(--accent);opacity:0;transform:scaleX(.12);transition:border .3s cubic-bezier(.4,0,.2,1),opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1);will-change:border opacity transform}.eiipwacr>.input>.label[data-v-bcae1c0a]{position:absolute;top:0;left:0;transition:.4s cubic-bezier(.25,.8,.25,1);transition-duration:.3s;font-size:1em;line-height:32px;pointer-events:none;transform-origin:top left;transform:scale(1)}.eiipwacr>.input>select[data-v-bcae1c0a]{display:block;flex:1;width:100%;padding:0;font:inherit;font-weight:400;font-size:1em;height:32px;background:none;border:none;border-radius:0;outline:none;box-shadow:none;appearance:none;-webkit-appearance:none;color:var(--fg)}.eiipwacr>.input>select optgroup[data-v-bcae1c0a],.eiipwacr>.input>select option[data-v-bcae1c0a]{color:var(--fg);background:var(--bg)}.eiipwacr>.input>.prefix[data-v-bcae1c0a],.eiipwacr>.input>.suffix[data-v-bcae1c0a]{display:block;align-self:center;justify-self:center;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none}.eiipwacr>.input>.prefix[data-v-bcae1c0a]:empty,.eiipwacr>.input>.suffix[data-v-bcae1c0a]:empty{display:none}.eiipwacr>.input>.prefix>*[data-v-bcae1c0a],.eiipwacr>.input>.suffix>*[data-v-bcae1c0a]{display:block;min-width:16px}.eiipwacr>.input>.prefix[data-v-bcae1c0a]{padding-right:4px}.eiipwacr>.input>.suffix[data-v-bcae1c0a]{padding-left:4px}.eiipwacr>.text[data-v-bcae1c0a]{margin:6px 0;font-size:.8em}.eiipwacr>.text[data-v-bcae1c0a]:empty{display:none}.eiipwacr>.text *[data-v-bcae1c0a]{margin:0}.eiipwacr.focused>.input[data-v-bcae1c0a]:after{opacity:1;transform:scaleX(1)}.eiipwacr.focused>.input>.label[data-v-bcae1c0a]{color:var(--accent)}.eiipwacr.filled>.input>.label[data-v-bcae1c0a],.eiipwacr.focused>.input>.label[data-v-bcae1c0a]{top:-17px;left:0!important;transform:scale(.75)}',""]),e.exports=o},5358:(e,t,a)=>{var o=a(23645)((function(e){return e[1]}));o.push([e.id,".t9makv94>._section>._content>.list-view>.item[data-v-355a7f25]{min-height:48px;word-break:break-all}.t9makv94>._section>._content>.list-view>.item[data-v-355a7f25]:not(:last-child){margin-bottom:8px}.t9makv94>._section>._content>.list-view>.item .select[data-v-355a7f25]{margin:24px 0}.t9makv94>._section>._content>.list-view>.item .type[data-v-355a7f25]{cursor:pointer}.t9makv94>._section>._content>.list-view>.item .default-value[data-v-355a7f25]{opacity:.6;pointer-events:none;user-select:none}.t9makv94>._section>._content>.list-view>.item .color>input[data-v-355a7f25]{display:inline-block;width:1.5em;height:1.5em}.t9makv94>._section>._content>.list-view>.item .color>div[data-v-355a7f25]{margin-left:8px;display:inline-block}",""]),e.exports=o},27106:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.d(t,{Z:()=>g});var o=a(55393),n=a(51436),i=a(11142),r=a(3689),s=a(76187),c=a(42453),l=a(77121),d=a(19055),p=a(66018),u=a(93870),h=a(86218),m=a(32532),v=a(34862),f=a(10192),y=a(1647),b=e([y]);y=(b.then?await b:b)[0];const g=(0,o.defineComponent)({components:{MkRadio:s.Z,MkButton:c.Z,MkInput:l.Z,MkTextarea:d.Z,MkSelect:p.Z,MkSample:u.Z},data(){return{INFO:{title:this.$ts.themeEditor,icon:n.q2v},theme:[],name:"",description:"",baseTheme:"light",author:`@${this.$i.username}@${(0,r.toUnicode)(v.ho)}`,themeToImport:"",changed:!1,lightTheme:m.lightTheme,darkTheme:m.darkTheme,themeProps:m.themeProps,faPalette:n.q2v,faChevronDown:n.ptq,faKeyboard:n.UFh}},computed:{baseProps(){return"light"===this.baseTheme?this.lightTheme.props:this.darkTheme.props}},beforeUnmount(){window.removeEventListener("beforeunload",this.beforeunload)},async beforeRouteLeave(e,t,a){this.changed&&!await this.confirm()?a(!1):a()},mounted(){this.init(),window.addEventListener("beforeunload",this.beforeunload);const e=()=>this.changed=!0;this.$watch("name",e),this.$watch("description",e),this.$watch("baseTheme",e),this.$watch("author",e),this.$watch("theme",e)},methods:{beforeunload(e){this.changed&&(e.preventDefault(),e.returnValue="")},async confirm(){const{canceled:e}=await f.WZ({type:"warning",text:this.$ts.leaveConfirm,showCancelButton:!0});return!e},init(){const e=[];for(const t of m.themeProps)e.push([t,null]);this.theme=e},async del(e){const{canceled:t}=await f.WZ({type:"warning",showCancelButton:!0,text:this.$t("_theme.deleteConstantConfirm",{const:this.theme[e][0]})});t||Vue.delete(this.theme,e)},async addConst(){const{canceled:e,result:t}=await f.WZ({title:this.$ts._theme.inputConstantName,input:!0});e||this.theme.push(["$"+t,"#000000"])},save(){const e=(0,h.Mt)(this.theme,this.name,this.description,this.author,this.baseTheme);(0,y.__)(e),f.WZ({type:"success",text:this.$t("_theme.installed",{name:e.name})}),this.changed=!1},preview(){const e=(0,h.Mt)(this.theme,this.name,this.description,this.author,this.baseTheme);try{(0,m.applyTheme)(e,!1)}catch(e){f.WZ({type:"error",text:e.message})}},async importTheme(){if(!this.changed||await this.confirm())try{const e=i.parse(this.themeToImport);if(!(0,m.validateTheme)(e))throw new Error(this.$ts._theme.invalid);this.name=e.name,this.description=e.desc||"",this.author=e.author,this.baseTheme=e.base||"light",this.theme=(0,h.mr)(e),this.themeToImport=""}catch(e){f.WZ({type:"error",text:e.message})}},colorChanged(e,t){this.theme[t]=[this.theme[t][0],e]},getTypeOf(e){return null===e?this.$ts._theme.defaultValue:"string"==typeof e?this.$ts._theme.color:this.$t("_theme."+e.type)},async chooseType(e,t){const a=await this.showTypeMenu(e);this.theme[t]=[this.theme[t][0],a]},showTypeMenu(e){return new Promise((t=>{f.n4([{text:this.$ts._theme.defaultValue,action:()=>t(null)},{text:this.$ts._theme.color,action:()=>t("#000000")},{text:this.$ts._theme.func,action:()=>t({type:"func",name:"alpha",arg:1,value:"accent"})},{text:this.$ts._theme.refProp,action:()=>t({type:"refProp",key:"accent"})},{text:this.$ts._theme.refConst,action:()=>t({type:"refConst",key:""})},{text:"CSS",action:()=>t({type:"css",value:""})}],e.currentTarget||e.target)}))}}})}))},86218:(e,t,a)=>{"use strict";a.d(t,{Mt:()=>s,mr:()=>c});var o=a(44586),n=a(32532);const i=e=>{if(!e)return null;if(e.startsWith(":")){const t=e.slice(1).split("<");return{type:"func",name:t[0],arg:parseFloat(t[1]),value:t[2].startsWith("@")?t[2].slice(1):""}}return e.startsWith("@")?{type:"refProp",key:e.slice(1)}:e.startsWith("$")?{type:"refConst",key:e.slice(1)}:e.startsWith('"')?{type:"css",value:e.substr(1).trim()}:e},r=e=>{if("string"==typeof e)return e;switch(e.type){case"func":return`:${e.name}<${e.arg}<@${e.value}`;case"refProp":return"@"+e.key;case"refConst":return"$"+e.key;case"css":return'" '+e.value}},s=(e,t,a,n,i)=>{const s={};for(const[t,a]of e)null!==a&&(s[t]=r(a));return{id:(0,o.Z)(),name:t,desc:a,author:n,props:s,base:i}},c=e=>{const t=[];t.push(...n.themeProps.map((t=>[t,i(e.props[t])])));const a=Object.keys(e.props).filter((e=>e.startsWith("$"))).map((t=>[t,i(e.props[t])]));return t.push(...a),t}},44586:(e,t,a)=>{"use strict";var o;a.d(t,{Z:()=>p});var n=new Uint8Array(16);function i(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(n)}const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const s=function(e){return"string"==typeof e&&r.test(e)};for(var c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));const d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!s(a))throw TypeError("Stringified UUID is invalid");return a};const p=function(e,t,a){var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){a=a||0;for(var n=0;n<16;++n)t[a+n]=o[n];return t}return d(o)}},66018:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var o=a(55393);const n=(0,o.withScopeId)("data-v-bcae1c0a");(0,o.pushScopeId)("data-v-bcae1c0a");const i={class:"icon",ref:"icon"},r={class:"label",ref:"label"},s={class:"prefix",ref:"prefix"},c={class:"suffix"},l={class:"text"};(0,o.popScopeId)();const d=n(((e,t,a,n,d,p)=>{const u=(0,o.resolveComponent)("Fa");return(0,o.openBlock)(),(0,o.createBlock)("div",{class:["eiipwacr",{focused:e.focused,disabled:e.disabled,filled:e.filled,inline:e.inline}]},[(0,o.createVNode)("div",i,[(0,o.renderSlot)(e.$slots,"icon")],512),(0,o.createVNode)("div",{class:"input",onClick:t[4]||(t[4]=(...t)=>e.focus&&e.focus(...t))},[(0,o.createVNode)("span",r,[(0,o.renderSlot)(e.$slots,"label")],512),(0,o.createVNode)("div",s,[(0,o.renderSlot)(e.$slots,"prefix")],512),(0,o.withDirectives)((0,o.createVNode)("select",{ref:"input","onUpdate:modelValue":t[1]||(t[1]=t=>e.v=t),required:e.required,disabled:e.disabled,onFocus:t[2]||(t[2]=t=>e.focused=!0),onBlur:t[3]||(t[3]=t=>e.focused=!1)},[(0,o.renderSlot)(e.$slots,"default")],40,["required","disabled"]),[[o.vModelSelect,e.v]]),(0,o.createVNode)("div",c,[(0,o.renderSlot)(e.$slots,"suffix",{},(()=>[(0,o.createVNode)(u,{icon:e.faChevronDown},null,8,["icon"])]))])]),(0,o.createVNode)("div",l,[(0,o.renderSlot)(e.$slots,"text")])],2)}));var p=a(51436);const u=(0,o.defineComponent)({props:{value:{required:!1},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},inline:{type:Boolean,required:!1,default:!1}},data:()=>({focused:!1,faChevronDown:p.ptq}),computed:{v:{get(){return this.value},set(e){this.$emit("update:value",e)}},filled:()=>!0},mounted(){this.$refs.prefix&&(this.$refs.label.style.left=this.$refs.prefix.offsetLeft+this.$refs.prefix.offsetWidth+"px")},methods:{focus(){this.$refs.input.focus()}}});a(33599);u.render=d,u.__scopeId="data-v-bcae1c0a";const h=u},35024:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.r(t),a.d(t,{default:()=>r});var o=a(96879),n=a(58425),i=(a(67792),e([n]));(n=(i.then?await i:i)[0]).Z.render=o.s,n.Z.__scopeId="data-v-355a7f25";const r=n.Z}))},58425:(e,t,a)=>{"use strict";a.a(e,(async e=>{a.d(t,{Z:()=>o.Z});var o=a(27106),n=e([o]);o=(n.then?await n:n)[0]}))},96879:(e,t,a)=>{"use strict";a.d(t,{s:()=>x});var o=a(55393);const n=(0,o.withScopeId)("data-v-355a7f25");(0,o.pushScopeId)("data-v-355a7f25");const i={class:"t9makv94"},r={class:"_section"},s={class:"_content"},c={class:"_section"},l={class:"_content _card _vMargin"},d={class:"_content"},p={class:"_inputs"},u={class:"_content _card _vMargin"},h={class:"list-view _content"},m={class:"_inputs"},v={key:1,class:"color"},f=(0,o.createTextVNode)("$"),y=(0,o.createVNode)("span",null,"CSS",-1),b={class:"_section"},g={class:"_content"},k={class:"_section"},w={class:"_content"};(0,o.popScopeId)();const x=n(((e,t,a,x,V,_)=>{const $=(0,o.resolveComponent)("MkTextarea"),N=(0,o.resolveComponent)("MkButton"),C=(0,o.resolveComponent)("MkInput"),S=(0,o.resolveComponent)("MkRadio"),T=(0,o.resolveComponent)("Fa"),B=(0,o.resolveComponent)("MkSelect"),D=(0,o.resolveComponent)("MkSample");return(0,o.openBlock)(),(0,o.createBlock)("div",i,[(0,o.createVNode)("section",r,[(0,o.createVNode)("div",s,[(0,o.createVNode)("details",null,[(0,o.createVNode)("summary",null,(0,o.toDisplayString)(e.$ts.import),1),(0,o.createVNode)($,{value:e.themeToImport,"onUpdate:value":t[1]||(t[1]=t=>e.themeToImport=t)},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts._theme.importInfo),1)])),_:1},8,["value"]),(0,o.createVNode)(N,{disabled:!e.themeToImport.trim(),onClick:e.importTheme},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts.import),1)])),_:1},8,["disabled","onClick"])])])]),(0,o.createVNode)("section",c,[(0,o.createVNode)("div",l,[(0,o.createVNode)("div",d,[(0,o.createVNode)(C,{value:e.name,"onUpdate:value":t[2]||(t[2]=t=>e.name=t),required:""},{default:n((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts.name),1)])),_:1},8,["value"]),(0,o.createVNode)(C,{value:e.author,"onUpdate:value":t[3]||(t[3]=t=>e.author=t),required:""},{default:n((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts.author),1)])),_:1},8,["value"]),(0,o.createVNode)($,{value:e.description,"onUpdate:value":t[4]||(t[4]=t=>e.description=t)},{default:n((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts.description),1)])),_:1},8,["value"]),(0,o.createVNode)("div",p,[(0,o.createVNode)("div",{textContent:(0,o.toDisplayString)(e.$ts._theme.base)},null,8,["textContent"]),(0,o.createVNode)(S,{modelValue:e.baseTheme,"onUpdate:modelValue":t[5]||(t[5]=t=>e.baseTheme=t),value:"light"},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts.light),1)])),_:1},8,["modelValue"]),(0,o.createVNode)(S,{modelValue:e.baseTheme,"onUpdate:modelValue":t[6]||(t[6]=t=>e.baseTheme=t),value:"dark"},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts.dark),1)])),_:1},8,["modelValue"])])])]),(0,o.createVNode)("div",u,[(0,o.createVNode)("div",h,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.theme,(([t,a],i)=>((0,o.openBlock)(),(0,o.createBlock)("div",{class:"item",key:t},[(0,o.createVNode)("div",m,[(0,o.createVNode)("div",null,[(0,o.createTextVNode)((0,o.toDisplayString)(t.startsWith("$")?`${t} (${e.$ts._theme.constant})`:e.$t("_theme.keys."+t))+" ",1),t.startsWith("$")?((0,o.openBlock)(),(0,o.createBlock)("button",{key:0,class:"_button _link",onClick:t=>e.del(i),textContent:(0,o.toDisplayString)(e.$ts.delete)},null,8,["onClick","textContent"])):(0,o.createCommentVNode)("",!0)]),(0,o.createVNode)("div",null,[(0,o.createVNode)("div",{class:"type",onClick:t=>e.chooseType(t,i)},[(0,o.createTextVNode)((0,o.toDisplayString)(e.getTypeOf(a))+" ",1),(0,o.createVNode)(T,{icon:e.faChevronDown},null,8,["icon"])],8,["onClick"]),null===a?((0,o.openBlock)(),(0,o.createBlock)("div",{key:0,textContent:(0,o.toDisplayString)(e.baseProps[t]),class:"default-value"},null,8,["textContent"])):"string"==typeof a?((0,o.openBlock)(),(0,o.createBlock)("div",v,[(0,o.createVNode)("input",{type:"color",value:a,onInput:t=>e.colorChanged(t.target.value,i)},null,40,["value","onInput"]),(0,o.createVNode)(C,{class:"select",value:a,"onUpdate:value":t=>e.colorChanged(t,i)},null,8,["value","onUpdate:value"])])):"refConst"===a.type?((0,o.openBlock)(),(0,o.createBlock)(C,{key:2,value:a.key,"onUpdate:value":e=>a.key=e},{prefix:n((()=>[f])),default:n((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts.name),1)])),_:2},1032,["value","onUpdate:value"])):"refProp"===a.type?((0,o.openBlock)(),(0,o.createBlock)(B,{key:3,class:"select",value:a.key,"onUpdate:value":e=>a.key=e},{default:n((()=>[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.themeProps,(t=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:t,key:t},(0,o.toDisplayString)(e.$t("_theme.keys."+t)),9,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):"func"===a.type?((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,{key:4},[(0,o.createVNode)(B,{class:"select",value:a.name,"onUpdate:value":e=>a.name=e},{label:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts._theme.funcKind),1)])),default:n((()=>[((0,o.openBlock)(),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(["alpha","darken","lighten"],(t=>(0,o.createVNode)("option",{value:t,key:t},(0,o.toDisplayString)(e.$t("_theme."+t)),9,["value"]))),64))])),_:2},1032,["value","onUpdate:value"]),(0,o.createVNode)(C,{type:"number",value:a.arg,"onUpdate:value":e=>a.arg=e},{default:n((()=>[(0,o.createVNode)("span",null,(0,o.toDisplayString)(e.$ts._theme.argument),1)])),_:2},1032,["value","onUpdate:value"]),(0,o.createVNode)(B,{class:"select",value:a.value,"onUpdate:value":e=>a.value=e},{label:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts._theme.basedProp),1)])),default:n((()=>[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.themeProps,(t=>((0,o.openBlock)(),(0,o.createBlock)("option",{value:t,key:t},(0,o.toDisplayString)(e.$t("_theme.keys."+t)),9,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])],64)):"css"===a.type?((0,o.openBlock)(),(0,o.createBlock)(C,{key:5,value:a.value,"onUpdate:value":e=>a.value=e},{default:n((()=>[y])),_:2},1032,["value","onUpdate:value"])):(0,o.createCommentVNode)("",!0)])])])))),128)),(0,o.createVNode)(N,{primary:"",onClick:e.addConst},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts._theme.addConstant),1)])),_:1},8,["onClick"])])])]),(0,o.createVNode)("section",b,[(0,o.createVNode)("details",g,[(0,o.createVNode)("summary",null,(0,o.toDisplayString)(e.$ts.sample),1),(0,o.createVNode)(D)])]),(0,o.createVNode)("section",k,[(0,o.createVNode)("div",w,[(0,o.createVNode)(N,{inline:"",onClick:e.preview},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts.preview),1)])),_:1},8,["onClick"]),(0,o.createVNode)(N,{inline:"",primary:"",disabled:!e.name||!e.author,onClick:e.save},{default:n((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$ts.save),1)])),_:1},8,["disabled","onClick"])])])])}))},67792:(e,t,a)=>{"use strict";a(22625)},33599:(e,t,a)=>{var o=a(26051);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("03940eb0",o,!0,{})},22625:(e,t,a)=>{var o=a(5358);"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,a(45346).Z)("cdd069bc",o,!0,{})}}]);