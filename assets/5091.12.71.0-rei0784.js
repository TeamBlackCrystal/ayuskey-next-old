(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[5091],{70986:(e,t,s)=>{var a=s(23645)((function(e){return e[1]}));a.push([e.id,".vrcsvlkm>._section>.banner[data-v-5b89182e]{position:relative;height:100px;background-color:#4c5e6d;background-size:cover;background-position:50%;border-radius:8px}.vrcsvlkm>._section>.banner>.avatar[data-v-5b89182e]{position:absolute;top:60px;width:64px;height:64px;left:0;right:0;margin:0 auto;border:4px solid var(--panel)}.vrcsvlkm>._section>.title[data-v-5b89182e]{text-align:center}.vrcsvlkm>._section>.status[data-v-5b89182e]{text-align:center;margin-top:8px}.vrcsvlkm>._section>.rawdata[data-v-5b89182e]{overflow:auto}",""]),e.exports=a},64279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var a=s(55393);const o=(0,a.withScopeId)("data-v-5b89182e");(0,a.pushScopeId)("data-v-5b89182e");const r={key:0,class:"vrcsvlkm"},n={class:"_section"},i={class:"_section"},l={class:"title"},d={class:"acct"},c={class:"status"},u={key:0,class:"staff"},p={key:1,class:"staff"},h={key:2,class:"punished"},m={key:3,class:"punished"},f={class:"_section"},k={class:"_content"},v={class:"_section"},w={class:"_content"},V={class:"_section"},N={class:"_content rawdata"};(0,a.popScopeId)();const g=o(((e,t,s,g,y,C)=>{const S=(0,a.resolveComponent)("MkUserName"),x=(0,a.resolveComponent)("MkAvatar"),B=(0,a.resolveComponent)("Fa"),b=(0,a.resolveComponent)("MkSwitch"),_=(0,a.resolveComponent)("MkButton"),I=(0,a.resolveComponent)("XModalWindow");return(0,a.openBlock)(),(0,a.createBlock)(I,{ref:"dialog",width:370,onClose:t[4]||(t[4]=t=>e.$refs.dialog.close()),onClosed:t[5]||(t[5]=t=>e.$emit("closed"))},(0,a.createSlots)({default:o((()=>[e.user&&e.info?((0,a.openBlock)(),(0,a.createBlock)("div",r,[(0,a.createVNode)("div",n,[(0,a.createVNode)("div",{class:"banner",style:e.bannerStyle},[(0,a.createVNode)(x,{class:"avatar",user:e.user},null,8,["user"])],4)]),(0,a.createVNode)("div",i,[(0,a.createVNode)("div",l,[(0,a.createVNode)("span",d,"@"+(0,a.toDisplayString)(e.acct(e.user)),1)]),(0,a.createVNode)("div",c,[e.user.isAdmin?((0,a.openBlock)(),(0,a.createBlock)("span",u,[(0,a.createVNode)(B,{icon:e.faBookmark},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),e.user.isModerator?((0,a.openBlock)(),(0,a.createBlock)("span",p,[(0,a.createVNode)(B,{icon:e.farBookmark},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),e.user.isSilenced?((0,a.openBlock)(),(0,a.createBlock)("span",h,[(0,a.createVNode)(B,{icon:e.faMicrophoneSlash},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),e.user.isSuspended?((0,a.openBlock)(),(0,a.createBlock)("span",m,[(0,a.createVNode)(B,{icon:e.faSnowflake},null,8,["icon"])])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)("div",f,[(0,a.createVNode)("div",k,[null!=e.user.host||!e.$i.isAdmin||!e.moderator&&e.user.isAdmin?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,"onUpdate:value":[e.toggleModerator,t[1]||(t[1]=t=>e.moderator=t)],value:e.moderator},{default:o((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.moderator),1)])),_:1},8,["onUpdate:value","value"])),(0,a.createVNode)(b,{"onUpdate:value":[e.toggleSilence,t[2]||(t[2]=t=>e.silenced=t)],value:e.silenced},{default:o((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.silence),1)])),_:1},8,["onUpdate:value","value"]),(0,a.createVNode)(b,{"onUpdate:value":[e.toggleSuspend,t[3]||(t[3]=t=>e.suspended=t)],value:e.suspended},{default:o((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.suspend),1)])),_:1},8,["onUpdate:value","value"])])]),(0,a.createVNode)("div",v,[(0,a.createVNode)("div",w,[(0,a.createVNode)(_,{full:"",onClick:e.openProfile},{default:o((()=>[(0,a.createVNode)(B,{icon:e.faExternalLinkSquareAlt},null,8,["icon"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$ts.profile),1)])),_:1},8,["onClick"]),null!=e.user.host?((0,a.openBlock)(),(0,a.createBlock)(_,{key:0,full:"",onClick:e.updateRemoteUser},{default:o((()=>[(0,a.createVNode)(B,{icon:e.faSync},null,8,["icon"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$ts.updateRemoteUser),1)])),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(_,{full:"",onClick:e.resetPassword},{default:o((()=>[(0,a.createVNode)(B,{icon:e.faKey},null,8,["icon"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$ts.resetPassword),1)])),_:1},8,["onClick"]),(0,a.createVNode)(_,{full:"",onClick:e.deleteAllFiles,danger:""},{default:o((()=>[(0,a.createVNode)(B,{icon:e.faTrashAlt},null,8,["icon"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$ts.deleteAllFiles),1)])),_:1},8,["onClick"])])]),(0,a.createVNode)("div",V,[(0,a.createVNode)("details",N,[(0,a.createVNode)("pre",null,[(0,a.createVNode)("code",null,(0,a.toDisplayString)(JSON.stringify(e.info,null,2)),1)])])])])):(0,a.createCommentVNode)("",!0)])),_:2},[e.user?{name:"header",fn:o((()=>[(0,a.createVNode)(S,{class:"name",user:e.user},null,8,["user"])]))}:void 0]),1536)}));var y=s(51436),C=s(56024),S=s(42453),x=s(83359),B=s(26786),b=s(13885),_=s(55006),I=s(10192);const U=(0,a.defineComponent)({components:{MkButton:S.Z,MkSwitch:x.Z,XModalWindow:B.Z},props:{userId:{required:!0}},emits:["closed"],data:()=>({user:null,info:null,moderator:!1,silenced:!1,suspended:!1,faTimes:y.NBC,faBookmark:y.xVw,farBookmark:C.xV,faKey:y.DD4,faSync:y.UO1,faMicrophoneSlash:y.EkX,faSnowflake:C.jO,faTrashAlt:C.I7,faExternalLinkSquareAlt:y.cyx}),computed:{bannerStyle(){return null==this.user.bannerUrl?{}:{backgroundImage:`url(${this.user.bannerUrl})`}}},created(){this.fetch()},methods:{async fetch(){b.Z.start(),this.user=await I.hi("users/show",{userId:this.userId}),this.info=await I.hi("admin/show-user",{userId:this.userId}),this.moderator=this.info.isModerator,this.silenced=this.info.isSilenced,this.suspended=this.info.isSuspended,b.Z.done()},async refreshUser(){this.user=await I.hi("users/show",{userId:this.user.id}),this.info=await I.hi("admin/show-user",{userId:this.user.id})},openProfile(){window.open((0,_.tL)(this.user,null,!0),"_blank")},async updateRemoteUser(){await I.hi("admin/update-remote-user",{userId:this.user.id}).then((e=>{I.Vp()})),await this.refreshUser()},async resetPassword(){I.Zv("admin/reset-password",{userId:this.user.id},void 0,(({password:e})=>{I.WZ({type:"success",text:this.$t("newPasswordIs",{password:e})})}))},async toggleSilence(e){(await I.WZ({type:"warning",showCancelButton:!0,text:e?this.$ts.silenceConfirm:this.$ts.unsilenceConfirm})).canceled?this.silenced=!e:(await I.hi(e?"admin/silence-user":"admin/unsilence-user",{userId:this.user.id}),await this.refreshUser())},async toggleSuspend(e){(await I.WZ({type:"warning",showCancelButton:!0,text:e?this.$ts.suspendConfirm:this.$ts.unsuspendConfirm})).canceled?this.suspended=!e:(await I.hi(e?"admin/suspend-user":"admin/unsuspend-user",{userId:this.user.id}),await this.refreshUser())},async toggleModerator(e){await I.hi(e?"admin/moderators/add":"admin/moderators/remove",{userId:this.user.id}),await this.refreshUser()},async deleteAllFiles(){if((await I.WZ({type:"warning",showCancelButton:!0,text:this.$ts.deleteAllFilesConfirm})).canceled)return;await(async()=>{await I.hi("admin/delete-all-files-of-a-user",{userId:this.user.id}),I.Vp()})().catch((e=>{I.WZ({type:"error",text:e.toString()})})),await this.refreshUser()},acct:_.R}});s(30849);U.render=g,U.__scopeId="data-v-5b89182e";const $=U},30849:(e,t,s)=>{var a=s(70986);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,s(45346).Z)("ac3acf16",a,!0,{})}}]);