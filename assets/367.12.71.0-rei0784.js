(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[367],{20367:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(55393);const i={key:0},s={ref:"captcha"};const c=(0,r.defineComponent)({props:{provider:{type:String,required:!0},sitekey:{type:String,required:!0},value:{type:String}},data:()=>({available:!1}),computed:{loaded(){return!!window[this.provider]},src(){const e={hcaptcha:"https://hcaptcha.com/1",grecaptcha:"https://www.recaptcha.net/recaptcha"}[this.provider];return("string"==typeof e?e:"about:invalid")+"/api.js?render=explicit"},captcha(){return window[this.provider]||{}}},created(){this.loaded?this.available=!0:(document.getElementById(this.provider)||document.head.appendChild(Object.assign(document.createElement("script"),{async:!0,id:this.provider,src:this.src}))).addEventListener("load",(()=>this.available=!0))},mounted(){this.available?this.requestRender():this.$watch("available",this.requestRender)},beforeUnmount(){this.reset()},methods:{reset(){var e;null===(e=this.captcha)||void 0===e||e.reset()},requestRender(){this.captcha.render&&this.$refs.captcha instanceof Element?this.captcha.render(this.$refs.captcha,{sitekey:this.sitekey,theme:this.$store.state.darkMode?"dark":"light",callback:this.callback,"expired-callback":this.callback,"error-callback":this.callback}):setTimeout(this.requestRender.bind(this),1)},callback(e){this.$emit("update:value","string"==typeof e?e:null)}}});c.render=function(e,t,a,c,n,l){const d=(0,r.resolveComponent)("MkEllipsis");return(0,r.openBlock)(),(0,r.createBlock)("div",null,[e.available?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)("span",i,[(0,r.createTextVNode)((0,r.toDisplayString)(e.$ts.waiting),1),(0,r.createVNode)(d)])),(0,r.createVNode)("div",s,null,512)])};const n=c}}]);