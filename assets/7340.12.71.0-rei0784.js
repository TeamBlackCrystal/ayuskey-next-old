(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[7340,4586],{52886:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var n=a(2212),i=function(e,t){var a,i,o,s,r,l;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new n.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:n.RsA.ROTATE,MIDDLE:n.RsA.DOLLY,RIGHT:n.RsA.PAN},this.touches={ONE:n.QmN.ROTATE,TWO:n.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return A.phi},this.getAzimuthalAngle=function(){return A.theta},this.listenToKeyEvents=function(e){e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.saveState=function(){d.target0.copy(d.target),d.position0.copy(d.object.position),d.zoom0=d.object.zoom},this.reset=function(){d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.zoom=d.zoom0,d.object.updateProjectionMatrix(),d.dispatchEvent(u),d.update(),h=f.NONE},this.update=(a=new n.Pa4,i=(new n._fP).setFromUnitVectors(e.up,new n.Pa4(0,1,0)),o=i.clone().invert(),s=new n.Pa4,r=new n._fP,l=2*Math.PI,function(){var e=d.object.position;a.copy(e).sub(d.target),a.applyQuaternion(i),A.setFromVector3(a),d.autoRotate&&h===f.NONE&&I(2*Math.PI/60/60*d.autoRotateSpeed),d.enableDamping?(A.theta+=x.theta*d.dampingFactor,A.phi+=x.phi*d.dampingFactor):(A.theta+=x.theta,A.phi+=x.phi);var t=d.minAzimuthAngle,n=d.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=l:t>Math.PI&&(t-=l),n<-Math.PI?n+=l:n>Math.PI&&(n-=l),A.theta=t<=n?Math.max(t,Math.min(n,A.theta)):A.theta>(t+n)/2?Math.max(t,A.theta):Math.min(n,A.theta)),A.phi=Math.max(d.minPolarAngle,Math.min(d.maxPolarAngle,A.phi)),A.makeSafe(),A.radius*=_,A.radius=Math.max(d.minDistance,Math.min(d.maxDistance,A.radius)),!0===d.enableDamping?d.target.addScaledVector(F,d.dampingFactor):d.target.add(F),a.setFromSpherical(A),a.applyQuaternion(o),e.copy(d.target).add(a),d.object.lookAt(d.target),!0===d.enableDamping?(x.theta*=1-d.dampingFactor,x.phi*=1-d.dampingFactor,F.multiplyScalar(1-d.dampingFactor)):(x.set(0,0,0),F.set(0,0,0)),_=1,!!(T||s.distanceToSquared(d.object.position)>m||8*(1-r.dot(d.object.quaternion))>m)&&(d.dispatchEvent(u),s.copy(d.object.position),r.copy(d.object.quaternion),T=!1,!0)}),this.dispose=function(){d.domElement.removeEventListener("contextmenu",te),d.domElement.removeEventListener("pointerdown",z),d.domElement.removeEventListener("wheel",V),d.domElement.removeEventListener("touchstart",J),d.domElement.removeEventListener("touchend",ee),d.domElement.removeEventListener("touchmove",$),d.domElement.ownerDocument.removeEventListener("pointermove",W),d.domElement.ownerDocument.removeEventListener("pointerup",Z),null!==d._domElementKeyEvents&&d._domElementKeyEvents.removeEventListener("keydown",q)};var d=this,u={type:"change"},c={type:"start"},p={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},h=f.NONE,m=1e-6,A=new n.$V,x=new n.$V,_=1,F=new n.Pa4,T=!1,g=new n.FM8,P=new n.FM8,v=new n.FM8,y=new n.FM8,E=new n.FM8,S=new n.FM8,L=new n.FM8,w=new n.FM8,b=new n.FM8;function N(){return Math.pow(.95,d.zoomSpeed)}function I(e){x.theta-=e}function M(e){x.phi-=e}var R,X=(R=new n.Pa4,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),F.add(R)}),U=function(){var e=new n.Pa4;return function(t,a){!0===d.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(d.object.up,e)),e.multiplyScalar(t),F.add(e)}}(),O=function(){var e=new n.Pa4;return function(t,a){var n=d.domElement;if(d.object.isPerspectiveCamera){var i=d.object.position;e.copy(i).sub(d.target);var o=e.length();o*=Math.tan(d.object.fov/2*Math.PI/180),X(2*t*o/n.clientHeight,d.object.matrix),U(2*a*o/n.clientHeight,d.object.matrix)}else d.object.isOrthographicCamera?(X(t*(d.object.right-d.object.left)/d.object.zoom/n.clientWidth,d.object.matrix),U(a*(d.object.top-d.object.bottom)/d.object.zoom/n.clientHeight,d.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),d.enablePan=!1)}}();function Y(e){d.object.isPerspectiveCamera?_/=e:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom*e)),d.object.updateProjectionMatrix(),T=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function Q(e){d.object.isPerspectiveCamera?_*=e:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom/e)),d.object.updateProjectionMatrix(),T=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function C(e){g.set(e.clientX,e.clientY)}function D(e){y.set(e.clientX,e.clientY)}function H(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,a)}}function j(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,a)}}function k(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+a*a);L.set(0,n)}function G(e){if(1==e.touches.length)P.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);P.set(t,a)}v.subVectors(P,g).multiplyScalar(d.rotateSpeed);var n=d.domElement;I(2*Math.PI*v.x/n.clientHeight),M(2*Math.PI*v.y/n.clientHeight),g.copy(P)}function B(e){if(1==e.touches.length)E.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(t,a)}S.subVectors(E,y).multiplyScalar(d.panSpeed),O(S.x,S.y),y.copy(E)}function K(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+a*a);w.set(0,n),b.set(0,Math.pow(w.y/L.y,d.zoomSpeed)),Y(b.y),L.copy(w)}function z(e){if(!1!==d.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),d.domElement.focus?d.domElement.focus():window.focus(),e.button){case 0:t=d.mouseButtons.LEFT;break;case 1:t=d.mouseButtons.MIDDLE;break;case 2:t=d.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n.RsA.DOLLY:if(!1===d.enableZoom)return;!function(e){L.set(e.clientX,e.clientY)}(e),h=f.DOLLY;break;case n.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===d.enablePan)return;D(e),h=f.PAN}else{if(!1===d.enableRotate)return;C(e),h=f.ROTATE}break;case n.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===d.enableRotate)return;C(e),h=f.ROTATE}else{if(!1===d.enablePan)return;D(e),h=f.PAN}break;default:h=f.NONE}h!==f.NONE&&(d.domElement.ownerDocument.addEventListener("pointermove",W),d.domElement.ownerDocument.addEventListener("pointerup",Z),d.dispatchEvent(c))}(e)}}function W(e){if(!1!==d.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===d.enabled)return;switch(e.preventDefault(),h){case f.ROTATE:if(!1===d.enableRotate)return;!function(e){P.set(e.clientX,e.clientY),v.subVectors(P,g).multiplyScalar(d.rotateSpeed);var t=d.domElement;I(2*Math.PI*v.x/t.clientHeight),M(2*Math.PI*v.y/t.clientHeight),g.copy(P),d.update()}(e);break;case f.DOLLY:if(!1===d.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),b.subVectors(w,L),b.y>0?Y(N()):b.y<0&&Q(N()),L.copy(w),d.update()}(e);break;case f.PAN:if(!1===d.enablePan)return;!function(e){E.set(e.clientX,e.clientY),S.subVectors(E,y).multiplyScalar(d.panSpeed),O(S.x,S.y),y.copy(E),d.update()}(e)}}(e)}}function Z(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(d.domElement.ownerDocument.removeEventListener("pointermove",W),d.domElement.ownerDocument.removeEventListener("pointerup",Z),!1===d.enabled)return;d.dispatchEvent(p),h=f.NONE}()}}function V(e){!1===d.enabled||!1===d.enableZoom||h!==f.NONE&&h!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),d.dispatchEvent(c),function(e){e.deltaY<0?Q(N()):e.deltaY>0&&Y(N()),d.update()}(e),d.dispatchEvent(p))}function q(e){!1!==d.enabled&&!1!==d.enablePan&&function(e){var t=!1;switch(e.keyCode){case d.keys.UP:O(0,d.keyPanSpeed),t=!0;break;case d.keys.BOTTOM:O(0,-d.keyPanSpeed),t=!0;break;case d.keys.LEFT:O(d.keyPanSpeed,0),t=!0;break;case d.keys.RIGHT:O(-d.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),d.update())}(e)}function J(e){if(!1!==d.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(d.touches.ONE){case n.QmN.ROTATE:if(!1===d.enableRotate)return;H(e),h=f.TOUCH_ROTATE;break;case n.QmN.PAN:if(!1===d.enablePan)return;j(e),h=f.TOUCH_PAN;break;default:h=f.NONE}break;case 2:switch(d.touches.TWO){case n.QmN.DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;!function(e){d.enableZoom&&k(e),d.enablePan&&j(e)}(e),h=f.TOUCH_DOLLY_PAN;break;case n.QmN.DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;!function(e){d.enableZoom&&k(e),d.enableRotate&&H(e)}(e),h=f.TOUCH_DOLLY_ROTATE;break;default:h=f.NONE}break;default:h=f.NONE}h!==f.NONE&&d.dispatchEvent(c)}}function $(e){if(!1!==d.enabled)switch(e.preventDefault(),e.stopPropagation(),h){case f.TOUCH_ROTATE:if(!1===d.enableRotate)return;G(e),d.update();break;case f.TOUCH_PAN:if(!1===d.enablePan)return;B(e),d.update();break;case f.TOUCH_DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;!function(e){d.enableZoom&&K(e),d.enablePan&&B(e)}(e),d.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;!function(e){d.enableZoom&&K(e),d.enableRotate&&G(e)}(e),d.update();break;default:h=f.NONE}}function ee(e){!1!==d.enabled&&(d.dispatchEvent(p),h=f.NONE)}function te(e){!1!==d.enabled&&e.preventDefault()}d.domElement.addEventListener("contextmenu",te),d.domElement.addEventListener("pointerdown",z),d.domElement.addEventListener("wheel",V),d.domElement.addEventListener("touchstart",J),d.domElement.addEventListener("touchend",ee),d.domElement.addEventListener("touchmove",$),this.update()};i.prototype=Object.create(n.pBf.prototype),i.prototype.constructor=i;var o=function(e,t){i.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=n.RsA.PAN,this.mouseButtons.RIGHT=n.RsA.ROTATE,this.touches.ONE=n.QmN.PAN,this.touches.TWO=n.QmN.DOLLY_ROTATE};(o.prototype=Object.create(n.pBf.prototype)).constructor=o},83633:(e,t,a)=>{"use strict";a.d(t,{Ys:()=>i});var n=a(2212),i=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),n.Tme.call(this),this.visible=!1,this.domElement=t;var a=new o;this.add(a);var i=new s;this.add(i);var r=this;k("camera",e),k("object",void 0),k("enabled",!0),k("axis",null),k("mode","translate"),k("translationSnap",null),k("rotationSnap",null),k("scaleSnap",null),k("space","world"),k("size",1),k("dragging",!1),k("showX",!0),k("showY",!0),k("showZ",!0);var l={type:"change"},d={type:"mouseDown"},u={type:"mouseUp",mode:r.mode},c={type:"objectChange"},p=new n.iMs;function f(e,t,a){for(var n=t.intersectObject(e,!0),i=0;i<n.length;i++)if(n[i].object.visible||a)return n[i];return!1}var h=new n.Pa4,m=new n.Pa4,A=new n._fP,x={X:new n.Pa4(1,0,0),Y:new n.Pa4(0,1,0),Z:new n.Pa4(0,0,1)},_=new n.Pa4,F=new n.Pa4,T=new n.Pa4,g=new n.Pa4,P=new n.Pa4,v=new n.Pa4,y=0,E=new n.Pa4,S=new n._fP,L=new n.Pa4,w=new n.Pa4,b=new n._fP,N=new n._fP,I=new n.Pa4,M=new n.Pa4,R=new n._fP,X=new n.Pa4,U=new n.Pa4,O=new n._fP,Y=new n._fP,Q=new n.Pa4,C=new n.Pa4,D=new n.Pa4,H=new n._fP,j=new n.Pa4;function k(e,t){var n=t;Object.defineProperty(r,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,i[e]=t,a[e]=t,r.dispatchEvent({type:e+"-changed",value:t}),r.dispatchEvent(l))}}),r[e]=t,i[e]=t,a[e]=t}function G(e){if(r.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var a=e.changedTouches?e.changedTouches[0]:e,n=t.getBoundingClientRect();return{x:(a.clientX-n.left)/n.width*2-1,y:-(a.clientY-n.top)/n.height*2+1,button:e.button}}function B(e){if(r.enabled)switch(e.pointerType){case"mouse":case"pen":r.pointerHover(G(e))}}function K(e){r.enabled&&(r.domElement.style.touchAction="none",r.domElement.ownerDocument.addEventListener("pointermove",z),r.pointerHover(G(e)),r.pointerDown(G(e)))}function z(e){r.enabled&&r.pointerMove(G(e))}function W(e){r.enabled&&(r.domElement.style.touchAction="",r.domElement.ownerDocument.removeEventListener("pointermove",z),r.pointerUp(G(e)))}k("worldPosition",U),k("worldPositionStart",M),k("worldQuaternion",O),k("worldQuaternionStart",R),k("cameraPosition",E),k("cameraQuaternion",S),k("pointStart",_),k("pointEnd",F),k("rotationAxis",g),k("rotationAngle",y),k("eye",C),t.addEventListener("pointerdown",K),t.addEventListener("pointermove",B),r.domElement.ownerDocument.addEventListener("pointerup",W),this.dispose=function(){t.removeEventListener("pointerdown",K),t.removeEventListener("pointermove",B),r.domElement.ownerDocument.removeEventListener("pointermove",z),r.domElement.ownerDocument.removeEventListener("pointerup",W),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(w,b,I),this.object.matrixWorld.decompose(U,O,Q),N.copy(b).invert(),Y.copy(O).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(E,S,L),C.copy(E).sub(U).normalize(),n.Tme.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){p.setFromCamera(e,this.camera);var t=f(a.picker[this.mode],p);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){p.setFromCamera(e,this.camera);var t=f(i,p,!0);if(t){var a=this.space;if("scale"===this.mode?a="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(a="world"),"local"===a&&"rotate"===this.mode){var n=this.rotationSnap;"X"===this.axis&&n&&(this.object.rotation.x=Math.round(this.object.rotation.x/n)*n),"Y"===this.axis&&n&&(this.object.rotation.y=Math.round(this.object.rotation.y/n)*n),"Z"===this.axis&&n&&(this.object.rotation.z=Math.round(this.object.rotation.z/n)*n)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),D.copy(this.object.position),H.copy(this.object.quaternion),j.copy(this.object.scale),this.object.matrixWorld.decompose(M,R,X),_.copy(t.point).sub(M)}this.dragging=!0,d.mode=this.mode,this.dispatchEvent(d)}},this.pointerMove=function(e){var t=this.axis,a=this.mode,n=this.object,o=this.space;if("scale"===a?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==n&&null!==t&&!1!==this.dragging&&-1===e.button){p.setFromCamera(e,this.camera);var s=f(i,p,!0);if(s){if(F.copy(s.point).sub(M),"translate"===a)T.copy(F).sub(_),"local"===o&&"XYZ"!==t&&T.applyQuaternion(Y),-1===t.indexOf("X")&&(T.x=0),-1===t.indexOf("Y")&&(T.y=0),-1===t.indexOf("Z")&&(T.z=0),"local"===o&&"XYZ"!==t?T.applyQuaternion(H).divide(I):T.applyQuaternion(N).divide(I),n.position.copy(T).add(D),this.translationSnap&&("local"===o&&(n.position.applyQuaternion(A.copy(H).invert()),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(H)),"world"===o&&(n.parent&&n.position.add(h.setFromMatrixPosition(n.parent.matrixWorld)),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(h.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===a){if(-1!==t.search("XYZ")){var r=F.length()/_.length();F.dot(_)<0&&(r*=-1),m.set(r,r,r)}else h.copy(_),m.copy(F),h.applyQuaternion(Y),m.applyQuaternion(Y),m.divide(h),-1===t.search("X")&&(m.x=1),-1===t.search("Y")&&(m.y=1),-1===t.search("Z")&&(m.z=1);n.scale.copy(j).multiply(m),this.scaleSnap&&(-1!==t.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===a){T.copy(F).sub(_);var d=20/U.distanceTo(h.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(g.copy(C),y=F.angleTo(_),P.copy(_).normalize(),v.copy(F).normalize(),y*=v.cross(P).dot(C)<0?1:-1):"XYZE"===t?(g.copy(T).cross(C).normalize(),y=T.dot(h.copy(g).cross(this.eye))*d):"X"!==t&&"Y"!==t&&"Z"!==t||(g.copy(x[t]),h.copy(x[t]),"local"===o&&h.applyQuaternion(O),y=T.dot(h.cross(C).normalize())*d),this.rotationSnap&&(y=Math.round(y/this.rotationSnap)*this.rotationSnap),this.rotationAngle=y,"local"===o&&"E"!==t&&"XYZE"!==t?(n.quaternion.copy(H),n.quaternion.multiply(A.setFromAxisAngle(g,y)).normalize()):(g.applyQuaternion(N),n.quaternion.copy(A.setFromAxisAngle(g,y)),n.quaternion.multiply(H).normalize())}this.dispatchEvent(l),this.dispatchEvent(c)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(u.mode=this.mode,this.dispatchEvent(u)),this.dragging=!1,this.axis=null)},this.getMode=function(){return r.mode},this.setMode=function(e){r.mode=e},this.setTranslationSnap=function(e){r.translationSnap=e},this.setRotationSnap=function(e){r.rotationSnap=e},this.setScaleSnap=function(e){r.scaleSnap=e},this.setSize=function(e){r.size=e},this.setSpace=function(e){r.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};i.prototype=Object.assign(Object.create(n.Tme.prototype),{constructor:i,isTransformControls:!0});var o=function(){n.Tme.call(this),this.type="TransformControlsGizmo";var e=new n.vBJ({depthTest:!1,depthWrite:!1,transparent:!0,side:n.ehD,fog:!1,toneMapped:!1}),t=new n.nls({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),a=e.clone();a.opacity=.15;var i=e.clone();i.opacity=.33;var o=e.clone();o.color.set(16711680);var s=e.clone();s.color.set(65280);var r=e.clone();r.color.set(255);var l=e.clone();l.opacity=.25;var d=l.clone();d.color.set(16776960);var u=l.clone();u.color.set(65535);var c=l.clone();c.color.set(16711935),e.clone().color.set(16776960);var p=t.clone();p.color.set(16711680);var f=t.clone();f.color.set(65280);var h=t.clone();h.color.set(255);var m=t.clone();m.color.set(65535);var A=t.clone();A.color.set(16711935);var x=t.clone();x.color.set(16776960);var _=t.clone();_.color.set(7895160);var F=x.clone();F.opacity=.25;var T=new n.fHI(0,.05,.2,12,1,!1),g=new n.DvJ(.125,.125,.125),P=new n.u9r;P.setAttribute("position",new n.a$l([0,0,0,1,0,0],3));var v,y=function(e,t){for(var a=new n.u9r,i=[],o=0;o<=64*t;++o)i.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return a.setAttribute("position",new n.a$l(i,3)),a},E={X:[[new n.Kj0(T,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new n.Kj0(T,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new n.x12(P,p)]],Y:[[new n.Kj0(T,s),[0,1,0],null,null,"fwd"],[new n.Kj0(T,s),[0,1,0],[Math.PI,0,0],null,"bwd"],[new n.x12(P,f),null,[0,0,Math.PI/2]]],Z:[[new n.Kj0(T,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new n.Kj0(T,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new n.x12(P,h),null,[0,-Math.PI/2,0]]],XYZ:[[new n.Kj0(new n.pQR(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new n.Kj0(new n._12(.295,.295),d.clone()),[.15,.15,0]],[new n.x12(P,x),[.18,.3,0],null,[.125,1,1]],[new n.x12(P,x),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Kj0(new n._12(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new n.x12(P,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new n.x12(P,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Kj0(new n._12(.295,.295),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new n.x12(P,A),[.18,0,.3],null,[.125,1,1]],[new n.x12(P,A),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},S={X:[[new n.Kj0(new n.fHI(.2,0,1,4,1,!1),a),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,1,4,1,!1),a),[0,.6,0]]],Z:[[new n.Kj0(new n.fHI(.2,0,1,4,1,!1),a),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new n.Kj0(new n.pQR(.2,0),a)]],XY:[[new n.Kj0(new n._12(.4,.4),a),[.2,.2,0]]],YZ:[[new n.Kj0(new n._12(.4,.4),a),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new n.Kj0(new n._12(.4,.4),a),[.2,0,.2],[-Math.PI/2,0,0]]]},L={START:[[new n.Kj0(new n.pQR(.01,2),i),null,null,null,"helper"]],END:[[new n.Kj0(new n.pQR(.01,2),i),null,null,null,"helper"]],DELTA:[[new n.x12((v=new n.u9r,v.setAttribute("position",new n.a$l([0,0,0,1,1,1],3)),v),i),null,null,null,"helper"]],X:[[new n.x12(P,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(P,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(P,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},w={X:[[new n.x12(y(1,.5),p)],[new n.Kj0(new n.pQR(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new n.x12(y(1,.5),f),null,[0,0,-Math.PI/2]],[new n.Kj0(new n.pQR(.04,0),s),[0,0,.99],null,[3,1,1]]],Z:[[new n.x12(y(1,.5),h),null,[0,Math.PI/2,0]],[new n.Kj0(new n.pQR(.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new n.x12(y(1.25,1),F),null,[0,Math.PI/2,0]],[new n.Kj0(new n.fHI(.03,0,.15,4,1,!1),F),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new n.Kj0(new n.fHI(.03,0,.15,4,1,!1),F),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new n.Kj0(new n.fHI(.03,0,.15,4,1,!1),F),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new n.Kj0(new n.fHI(.03,0,.15,4,1,!1),F),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new n.x12(y(1,1),_),null,[0,Math.PI/2,0]]]},b={AXIS:[[new n.x12(P,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},N={X:[[new n.Kj0(new n.XvJ(1,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n.Kj0(new n.XvJ(1,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n.Kj0(new n.XvJ(1,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n.Kj0(new n.XvJ(1.25,.1,2,24),a)]],XYZE:[[new n.Kj0(new n.xo$(.7,10,8),a)]]},I={X:[[new n.Kj0(g,o),[.8,0,0],[0,0,-Math.PI/2]],[new n.x12(P,p),null,null,[.8,1,1]]],Y:[[new n.Kj0(g,s),[0,.8,0]],[new n.x12(P,f),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new n.Kj0(g,r),[0,0,.8],[Math.PI/2,0,0]],[new n.x12(P,h),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new n.Kj0(g,d),[.85,.85,0],null,[2,2,.2]],[new n.x12(P,x),[.855,.98,0],null,[.125,1,1]],[new n.x12(P,x),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Kj0(g,u),[0,.85,.85],null,[.2,2,2]],[new n.x12(P,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new n.x12(P,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Kj0(g,c),[.85,0,.85],null,[2,.2,2]],[new n.x12(P,A),[.855,0,.98],null,[.125,1,1]],[new n.x12(P,A),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new n.Kj0(new n.DvJ(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new n.Kj0(new n.DvJ(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new n.Kj0(new n.DvJ(.125,.125,.125),l.clone()),[0,0,1.1]]]},M={X:[[new n.Kj0(new n.fHI(.2,0,.8,4,1,!1),a),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Kj0(new n.fHI(.2,0,.8,4,1,!1),a),[0,.5,0]]],Z:[[new n.Kj0(new n.fHI(.2,0,.8,4,1,!1),a),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new n.Kj0(g,a),[.85,.85,0],null,[3,3,.2]]],YZ:[[new n.Kj0(g,a),[0,.85,.85],null,[.2,3,3]]],XZ:[[new n.Kj0(g,a),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new n.Kj0(new n.DvJ(.2,.2,.2),a),[1.1,0,0]]],XYZY:[[new n.Kj0(new n.DvJ(.2,.2,.2),a),[0,1.1,0]]],XYZZ:[[new n.Kj0(new n.DvJ(.2,.2,.2),a),[0,0,1.1]]]},R={X:[[new n.x12(P,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.x12(P,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.x12(P,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},X=function(e){var t=new n.Tme;for(var a in e)for(var i=e[a].length;i--;){var o=e[a][i][0].clone(),s=e[a][i][1],r=e[a][i][2],l=e[a][i][3],d=e[a][i][4];o.name=a,o.tag=d,s&&o.position.set(s[0],s[1],s[2]),r&&o.rotation.set(r[0],r[1],r[2]),l&&o.scale.set(l[0],l[1],l[2]),o.updateMatrix();var u=o.geometry.clone();u.applyMatrix4(o.matrix),o.geometry=u,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t},U=new n.Pa4(0,0,0),O=new n.USm,Y=new n.Pa4(0,1,0),Q=new n.Pa4(0,0,0),C=new n.yGw,D=new n._fP,H=new n._fP,j=new n._fP,k=new n.Pa4(1,0,0),G=new n.Pa4(0,1,0),B=new n.Pa4(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=X(E)),this.add(this.gizmo.rotate=X(w)),this.add(this.gizmo.scale=X(I)),this.add(this.picker.translate=X(S)),this.add(this.picker.rotate=X(N)),this.add(this.picker.scale=X(M)),this.add(this.helper.translate=X(L)),this.add(this.helper.rotate=X(b)),this.add(this.helper.scale=X(R)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:j;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var a=[];a=(a=(a=a.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var i=0;i<a.length;i++){var o,s=a[i];if(s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==s.tag){if(s.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var r=.99;"X"!==s.name&&"XYZX"!==s.name||Math.abs(Y.copy(k).applyQuaternion(t).dot(this.eye))>r&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Y"!==s.name&&"XYZY"!==s.name||Math.abs(Y.copy(G).applyQuaternion(t).dot(this.eye))>r&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Z"!==s.name&&"XYZZ"!==s.name||Math.abs(Y.copy(B).applyQuaternion(t).dot(this.eye))>r&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XY"===s.name&&Math.abs(Y.copy(B).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"YZ"===s.name&&Math.abs(Y.copy(k).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XZ"===s.name&&Math.abs(Y.copy(G).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),-1!==s.name.search("X")&&(Y.copy(k).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.x*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Y")&&(Y.copy(G).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.y*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Z")&&(Y.copy(B).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.z*=-1:"bwd"===s.tag&&(s.visible=!1))}else"rotate"===this.mode&&(H.copy(t),Y.copy(this.eye).applyQuaternion(D.copy(t).invert()),-1!==s.name.search("E")&&s.quaternion.setFromRotationMatrix(C.lookAt(this.eye,Q,G)),"X"===s.name&&(D.setFromAxisAngle(k,Math.atan2(-Y.y,Y.z)),D.multiplyQuaternions(H,D),s.quaternion.copy(D)),"Y"===s.name&&(D.setFromAxisAngle(G,Math.atan2(Y.x,Y.z)),D.multiplyQuaternions(H,D),s.quaternion.copy(D)),"Z"===s.name&&(D.setFromAxisAngle(B,Math.atan2(Y.y,Y.x)),D.multiplyQuaternions(H,D),s.quaternion.copy(D)));s.visible=s.visible&&(-1===s.name.indexOf("X")||this.showX),s.visible=s.visible&&(-1===s.name.indexOf("Y")||this.showY),s.visible=s.visible&&(-1===s.name.indexOf("Z")||this.showZ),s.visible=s.visible&&(-1===s.name.indexOf("E")||this.showX&&this.showY&&this.showZ),s.material._opacity=s.material._opacity||s.material.opacity,s.material._color=s.material._color||s.material.color.clone(),s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled?this.axis&&(s.name===this.axis||this.axis.split("").some((function(e){return s.name===e}))?(s.material.opacity=1,s.material.color.lerp(new n.Ilk(1,1,1),.5)):(s.material.opacity*=.25,s.material.color.lerp(new n.Ilk(1,1,1),.5))):(s.material.opacity*=.5,s.material.color.lerp(new n.Ilk(1,1,1),.5))}else s.visible=!1,"AXIS"===s.name?(s.position.copy(this.worldPositionStart),s.visible=!!this.axis,"X"===this.axis&&(D.setFromEuler(O.set(0,0,0)),s.quaternion.copy(t).multiply(D),Math.abs(Y.copy(k).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Y"===this.axis&&(D.setFromEuler(O.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(D),Math.abs(Y.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Z"===this.axis&&(D.setFromEuler(O.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(D),Math.abs(Y.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"XYZE"===this.axis&&(D.setFromEuler(O.set(0,Math.PI/2,0)),Y.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(C.lookAt(Q,Y,G)),s.quaternion.multiply(D),s.visible=this.dragging),"E"===this.axis&&(s.visible=!1)):"START"===s.name?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):"END"===s.name?(s.position.copy(this.worldPosition),s.visible=this.dragging):"DELTA"===s.name?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),U.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),U.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(U),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=-1!==this.axis.search(s.name)))}n.Tme.prototype.updateMatrixWorld.call(this)}};o.prototype=Object.assign(Object.create(n.Tme.prototype),{constructor:o,isTransformControlsGizmo:!0});var s=function(){n.Kj0.call(this,new n._12(1e5,1e5,2,2),new n.vBJ({visible:!1,wireframe:!0,side:n.ehD,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new n.Pa4(1,0,0),t=new n.Pa4(0,1,0),a=new n.Pa4(0,0,1),i=new n.Pa4,o=new n.Pa4,s=new n.Pa4,r=new n.yGw,l=new n._fP;this.updateMatrixWorld=function(){var d=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(d="local"),e.set(1,0,0).applyQuaternion("local"===d?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===d?this.worldQuaternion:l),a.set(0,0,1).applyQuaternion("local"===d?this.worldQuaternion:l),s.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":s.copy(this.eye).cross(e),o.copy(e).cross(s);break;case"Y":s.copy(this.eye).cross(t),o.copy(t).cross(s);break;case"Z":s.copy(this.eye).cross(a),o.copy(a).cross(s);break;case"XY":o.copy(a);break;case"YZ":o.copy(e);break;case"XZ":s.copy(a),o.copy(t);break;case"XYZ":case"E":o.set(0,0,0)}break;case"rotate":default:o.set(0,0,0)}0===o.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(i.set(0,0,0),o,s),this.quaternion.setFromRotationMatrix(r)),n.Tme.prototype.updateMatrixWorld.call(this)}};s.prototype=Object.assign(Object.create(n.Kj0.prototype),{constructor:s,isTransformControlsPlane:!0})},17047:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var n=a(2212),i=function(){function e(e){n.aNw.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new r(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new c(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,a){e[t]=a},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(n.aNw.prototype),{constructor:e,load:function(e,t,a,i){var o,s=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.Zp0.extractUrlBase(e),this.manager.itemStart(e);var r=function(t){i?i(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},l=new n.hH6(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(a){try{s.parse(a,o,(function(a){t(a),s.manager.itemEnd(e)}),r)}catch(e){r(e)}}),a,r)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,o,r){var l,d={},u={};if("string"==typeof e)l=e;else if(n.Zp0.decodeText(new Uint8Array(e,0,4))===p){try{d[a.KHR_BINARY_GLTF]=new m(e)}catch(e){return void(r&&r(e))}l=d[a.KHR_BINARY_GLTF].content}else l=n.Zp0.decodeText(new Uint8Array(e));var c=JSON.parse(l);if(void 0===c.asset||c.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var f=new G(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(var h=0;h<this.pluginCallbacks.length;h++){var _=this.pluginCallbacks[h](f);u[_.name]=_,d[_.name]=!0}if(c.extensionsUsed)for(h=0;h<c.extensionsUsed.length;++h){var g=c.extensionsUsed[h],P=c.extensionsRequired||[];switch(g){case a.KHR_MATERIALS_UNLIT:d[g]=new s;break;case a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[g]=new F;break;case a.KHR_DRACO_MESH_COMPRESSION:d[g]=new A(c,this.dracoLoader);break;case a.MSFT_TEXTURE_DDS:d[g]=new i(this.ddsLoader);break;case a.KHR_TEXTURE_TRANSFORM:d[g]=new x;break;case a.KHR_MESH_QUANTIZATION:d[g]=new T;break;default:P.indexOf(g)>=0&&void 0===u[g]&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}f.setExtensions(d),f.setPlugins(u),f.parse(o,r)}}});var a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=a.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.parser=e,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function s(){this.name=a.KHR_MATERIALS_UNLIT}function r(e){this.parser=e,this.name=a.KHR_MATERIALS_CLEARCOAT}function l(e){this.parser=e,this.name=a.KHR_MATERIALS_TRANSMISSION}function d(e){this.parser=e,this.name=a.KHR_TEXTURE_BASISU}function u(e){this.parser=e,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}function c(e){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=e}o.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],a=0,n=t.length;a<n;a++){var i=t[a];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}},o.prototype._loadLight=function(e){var t=this.parser,a="light:"+e,i=t.cache.get(a);if(i)return i;var o,s=t.json,r=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e],l=new n.Ilk(16777215);void 0!==r.color&&l.fromArray(r.color);var d=void 0!==r.range?r.range:0;switch(r.type){case"directional":(o=new n.Ox3(l)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new n.cek(l)).distance=d;break;case"spot":(o=new n.PMe(l)).distance=d,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,o.angle=r.spot.outerConeAngle,o.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return o.position.set(0,0,0),o.decay=2,void 0!==r.intensity&&(o.intensity=r.intensity),o.name=t.createUniqueName(r.name||"light_"+e),i=Promise.resolve(o),t.cache.add(a,i),i},o.prototype.createNodeAttachment=function(e){var t=this,a=this.parser,n=a.json.nodes[e],i=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return a._getNodeRef(t.cache,i,e)}))},s.prototype.getMaterialType=function(){return n.vBJ},s.prototype.extendParams=function(e,t,a){var i=[];e.color=new n.Ilk(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var s=o.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}void 0!==o.baseColorTexture&&i.push(a.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(i)},r.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.EJi:null},r.prototype.extendMaterialParams=function(e,t){var a=this.parser,i=a.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var o=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&o.push(a.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&o.push(a.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(o.push(a.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){var r=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.FM8(r,-r)}return Promise.all(o)},l.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.EJi:null},l.prototype.extendMaterialParams=function(e,t){var a=this.parser,n=a.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(a.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)},d.prototype.loadTexture=function(e){var t=this.parser,a=t.json,n=a.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var i=n.extensions[this.name],o=a.images[i.source],s=t.options.ktx2Loader;if(!s){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,s)},u.prototype.loadTexture=function(e){var t=this.name,a=this.parser,n=a.json,i=n.textures[e];if(!i.extensions||!i.extensions[t])return null;var o=i.extensions[t],s=n.images[o.source],r=s.uri?a.options.manager.getHandler(s.uri):a.textureLoader;return this.detectSupport().then((function(i){if(i)return a.loadTextureImage(e,s,r);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return a.loadTexture(e)}))},u.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},c.prototype.loadBufferView=function(e){var t=this.parser.json,a=t.bufferViews[e];if(a.extensions&&a.extensions[this.name]){var n=a.extensions[this.name],i=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then((function(e){var t=n.byteOffset||0,a=n.byteLength||0,i=n.count,s=n.byteStride,r=new ArrayBuffer(i*s),l=new Uint8Array(e[0],t,a);return o.decodeGltfBuffer(new Uint8Array(r),i,s,l,n.mode,n.filter),r}))}return null};var p="glTF",f=1313821514,h=5130562;function m(e){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:n.Zp0.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==p)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,o=new DataView(e,12),s=0;s<i;){var r=o.getUint32(s,!0);s+=4;var l=o.getUint32(s,!0);if(s+=4,l===f){var d=new Uint8Array(e,12+s,r);this.content=n.Zp0.decodeText(d)}else if(l===h){var u=12+s;this.body=e.slice(u,u+r)}s+=r}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function A(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function x(){this.name=a.KHR_TEXTURE_TRANSFORM}function _(e){n.Wid.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),r={specular:{value:(new n.Ilk).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=r,this.onBeforeCompile=function(e){for(var n in r)e.uniforms[n]=r[n];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return r.specular.value},set:function(e){r.specular.value=e}},specularMap:{get:function(){return r.specularMap.value},set:function(e){r.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return r.glossiness.value},set:function(e){r.glossiness.value=e}},glossinessMap:{get:function(){return r.glossinessMap.value},set:function(e){r.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function F(){return{name:a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return _},extendParams:function(e,t,a){var i=t.extensions[this.name];e.color=new n.Ilk(1,1,1),e.opacity=1;var o=[];if(Array.isArray(i.diffuseFactor)){var s=i.diffuseFactor;e.color.fromArray(s),e.opacity=s[3]}if(void 0!==i.diffuseTexture&&o.push(a.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new n.Ilk(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new n.Ilk(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var r=i.specularGlossinessTexture;o.push(a.assignTexture(e,"glossinessMap",r)),o.push(a.assignTexture(e,"specularMap",r))}return Promise.all(o)},createMaterial:function(e){var t=new _(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=n.IOt,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function T(){this.name=a.KHR_MESH_QUANTIZATION}function g(e,t,a,i){n._C8.call(this,e,t,a,i)}A.prototype.decodePrimitive=function(e,t){var a=this.json,n=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},r={},l={};for(var d in o){var u=R[d]||d.toLowerCase();s[u]=o[d]}for(d in e.attributes){u=R[d]||d.toLowerCase();if(void 0!==o[d]){var c=a.accessors[e.attributes[d]],p=b[c.componentType];l[u]=p,r[u]=!0===c.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var a in e.attributes){var n=e.attributes[a],i=r[a];void 0!==i&&(n.normalized=i)}t(e)}),s,l)}))}))},x.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},_.prototype=Object.create(n.Wid.prototype),_.prototype.constructor=_,_.prototype.copy=function(e){return n.Wid.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},g.prototype=Object.create(n._C8.prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,a=this.sampleValues,n=this.valueSize,i=e*n*3+n,o=0;o!==n;o++)t[o]=a[i+o];return t},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(e,t,a,n){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,r=2*s,l=3*s,d=n-t,u=(a-t)/d,c=u*u,p=c*u,f=e*l,h=f-l,m=-2*p+3*c,A=p-c,x=1-m,_=A-c+u,F=0;F!==s;F++){var T=o[h+F+s],g=o[h+F+r]*d,P=o[f+F+s],v=o[f+F]*d;i[F]=x*T+_*g+m*P+A*v}return i};var P=0,v=1,y=2,E=3,S=4,L=5,w=6,b={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N={9728:n.TyD,9729:n.wem,9984:n.YLQ,9985:n.qyh,9986:n.aH4,9987:n.D1R},I={33071:n.uWy,33648:n.OoA,10497:n.rpg},M={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},X={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},U={CUBICSPLINE:void 0,LINEAR:n.NMF,STEP:n.Syv},O="OPAQUE",Y="MASK",Q="BLEND";function C(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function D(e,t,a){for(var n in a.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=a.extensions[n])}function H(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var a=0,n=t.weights.length;a<n;a++)e.morphTargetInfluences[a]=t.weights[a];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(a=0,n=i.length;a<n;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function k(e){for(var t="",a=Object.keys(e).sort(),n=0,i=a.length;n<i;n++)t+=a[n]+":"+e[a[n]]+";";return t}function G(e,a){this.json=e||{},this.extensions={},this.plugins={},this.options=a||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new n.QRU(this.options.manager):this.textureLoader=new n.dpR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new n.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function B(e,t,a){var i=t.attributes,o=[];function s(t,n){return a.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var r in i){var l=R[r]||r.toLowerCase();l in e.attributes||o.push(s(i[r],l))}if(void 0!==t.indices&&!e.index){var d=a.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(d)}return H(e,t),function(e,t,a){var i=t.attributes,o=new n.ZzF;if(void 0!==i.POSITION){var s=(f=a.json.accessors[i.POSITION]).min,r=f.max;if(void 0!==s&&void 0!==r){o.set(new n.Pa4(s[0],s[1],s[2]),new n.Pa4(r[0],r[1],r[2]));var l=t.targets;if(void 0!==l){for(var d=new n.Pa4,u=new n.Pa4,c=0,p=l.length;c<p;c++){var f,h=l[c];if(void 0!==h.POSITION)s=(f=a.json.accessors[h.POSITION]).min,r=f.max,void 0!==s&&void 0!==r?(u.setX(Math.max(Math.abs(s[0]),Math.abs(r[0]))),u.setY(Math.max(Math.abs(s[1]),Math.abs(r[1]))),u.setZ(Math.max(Math.abs(s[2]),Math.abs(r[2]))),d.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}o.expandByVector(d)}e.boundingBox=o;var m=new n.aLr;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,a),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,a){for(var n=!1,i=!1,o=0,s=t.length;o<s&&(void 0!==(d=t[o]).POSITION&&(n=!0),void 0!==d.NORMAL&&(i=!0),!n||!i);o++);if(!n&&!i)return Promise.resolve(e);var r=[],l=[];for(o=0,s=t.length;o<s;o++){var d=t[o];if(n){var u=void 0!==d.POSITION?a.getDependency("accessor",d.POSITION):e.attributes.position;r.push(u)}i&&(u=void 0!==d.NORMAL?a.getDependency("accessor",d.NORMAL):e.attributes.normal,l.push(u))}return Promise.all([Promise.all(r),Promise.all(l)]).then((function(t){var a=t[0],o=t[1];return n&&(e.morphAttributes.position=a),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,a):e}))}function K(e,t){var a=e.getIndex();if(null===a){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var s=0;s<o.count;s++)i.push(s);e.setIndex(i),a=e.getIndex()}var r=a.count-2,l=[];if(t===n.z$h)for(s=1;s<=r;s++)l.push(a.getX(0)),l.push(a.getX(s)),l.push(a.getX(s+1));else for(s=0;s<r;s++)s%2==0?(l.push(a.getX(s)),l.push(a.getX(s+1)),l.push(a.getX(s+2))):(l.push(a.getX(s+2)),l.push(a.getX(s+1)),l.push(a.getX(s)));l.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var d=e.clone();return d.setIndex(l),d}return G.prototype.setExtensions=function(e){this.extensions=e},G.prototype.setPlugins=function(e){this.plugins=e},G.prototype.parse=function(e,t){var a=this,n=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:a,userData:{}};D(i,o,n),H(o,n),e(o)})).catch(t)},G.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],a=this.json.meshes||[],n=0,i=t.length;n<i;n++)for(var o=t[n].joints,s=0,r=o.length;s<r;s++)e[o[s]].isBone=!0;for(var l=0,d=e.length;l<d;l++){var u=e[l];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(a[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}},G.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},G.prototype._getNodeRef=function(e,t,a){if(e.refs[t]<=1)return a;var n=a.clone();return n.name+="_instance_"+e.uses[t]++,n},G.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var a=0;a<t.length;a++){var n=e(t[a]);if(n)return n}},G.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var a=[],n=0;n<t.length;n++){var i=e(t[n]);i&&a.push(i)}return a},G.prototype.getDependency=function(e,t){var a=e+":"+t,n=this.cache.get(a);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(a,n)}return n},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var a=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return a.getDependency(e,n)}))),this.cache.add(e,t)}return t},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,a){n.load(C(t.uri,i.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var a=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+a)}))},G.prototype.loadAccessor=function(e){var t=this,a=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,s,r=e[0],l=M[i.type],d=b[i.componentType],u=d.BYTES_PER_ELEMENT,c=u*l,p=i.byteOffset||0,f=void 0!==i.bufferView?a.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;if(f&&f!==c){var m=Math.floor(p/f),A="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,x=t.cache.get(A);x||(o=new d(r,m*f,i.count*f/u),x=new n.vpT(o,f/u),t.cache.add(A,x)),s=new n.kB5(x,l,p%f/u,h)}else o=null===r?new d(i.count*l):new d(r,p,i.count*l),s=new n.TlE(o,l,h);if(void 0!==i.sparse){var _=M.SCALAR,F=b[i.sparse.indices.componentType],T=i.sparse.indices.byteOffset||0,g=i.sparse.values.byteOffset||0,P=new F(e[1],T,i.sparse.count*_),v=new d(e[2],g,i.sparse.count*l);null!==r&&(s=new n.TlE(s.array.slice(),s.itemSize,s.normalized));for(var y=0,E=P.length;y<E;y++){var S=P[y];if(s.setX(S,v[y*l]),l>=2&&s.setY(S,v[y*l+1]),l>=3&&s.setZ(S,v[y*l+2]),l>=4&&s.setW(S,v[y*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return s}))},G.prototype.loadTexture=function(e){var t,n,i=this.json,o=this.options,s=i.textures[e],r=s.extensions||{};return(t=r[a.MSFT_TEXTURE_DDS]?i.images[r[a.MSFT_TEXTURE_DDS].source]:i.images[s.source]).uri&&(n=o.manager.getHandler(t.uri)),n||(n=r[a.MSFT_TEXTURE_DDS]?this.extensions[a.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,n)},G.prototype.loadTextureImage=function(e,t,a){var i=this,o=this.json,s=this.options,r=o.textures[e],l=self.URL||self.webkitURL,d=t.uri,u=!1,c=!0;return"image/jpeg"===t.mimeType&&(c=!1),void 0!==t.bufferView&&(d=i.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var a=new DataView(e,25,1).getUint8(0,!1);c=6===a||4===a||3===a}u=!0;var n=new Blob([e],{type:t.mimeType});return d=l.createObjectURL(n)}))),Promise.resolve(d).then((function(e){return new Promise((function(t,i){var o=t;!0===a.isImageBitmapLoader&&(o=function(e){t(new n.ROQ(e))}),a.load(C(e,s.path),o,void 0,i)}))})).then((function(t){!0===u&&l.revokeObjectURL(d),t.flipY=!1,r.name&&(t.name=r.name),c||(t.format=n.UCm);var a=(o.samplers||{})[r.sampler]||{};return t.magFilter=N[a.magFilter]||n.wem,t.minFilter=N[a.minFilter]||n.D1R,t.wrapS=I[a.wrapS]||n.rpg,t.wrapT=I[a.wrapT]||n.rpg,i.associations.set(t,{type:"textures",index:e}),t}))},G.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[a.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(s){var r=i.associations.get(o);o=i.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),i.associations.set(o,r)}}e[t]=o}))},G.prototype.assignFinalMaterial=function(e){var t=e.geometry,a=e.material,i=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,s=void 0===t.attributes.normal,r=!0===e.isSkinnedMesh,l=Object.keys(t.morphAttributes).length>0,d=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+a.uuid,c=this.cache.get(u);c||(c=new n.UY4,n.F5T.prototype.copy.call(c,a),c.color.copy(a.color),c.map=a.map,c.sizeAttenuation=!1,this.cache.add(u,c)),a=c}else if(e.isLine){u="LineBasicMaterial:"+a.uuid;var p=this.cache.get(u);p||(p=new n.nls,n.F5T.prototype.copy.call(p,a),p.color.copy(a.color),this.cache.add(u,p)),a=p}if(i||o||s||r||l){u="ClonedMaterial:"+a.uuid+":";a.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),r&&(u+="skinning:"),i&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),s&&(u+="flat-shading:"),l&&(u+="morph-targets:"),d&&(u+="morph-normals:");var f=this.cache.get(u);f||(f=a.clone(),r&&(f.skinning=!0),o&&(f.vertexColors=!0),s&&(f.flatShading=!0),l&&(f.morphTargets=!0),d&&(f.morphNormals=!0),i&&(f.vertexTangents=!0,f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(u,f),this.associations.set(f,this.associations.get(a))),a=f}a.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=a},G.prototype.getMaterialType=function(){return n.Wid},G.prototype.loadMaterial=function(e){var t,i=this,o=this.json,s=this.extensions,r=o.materials[e],l={},d=r.extensions||{},u=[];if(d[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=s[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),u.push(c.extendParams(l,r,i))}else if(d[a.KHR_MATERIALS_UNLIT]){var p=s[a.KHR_MATERIALS_UNLIT];t=p.getMaterialType(),u.push(p.extendParams(l,r,i))}else{var f=r.pbrMetallicRoughness||{};if(l.color=new n.Ilk(1,1,1),l.opacity=1,Array.isArray(f.baseColorFactor)){var h=f.baseColorFactor;l.color.fromArray(h),l.opacity=h[3]}void 0!==f.baseColorTexture&&u.push(i.assignTexture(l,"map",f.baseColorTexture)),l.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,l.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(u.push(i.assignTexture(l,"metalnessMap",f.metallicRoughnessTexture)),u.push(i.assignTexture(l,"roughnessMap",f.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===r.doubleSided&&(l.side=n.ehD);var m=r.alphaMode||O;return m===Q?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===Y&&(l.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&t!==n.vBJ&&(u.push(i.assignTexture(l,"normalMap",r.normalTexture)),l.normalScale=new n.FM8(1,-1),void 0!==r.normalTexture.scale&&l.normalScale.set(r.normalTexture.scale,-r.normalTexture.scale)),void 0!==r.occlusionTexture&&t!==n.vBJ&&(u.push(i.assignTexture(l,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(l.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&t!==n.vBJ&&(l.emissive=(new n.Ilk).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&t!==n.vBJ&&u.push(i.assignTexture(l,"emissiveMap",r.emissiveTexture)),Promise.all(u).then((function(){var o;return o=t===_?s[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new t(l),r.name&&(o.name=r.name),o.map&&(o.map.encoding=n.knz),o.emissiveMap&&(o.emissiveMap.encoding=n.knz),H(o,r),i.associations.set(o,{type:"materials",index:e}),r.extensions&&D(s,o,r),o}))},G.prototype.createUniqueName=function(e){for(var t=n.iUV.sanitizeNodeName(e||""),a=t,i=1;this.nodeNamesUsed[a];++i)a=t+"_"+i;return this.nodeNamesUsed[a]=!0,a},G.prototype.loadGeometries=function(e){var t=this,i=this.extensions,o=this.primitiveCache;function s(e){return i[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(a){return B(a,e,t)}))}for(var r,l,d=[],u=0,c=e.length;u<c;u++){var p,f=e[u],h=(l=void 0,(l=(r=f).extensions&&r.extensions[a.KHR_DRACO_MESH_COMPRESSION])?"draco:"+l.bufferView+":"+l.indices+":"+k(l.attributes):r.indices+":"+k(r.attributes)+":"+r.mode),m=o[h];if(m)d.push(m.promise);else p=f.extensions&&f.extensions[a.KHR_DRACO_MESH_COMPRESSION]?s(f):B(new n.u9r,f,t),o[h]={primitive:f,promise:p},d.push(p)}return Promise.all(d)},G.prototype.loadMesh=function(e){for(var t,a=this,i=this.json,o=this.extensions,s=i.meshes[e],r=s.primitives,l=[],d=0,u=r.length;d<u;d++){var c=void 0===r[d].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new n.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.Wl3})),t.DefaultMaterial):this.getDependency("material",r[d].material);l.push(c)}return l.push(a.loadGeometries(r)),Promise.all(l).then((function(t){for(var i=t.slice(0,t.length-1),l=t[t.length-1],d=[],u=0,c=l.length;u<c;u++){var p,f=l[u],h=r[u],m=i[u];if(h.mode===S||h.mode===L||h.mode===w||void 0===h.mode)p=!0===s.isSkinnedMesh?new n.TUv(f,m):new n.Kj0(f,m),!0===m.isMeshStandardMaterial&&m.side===n.ehD&&null!==f.getIndex()&&!0===f.hasAttribute("position")&&!0===f.hasAttribute("normal")&&!0===f.hasAttribute("uv")&&!1===f.hasAttribute("tangent")&&(f.computeTangents(),m.vertexTangents=!0),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),h.mode===L?p.geometry=K(p.geometry,n.UlW):h.mode===w&&(p.geometry=K(p.geometry,n.z$h));else if(h.mode===v)p=new n.ejS(f,m);else if(h.mode===E)p=new n.x12(f,m);else if(h.mode===y)p=new n.blk(f,m);else{if(h.mode!==P)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);p=new n.woe(f,m)}Object.keys(p.geometry.morphAttributes).length>0&&j(p,s),p.name=a.createUniqueName(s.name||"mesh_"+e),H(p,s),h.extensions&&D(o,p,h),a.assignFinalMaterial(p),d.push(p)}if(1===d.length)return d[0];var A=new n.ZAu;for(u=0,c=d.length;u<c;u++)A.add(d[u]);return A}))},G.prototype.loadCamera=function(e){var t,a=this.json.cameras[e],i=a[a.type];if(i)return"perspective"===a.type?t=new n.cPb(n.M8C.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===a.type&&(t=new n.iKG(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),a.name&&(t.name=this.createUniqueName(a.name)),H(t,a),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],a={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(a):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return a.inverseBindMatrices=e,a}))},G.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],a=[],i=[],o=[],s=[],r=[],l=0,d=t.channels.length;l<d;l++){var u=t.channels[l],c=t.samplers[u.sampler],p=u.target,f=void 0!==p.node?p.node:p.id,h=void 0!==t.parameters?t.parameters[c.input]:c.input,m=void 0!==t.parameters?t.parameters[c.output]:c.output;a.push(this.getDependency("node",f)),i.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",m)),s.push(c),r.push(p)}return Promise.all([Promise.all(a),Promise.all(i),Promise.all(o),Promise.all(s),Promise.all(r)]).then((function(a){for(var i=a[0],o=a[1],s=a[2],r=a[3],l=a[4],d=[],u=0,c=i.length;u<c;u++){var p=i[u],f=o[u],h=s[u],m=r[u],A=l[u];if(void 0!==p){var x;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,X[A.path]){case X.weights:x=n.dUE;break;case X.rotation:x=n.iLg;break;case X.position:case X.scale:default:x=n.yC1}var _=p.name?p.name:p.uuid,F=void 0!==m.interpolation?U[m.interpolation]:n.NMF,T=[];X[A.path]===X.weights?p.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&T.push(e.name?e.name:e.uuid)})):T.push(_);var P=h.array;if(h.normalized){var v;if(P.constructor===Int8Array)v=1/127;else if(P.constructor===Uint8Array)v=1/255;else if(P.constructor==Int16Array)v=1/32767;else{if(P.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");v=1/65535}for(var y=new Float32Array(P.length),E=0,S=P.length;E<S;E++)y[E]=P[E]*v;P=y}for(E=0,S=T.length;E<S;E++){var L=new x(T[E]+"."+X[A.path],f.array,P,F);"CUBICSPLINE"===m.interpolation&&(L.createInterpolant=function(e){return new g(this.times,this.values,this.getValueSize()/3,e)},L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),d.push(L)}}}var w=t.name?t.name:"animation_"+e;return new n.m7l(w,void 0,d)}))},G.prototype.loadNode=function(e){var t,a=this.json,i=this.extensions,o=this,s=a.nodes[e],r=s.name?o.createUniqueName(s.name):"";return(t=[],void 0!==s.mesh&&t.push(o.getDependency("mesh",s.mesh).then((function(e){var t=o._getNodeRef(o.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,a=s.weights.length;t<a;t++)e.morphTargetInfluences[t]=s.weights[t]})),t}))),void 0!==s.camera&&t.push(o.getDependency("camera",s.camera).then((function(e){return o._getNodeRef(o.cameraCache,s.camera,e)}))),o._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)).then((function(t){var a;if((a=!0===s.isBone?new n.N$j:t.length>1?new n.ZAu:1===t.length?t[0]:new n.Tme)!==t[0])for(var l=0,d=t.length;l<d;l++)a.add(t[l]);if(s.name&&(a.userData.name=s.name,a.name=r),H(a,s),s.extensions&&D(i,a,s),void 0!==s.matrix){var u=new n.yGw;u.fromArray(s.matrix),a.applyMatrix4(u)}else void 0!==s.translation&&a.position.fromArray(s.translation),void 0!==s.rotation&&a.quaternion.fromArray(s.rotation),void 0!==s.scale&&a.scale.fromArray(s.scale);return o.associations.set(a,{type:"nodes",index:e}),a}))},G.prototype.loadScene=function(){function e(t,a,i,o){var s=i.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===s.skin?e:o.getDependency("skin",s.skin).then((function(e){for(var a=[],n=0,i=(t=e).joints.length;n<i;n++)a.push(o.getDependency("node",t.joints[n]));return Promise.all(a)})).then((function(a){return e.traverse((function(e){if(e.isMesh){for(var i=[],o=[],s=0,r=a.length;s<r;s++){var l=a[s];if(l){i.push(l);var d=new n.yGw;void 0!==t.inverseBindMatrices&&d.fromArray(t.inverseBindMatrices.array,16*s),o.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}e.bind(new n.OdW(i,o),e.matrixWorld)}})),e}));var t})).then((function(t){a.add(t);var n=[];if(s.children)for(var r=s.children,l=0,d=r.length;l<d;l++){var u=r[l];n.push(e(u,t,i,o))}return Promise.all(n)}))}return function(t){var a=this.json,i=this.extensions,o=this.json.scenes[t],s=new n.ZAu;o.name&&(s.name=this.createUniqueName(o.name)),H(s,o),o.extensions&&D(i,s,o);for(var r=o.nodes||[],l=[],d=0,u=r.length;d<u;d++)l.push(e(r[d],s,a,this));return Promise.all(l).then((function(){return s}))}}(),e}()},84894:(e,t,a)=>{"use strict";a.d(t,{y:()=>r});var n=a(2212),i=a(20740),o=a(68546),s={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new n.FM8(.001953125,0)},cKernel:{value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvec2 imageCoord = vUv;","\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","\t\timageCoord += uImageIncrement;","\t}","\tgl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){function t(e,t){return Math.exp(-e*e/(2*t*t))}var a,n,i,o,s=2*Math.ceil(3*e)+1;for(s>25&&(s=25),o=.5*(s-1),n=new Array(s),i=0,a=0;a<s;++a)n[a]=t(a-o,e),i+=n[a];for(a=0;a<s;++a)n[a]/=i;return n}},r=function(e,t,a,l){i.w.call(this),e=void 0!==e?e:1,t=void 0!==t?t:25,a=void 0!==a?a:4,l=void 0!==l?l:256;var d={minFilter:n.wem,magFilter:n.wem,format:n.wk1};this.renderTargetX=new n.dd2(l,l,d),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new n.dd2(l,l,d),this.renderTargetY.texture.name="BloomPass.y",void 0===o.C&&console.error("THREE.BloomPass relies on CopyShader");var u=o.C;this.copyUniforms=n.rDY.clone(u.uniforms),this.copyUniforms.opacity.value=e,this.materialCopy=new n.jyz({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:n.WMw,transparent:!0}),void 0===s&&console.error("THREE.BloomPass relies on ConvolutionShader");var c=s;this.convolutionUniforms=n.rDY.clone(c.uniforms),this.convolutionUniforms.uImageIncrement.value=r.blurX,this.convolutionUniforms.cKernel.value=s.buildKernel(a),this.materialConvolution=new n.jyz({uniforms:this.convolutionUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new i.w.FullScreenQuad(null)};r.prototype=Object.assign(Object.create(i.w.prototype),{constructor:r,render:function(e,t,a,n,i){i&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=a.texture,this.convolutionUniforms.uImageIncrement.value=r.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=r.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY.texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(a),this.clear&&e.clear(),this.fsQuad.render(e)}}),r.blurX=new n.FM8(.001953125,0),r.blurY=new n.FM8(0,.001953125)},32050:(e,t,a)=>{"use strict";a.d(t,{x:()=>d});var n=a(2212),i=a(68546),o=a(15980),s=a(20740),r=function(e,t){s.w.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};r.prototype=Object.assign(Object.create(s.w.prototype),{constructor:r,render:function(e,t,a){var n,i,o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(n=0,i=1):(n=1,i=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,n,4294967295),s.buffers.stencil.setClear(i),s.buffers.stencil.setLocked(!0),e.setRenderTarget(a),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}});var l=function(){s.w.call(this),this.needsSwap=!1};l.prototype=Object.create(s.w.prototype),Object.assign(l.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var d=function(e,t){if(this.renderer=e,void 0===t){var a={minFilter:n.wem,magFilter:n.wem,format:n.wk1},s=e.getSize(new n.FM8);this._pixelRatio=e.getPixelRatio(),this._width=s.width,this._height=s.height,(t=new n.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,a)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i.C&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.T&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.T(i.C),this.clock=new n.SUY};Object.assign(d.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,a,n=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(a=0;a<o;a++)if(!1!==(t=this.passes[a]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var s=this.renderer.getContext(),d=this.renderer.state.buffers.stencil;d.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),d.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==r&&(t instanceof r?i=!0:t instanceof l&&(i=!1))}this.renderer.setRenderTarget(n)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new n.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var a=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(a,n),this.renderTarget2.setSize(a,n);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(a,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var u,c,p,f=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(f.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),f.FullScreenQuad=(u=new n.iKG(-1,1,1,-1,0,1),c=new n._12(2,2),p=function(e){this._mesh=new n.Kj0(c,e)},Object.defineProperty(p.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(p.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,u)}}),p)},20740:(e,t,a)=>{"use strict";a.d(t,{w:()=>r});var n,i,o,s=a(2212);function r(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(r.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),r.FullScreenQuad=(n=new s.iKG(-1,1,1,-1,0,1),i=new s._12(2,2),o=function(e){this._mesh=new s.Kj0(i,e)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,n)}}),o)},86426:(e,t,a)=>{"use strict";a.d(t,{C:()=>o});var n=a(2212),i=a(20740),o=function(e,t,a,o,s){i.w.call(this),this.scene=e,this.camera=t,this.overrideMaterial=a,this.clearColor=o,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new n.Ilk};o.prototype=Object.assign(Object.create(i.w.prototype),{constructor:o,render:function(e,t,a){var n,i,o=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),n=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:a),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,n),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=i),e.autoClear=o}})},15980:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var n=a(2212),i=a(20740),o=function(e,t){i.w.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof n.jyz?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=n.rDY.clone(e.uniforms),this.material=new n.jyz({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.w.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.w.prototype),{constructor:o,render:function(e,t,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})},68546:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},45441:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var n={uniforms:{tDiffuse:{value:null},resolution:{value:new(a(2212).FM8)(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}},44586:(e,t,a)=>{"use strict";var n;a.d(t,{Z:()=>c});var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const r=function(e){return"string"==typeof e&&s.test(e)};for(var l=[],d=0;d<256;++d)l.push((d+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!r(a))throw TypeError("Stringified UUID is invalid");return a};const c=function(e,t,a){var n=(e=e||{}).random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var i=0;i<16;++i)t[a+i]=n[i];return t}return u(n)}}}]);