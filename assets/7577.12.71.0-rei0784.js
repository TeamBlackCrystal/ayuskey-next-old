(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[7577],{26368:(e,o,t)=>{var n=t(23645)((function(e){return e[1]}));n.push([e.id,'.kpoogebi[data-v-74d2d7c0]{position:relative;display:inline-block;font-weight:700;color:var(--accent);background:transparent;border:1px solid var(--accent);padding:0;height:31px;font-size:16px;border-radius:32px;background:#fff}.kpoogebi.full[data-v-74d2d7c0]{padding:0 8px 0 12px;font-size:14px}.kpoogebi.large[data-v-74d2d7c0]{font-size:16px;height:38px;padding:0 12px 0 16px}.kpoogebi[data-v-74d2d7c0]:not(.full){width:31px}.kpoogebi[data-v-74d2d7c0]:focus:after{content:"";pointer-events:none;position:absolute;top:-5px;right:-5px;bottom:-5px;left:-5px;border:2px solid var(--focus);border-radius:32px}.kpoogebi.active[data-v-74d2d7c0]{color:#fff;background:var(--accent)}.kpoogebi.active[data-v-74d2d7c0]:hover{background:var(--accentLighten);border-color:var(--accentLighten)}.kpoogebi.active[data-v-74d2d7c0]:active{background:var(--accentDarken);border-color:var(--accentDarken)}.kpoogebi.wait[data-v-74d2d7c0]{cursor:wait!important;opacity:.7}.kpoogebi>span[data-v-74d2d7c0]{margin-right:6px}',""]),e.exports=n},46864:(e,o,t)=>{var n=t(23645)((function(e){return e[1]}));n.push([e.id,'.qglefbjs[data-v-0c3259fb]{position:relative;box-sizing:border-box;padding:24px 32px;font-size:.9em;overflow-wrap:break-word;display:flex;contain:content}.qglefbjs.max-width_600px[data-v-0c3259fb]{padding:16px;font-size:.9em}.qglefbjs.max-width_500px[data-v-0c3259fb]{padding:12px;font-size:.8em}.qglefbjs[data-v-0c3259fb]:after{content:"";display:block;clear:both}.qglefbjs>.head[data-v-0c3259fb]{position:sticky;top:0;flex-shrink:0;width:42px;height:42px;margin-right:8px}.qglefbjs>.head>.icon[data-v-0c3259fb]{display:block;width:100%;height:100%;border-radius:6px}.qglefbjs>.head>.sub-icon[data-v-0c3259fb]{position:absolute;z-index:1;bottom:-2px;right:-2px;width:20px;height:20px;box-sizing:border-box;border-radius:100%;background:var(--panel);box-shadow:0 0 0 3px var(--panel);font-size:12px;pointer-events:none}.qglefbjs>.head>.sub-icon[data-v-0c3259fb]:empty{display:none}.qglefbjs>.head>.sub-icon>*[data-v-0c3259fb]{color:#fff;width:100%;height:100%}.qglefbjs>.head>.sub-icon.follow[data-v-0c3259fb],.qglefbjs>.head>.sub-icon.followRequestAccepted[data-v-0c3259fb],.qglefbjs>.head>.sub-icon.groupInvited[data-v-0c3259fb],.qglefbjs>.head>.sub-icon.receiveFollowRequest[data-v-0c3259fb]{padding:3px;background:#36aed2}.qglefbjs>.head>.sub-icon.renote[data-v-0c3259fb]{padding:3px;background:#36d298}.qglefbjs>.head>.sub-icon.quote[data-v-0c3259fb]{padding:3px;background:#36d298}.qglefbjs>.head>.sub-icon.reply[data-v-0c3259fb]{padding:3px;background:#007aff}.qglefbjs>.head>.sub-icon.mention[data-v-0c3259fb]{padding:3px;background:#88a6b7}.qglefbjs>.head>.sub-icon.pollVote[data-v-0c3259fb]{padding:3px;background:#88a6b7}.qglefbjs>.tail[data-v-0c3259fb]{flex:1;min-width:0}.qglefbjs>.tail>header[data-v-0c3259fb]{display:flex;align-items:baseline;white-space:nowrap}.qglefbjs>.tail>header>.name[data-v-0c3259fb]{text-overflow:ellipsis;white-space:nowrap;min-width:0;overflow:hidden}.qglefbjs>.tail>header>.time[data-v-0c3259fb]{margin-left:auto;font-size:.9em}.qglefbjs>.tail>.text[data-v-0c3259fb]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.qglefbjs>.tail>.text>[data-icon][data-v-0c3259fb]{vertical-align:super;font-size:50%;opacity:.5}.qglefbjs>.tail>.text>[data-icon][data-v-0c3259fb]:first-child{margin-right:4px}.qglefbjs>.tail>.text>[data-icon][data-v-0c3259fb]:last-child{margin-left:4px}',""]),e.exports=n},49683:(e,o,t)=>{"use strict";t.d(o,{Z:()=>m});var n=t(55393);const i=(0,n.withScopeId)("data-v-74d2d7c0");(0,n.pushScopeId)("data-v-74d2d7c0");const a={key:0},c={key:0},l={key:0},s={key:0},r={key:0},d={key:0};(0,n.popScopeId)();const p=i(((e,o,t,i,p,u)=>{const f=(0,n.resolveComponent)("Fa");return(0,n.openBlock)(),(0,n.createBlock)("button",{class:["kpoogebi _button",{wait:e.wait,active:e.isFollowing||e.hasPendingFollowRequestFromYou,full:e.full,large:e.large}],onClick:o[1]||(o[1]=(...o)=>e.onClick&&e.onClick(...o)),disabled:e.wait},[e.wait?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:1},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",d,(0,n.toDisplayString)(e.$ts.processing),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faSpinner,pulse:"","fixed-width":""},null,8,["icon"])],64)):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[e.hasPendingFollowRequestFromYou&&e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",a,(0,n.toDisplayString)(e.$ts.followRequestPending),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faHourglassHalf},null,8,["icon"])],64)):e.hasPendingFollowRequestFromYou&&!e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:1},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",c,(0,n.toDisplayString)(e.$ts.processing),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faSpinner,pulse:""},null,8,["icon"])],64)):e.isFollowing?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:2},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",l,(0,n.toDisplayString)(e.$ts.unfollow),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faMinus},null,8,["icon"])],64)):!e.isFollowing&&e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:3},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",s,(0,n.toDisplayString)(e.$ts.followRequest),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faPlus},null,8,["icon"])],64)):e.isFollowing||e.user.isLocked?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:4},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",r,(0,n.toDisplayString)(e.$ts.follow),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faPlus},null,8,["icon"])],64))],64))],10,["disabled"])}));var u=t(51436),f=t(10192);const g=(0,n.defineComponent)({props:{user:{type:Object,required:!0},full:{type:Boolean,required:!1,default:!1},large:{type:Boolean,required:!1,default:!1}},data(){return{isFollowing:this.user.isFollowing,hasPendingFollowRequestFromYou:this.user.hasPendingFollowRequestFromYou,wait:!1,connection:null,faSpinner:u.LM3,faPlus:u.r8p,faMinus:u.Kl4,faHourglassHalf:u.B2l}},created(){null==this.user.isFollowing&&f.hi("users/show",{userId:this.user.id}).then((e=>{this.isFollowing=e.isFollowing,this.hasPendingFollowRequestFromYou=e.hasPendingFollowRequestFromYou}))},mounted(){this.connection=f.Vw.useSharedConnection("main"),this.connection.on("follow",this.onFollowChange),this.connection.on("unfollow",this.onFollowChange)},beforeUnmount(){this.connection.dispose()},methods:{onFollowChange(e){e.id==this.user.id&&(this.isFollowing=e.isFollowing,this.hasPendingFollowRequestFromYou=e.hasPendingFollowRequestFromYou)},async onClick(){this.wait=!0;try{if(this.isFollowing){const{canceled:e}=await f.WZ({type:"warning",text:this.$t("unfollowConfirm",{name:this.user.name||this.user.username}),showCancelButton:!0});if(e)return;await f.hi("following/delete",{userId:this.user.id})}else this.hasPendingFollowRequestFromYou?await f.hi("following/requests/cancel",{userId:this.user.id}):(this.user.isLocked,await f.hi("following/create",{userId:this.user.id}),this.hasPendingFollowRequestFromYou=!0)}catch(e){console.error(e)}finally{this.wait=!1}}}});t(48623);g.render=p,g.__scopeId="data-v-74d2d7c0";const m=g},47577:(e,o,t)=>{"use strict";t.d(o,{Z:()=>F});var n=t(55393);const i=(0,n.withScopeId)("data-v-0c3259fb");(0,n.pushScopeId)("data-v-0c3259fb");const a={class:"head"},c={class:"tail"},l={key:1},s={key:6,class:"text",style:{opacity:"0.6"}},r={key:0},d={key:7,class:"text",style:{opacity:"0.6"}},p={key:8,class:"text",style:{opacity:"0.6"}},u={key:0},f=(0,n.createTextVNode)(" | "),g={key:9,class:"text",style:{opacity:"0.6"}},m={key:0},k=(0,n.createTextVNode)(" | "),h={key:10,class:"text"};(0,n.popScopeId)();const b=i(((e,o,t,b,y,v)=>{const w=(0,n.resolveComponent)("MkAvatar"),x=(0,n.resolveComponent)("Fa"),B=(0,n.resolveComponent)("XReactionIcon"),N=(0,n.resolveComponent)("MkUserName"),q=(0,n.resolveComponent)("MkA"),V=(0,n.resolveComponent)("MkTime"),j=(0,n.resolveComponent)("Mfm"),C=(0,n.resolveComponent)("MkFollowButton"),F=(0,n.resolveDirective)("user-preview"),R=(0,n.resolveDirective)("size");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)("div",{class:["qglefbjs",e.notification.type]},[(0,n.createVNode)("div",a,[e.notification.user?((0,n.openBlock)(),(0,n.createBlock)(w,{key:0,class:"icon",user:e.notification.user},null,8,["user"])):e.notification.icon?((0,n.openBlock)(),(0,n.createBlock)("img",{key:1,class:"icon",src:e.notification.icon,alt:""},null,8,["src"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)("div",{class:["sub-icon",e.notification.type]},["follow"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:0,icon:e.faPlus},null,8,["icon"])):"receiveFollowRequest"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:1,icon:e.faClock},null,8,["icon"])):"followRequestAccepted"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:2,icon:e.faCheck},null,8,["icon"])):"groupInvited"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:3,icon:e.faIdCardAlt},null,8,["icon"])):"renote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:4,icon:e.faRetweet},null,8,["icon"])):"reply"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:5,icon:e.faReply},null,8,["icon"])):"mention"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:6,icon:e.faAt},null,8,["icon"])):"quote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:7,icon:e.faQuoteLeft},null,8,["icon"])):"pollVote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(x,{key:8,icon:e.faPollH},null,8,["icon"])):"reaction"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(B,{key:9,reaction:e.notification.reaction,"custom-emojis":e.notification.note.emojis,"no-style":!0},null,8,["reaction","custom-emojis"])):(0,n.createCommentVNode)("",!0)],2)]),(0,n.createVNode)("div",c,[(0,n.createVNode)("header",null,[e.notification.user?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(q,{key:0,class:"name",to:e.userPage(e.notification.user)},{default:i((()=>[(0,n.createVNode)(N,{user:e.notification.user},null,8,["user"])])),_:1},8,["to"])),[[F,e.notification.user.id]]):((0,n.openBlock)(),(0,n.createBlock)("span",l,(0,n.toDisplayString)(e.notification.header),1)),e.withTime?((0,n.openBlock)(),(0,n.createBlock)(V,{key:2,time:e.notification.createdAt,class:"time"},null,8,["time"])):(0,n.createCommentVNode)("",!0)]),"reaction"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:0,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note)},{default:i((()=>[(0,n.createVNode)(x,{icon:e.faQuoteLeft},null,8,["icon"]),(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.emojis},null,8,["text","nowrap","custom-emojis"]),(0,n.createVNode)(x,{icon:e.faQuoteRight},null,8,["icon"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"renote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:1,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note.renote)},{default:i((()=>[(0,n.createVNode)(x,{icon:e.faQuoteLeft},null,8,["icon"]),(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note.renote),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.renote.emojis},null,8,["text","nowrap","custom-emojis"]),(0,n.createVNode)(x,{icon:e.faQuoteRight},null,8,["icon"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"reply"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:2,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note)},{default:i((()=>[(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.emojis},null,8,["text","nowrap","custom-emojis"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"mention"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:3,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note)},{default:i((()=>[(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.emojis},null,8,["text","nowrap","custom-emojis"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"quote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:4,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note)},{default:i((()=>[(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.emojis},null,8,["text","nowrap","custom-emojis"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"pollVote"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)(q,{key:5,class:"text",to:e.notePage(e.notification.note),title:e.getNoteSummary(e.notification.note)},{default:i((()=>[(0,n.createVNode)(x,{icon:e.faQuoteLeft},null,8,["icon"]),(0,n.createVNode)(j,{text:e.getNoteSummary(e.notification.note),plain:!0,nowrap:!e.full,"custom-emojis":e.notification.note.emojis},null,8,["text","nowrap","custom-emojis"]),(0,n.createVNode)(x,{icon:e.faQuoteRight},null,8,["icon"])])),_:1},8,["to","title"])):(0,n.createCommentVNode)("",!0),"follow"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)("span",s,[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.youGotNewFollower),1),e.full?((0,n.openBlock)(),(0,n.createBlock)("div",r,[(0,n.createVNode)(C,{user:e.notification.user,full:!0},null,8,["user"])])):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0),"followRequestAccepted"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)("span",d,(0,n.toDisplayString)(e.$ts.followRequestAccepted),1)):(0,n.createCommentVNode)("",!0),"receiveFollowRequest"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)("span",p,[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.receiveFollowRequest),1),e.full&&!e.followRequestDone?((0,n.openBlock)(),(0,n.createBlock)("div",u,[(0,n.createVNode)("button",{class:"_textButton",onClick:o[1]||(o[1]=o=>e.acceptFollowRequest())},(0,n.toDisplayString)(e.$ts.accept),1),f,(0,n.createVNode)("button",{class:"_textButton",onClick:o[2]||(o[2]=o=>e.rejectFollowRequest())},(0,n.toDisplayString)(e.$ts.reject),1)])):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0),"groupInvited"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)("span",g,[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.groupInvited)+": ",1),(0,n.createVNode)("b",null,(0,n.toDisplayString)(e.notification.invitation.group.name),1),e.full&&!e.groupInviteDone?((0,n.openBlock)(),(0,n.createBlock)("div",m,[(0,n.createVNode)("button",{class:"_textButton",onClick:o[3]||(o[3]=o=>e.acceptGroupInvitation())},(0,n.toDisplayString)(e.$ts.accept),1),k,(0,n.createVNode)("button",{class:"_textButton",onClick:o[4]||(o[4]=o=>e.rejectGroupInvitation())},(0,n.toDisplayString)(e.$ts.reject),1)])):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0),"app"===e.notification.type?((0,n.openBlock)(),(0,n.createBlock)("span",h,[(0,n.createVNode)(j,{text:e.notification.body,nowrap:!e.full},null,8,["text","nowrap"])])):(0,n.createCommentVNode)("",!0)])],2)),[[R,{max:[500,600]}]])}));var y=t(51436),v=t(56024);const w=(e,o)=>{if(e.deletedAt)return`(${o.deletedNote})`;if(e.isHidden)return`(${o.invisibleNote})`;let t="";return null!=e.cw?t+=e.cw:t+=e.text?e.text:"",0!=(e.files||[]).length&&(t+=` (${o.withNFiles.replace("{n}",e.files.length)})`),e.poll&&(t+=` (${o.poll})`),e.replyId&&(e.reply?t+="\n\nRE: "+w(e.reply,o):t+="\n\nRE: ..."),e.renoteId&&(e.renote?t+="\n\nRN: "+w(e.renote,o):t+="\n\nRN: ..."),t.trim()};var x=t(51253),B=t(49683),N=t(25021),q=t(55006),V=t(97062),j=t(10192);const C=(0,n.defineComponent)({components:{XReactionIcon:x.Z,MkFollowButton:B.Z},props:{notification:{type:Object,required:!0},withTime:{type:Boolean,required:!1,default:!1},full:{type:Boolean,required:!1,default:!1}},data:()=>({getNoteSummary:e=>w(e,V.a.locale),followRequestDone:!1,groupInviteDone:!1,connection:null,readObserver:null,faIdCardAlt:y.QjG,faPlus:y.r8p,faQuoteLeft:y.y1i,faQuoteRight:y.Elr,faRetweet:y.x5v,faReply:y.Lh7,faAt:y.IBq,faClock:v.SZ,faCheck:y.LEp,faPollH:y.Mm7}),mounted(){this.notification.isRead||(this.readObserver=new IntersectionObserver(((e,o)=>{e.some((e=>e.isIntersecting))&&(j.Vw.send("readNotification",{id:this.notification.id}),e.map((({target:e})=>o.unobserve(e))))})),this.readObserver.observe(this.$el),this.connection=j.Vw.useSharedConnection("main"),this.connection.on("readAllNotifications",(()=>this.readObserver.unobserve(this.$el))))},beforeUnmount(){this.notification.isRead||(this.readObserver.unobserve(this.$el),this.connection.dispose())},methods:{acceptFollowRequest(){this.followRequestDone=!0,j.hi("following/requests/accept",{userId:this.notification.user.id})},rejectFollowRequest(){this.followRequestDone=!0,j.hi("following/requests/reject",{userId:this.notification.user.id})},acceptGroupInvitation(){this.groupInviteDone=!0,j.Zv("users/groups/invitations/accept",{invitationId:this.notification.invitation.id})},rejectGroupInvitation(){this.groupInviteDone=!0,j.hi("users/groups/invitations/reject",{invitationId:this.notification.invitation.id})},notePage:N.Z,userPage:q.tL}});t(40943);C.render=b,C.__scopeId="data-v-0c3259fb";const F=C},48623:(e,o,t)=>{var n=t(26368);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,t(45346).Z)("cd997be6",n,!0,{})},40943:(e,o,t)=>{var n=t(46864);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,t(45346).Z)("1660fe64",n,!0,{})}}]);