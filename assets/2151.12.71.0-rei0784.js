(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[2151],{27582:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,'.juejbjww[data-v-32b1e952]{position:relative;margin:32px 0}.juejbjww[data-v-32b1e952]:not(.inline):first-child{margin-top:8px}.juejbjww[data-v-32b1e952]:not(.inline):last-child{margin-bottom:8px}.juejbjww>.icon[data-v-32b1e952]{position:absolute;top:0;left:0;width:24px;text-align:center;line-height:32px}.juejbjww>.icon:not(:empty)+.input[data-v-32b1e952]{margin-left:28px}.juejbjww>.input[data-v-32b1e952]{position:relative}.juejbjww>.input[data-v-32b1e952]:before{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:1px;background:var(--inputBorder)}.juejbjww>.input[data-v-32b1e952]:after{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:2px;background:var(--accent);opacity:0;transform:scaleX(.12);transition:border .3s cubic-bezier(.4,0,.2,1),opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1);will-change:border opacity transform}.juejbjww>.input>.label[data-v-32b1e952]{position:absolute;z-index:1;top:0;left:0;transition:.4s cubic-bezier(.25,.8,.25,1);transition-duration:.3s;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none;transform-origin:top left;transform:scale(1)}.juejbjww>.input>.title[data-v-32b1e952]{position:absolute;z-index:1;top:-17px;left:0!important;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none;transform-origin:top left;transform:scale(.75);white-space:nowrap;width:133%;overflow:hidden;text-overflow:ellipsis}.juejbjww>.input>.title>.warning[data-v-32b1e952]{margin-left:.5em;color:var(--infoWarnFg)}.juejbjww>.input>.title>.warning>svg[data-v-32b1e952]{margin-right:.1em}.juejbjww>.input>input[data-v-32b1e952]{display:block;height:32px;width:100%;margin:0;padding:0;font:inherit;font-weight:400;font-size:1em;line-height:32px;color:var(--inputText);background:transparent;border:none;border-radius:0;outline:none;box-shadow:none;box-sizing:border-box}.juejbjww>.input>input[type=file][data-v-32b1e952]{display:none}.juejbjww>.input>.prefix[data-v-32b1e952],.juejbjww>.input>.suffix[data-v-32b1e952]{display:block;position:absolute;z-index:1;top:0;font-size:1em;line-height:32px;color:var(--inputLabel);pointer-events:none}.juejbjww>.input>.prefix[data-v-32b1e952]:empty,.juejbjww>.input>.suffix[data-v-32b1e952]:empty{display:none}.juejbjww>.input>.prefix>*[data-v-32b1e952],.juejbjww>.input>.suffix>*[data-v-32b1e952]{display:inline-block;min-width:16px;max-width:150px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.juejbjww>.input>.prefix[data-v-32b1e952]{left:0;padding-right:4px}.juejbjww>.input>.suffix[data-v-32b1e952]{right:0;padding-left:4px}.juejbjww>.save[data-v-32b1e952]{margin:6px 0 0;font-size:.8em}.juejbjww>.desc[data-v-32b1e952]{margin:6px 0 0}.juejbjww>.desc[data-v-32b1e952]:empty{display:none}.juejbjww>.desc *[data-v-32b1e952]{margin:0}.juejbjww.focused>.input[data-v-32b1e952]:after{opacity:1;transform:scaleX(1)}.juejbjww.focused>.input>.label[data-v-32b1e952]{color:var(--accent)}.juejbjww.filled>.input>.label[data-v-32b1e952],.juejbjww.focused>.input>.label[data-v-32b1e952]{top:-17px;left:0!important;transform:scale(.75)}.juejbjww.inline[data-v-32b1e952]{display:inline-block;margin:0}.juejbjww.disabled[data-v-32b1e952]{opacity:.7}.juejbjww.disabled[data-v-32b1e952],.juejbjww.disabled *[data-v-32b1e952]{cursor:not-allowed!important}',""]),e.exports=a},84602:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".ebkgoccj[data-v-4b49273d]{overflow:hidden;display:flex;flex-direction:column;contain:content;--section-padding:24px}@media(max-width:500px){.ebkgoccj[data-v-4b49273d]{--section-padding:16px}}.ebkgoccj>.header[data-v-4b49273d]{display:flex;flex-shrink:0;box-shadow:0 1px var(--divider)}.ebkgoccj>.header>button[data-v-4b49273d]{height:58px;width:58px}@media(max-width:500px){.ebkgoccj>.header>button[data-v-4b49273d]{height:42px;width:42px}}.ebkgoccj>.header>.title[data-v-4b49273d]{flex:1;line-height:58px;padding-left:32px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;pointer-events:none}@media(max-width:500px){.ebkgoccj>.header>.title[data-v-4b49273d]{line-height:42px;padding-left:16px}}.ebkgoccj>.header>button+.title[data-v-4b49273d]{padding-left:0}.ebkgoccj>.body[data-v-4b49273d]{overflow:auto}",""]),e.exports=a},10357:(e,t,o)=>{var a=o(23645)((function(e){return e[1]}));a.push([e.id,".tbhwbxda[data-v-7cef8253]{display:flex;flex-direction:column;overflow:auto;height:100%}.tbhwbxda.recent[data-v-7cef8253],.tbhwbxda.result.hit[data-v-7cef8253]{padding:0}.tbhwbxda>.inputs>.input[data-v-7cef8253]{display:inline-block;width:50%;margin:0}.tbhwbxda>.users[data-v-7cef8253]{flex:1;overflow:auto;padding:8px 0}.tbhwbxda>.users>.user[data-v-7cef8253]{display:flex;align-items:center;padding:8px var(--section-padding);font-size:14px}.tbhwbxda>.users>.user[data-v-7cef8253]:hover{background:var(--X7)}.tbhwbxda>.users>.user.selected[data-v-7cef8253]{background:var(--accent);color:#fff}.tbhwbxda>.users>.user>*[data-v-7cef8253]{pointer-events:none;user-select:none}.tbhwbxda>.users>.user>.avatar[data-v-7cef8253]{width:45px;height:45px}.tbhwbxda>.users>.user>.body[data-v-7cef8253]{padding:0 8px;min-width:0}.tbhwbxda>.users>.user>.body>.name[data-v-7cef8253]{display:block;font-weight:700}.tbhwbxda>.users>.user>.body>.acct[data-v-7cef8253]{opacity:.5}.tbhwbxda>.empty[data-v-7cef8253]{opacity:.7;text-align:center}",""]),e.exports=a},34319:e=>{e.exports=function(e,t){var o=null;return function(){clearTimeout(o);var a=arguments,n=this;o=setTimeout((function(){e.apply(n,a)}),t)}}},45030:(e,t,o)=>{const a=o(34319);function n(e,t){t.value!==t.oldValue&&(e.oninput=n.debounce((function(t){e.dispatchEvent(function(e){if("function"==typeof Event)var t=new Event(e);else{(t=document.createEvent("Event")).initEvent(e,!0,!0)}return t}("change"))}),parseInt(t.value)||800))}n.debounce=a,e.exports=n},77121:(e,t,o)=>{"use strict";o.d(t,{Z:()=>m});var a=o(55393);const n=(0,a.withScopeId)("data-v-32b1e952");(0,a.pushScopeId)("data-v-32b1e952");const l={class:"icon",ref:"icon"},i={class:"input"},s={class:"label",ref:"labelEl"},d={class:"title",ref:"title"},r={key:0,class:"warning"},c={class:"prefix",ref:"prefixEl"},u={class:"suffix",ref:"suffixEl"},p={class:"desc _caption"};(0,a.popScopeId)();const b=n(((e,t,o,n,b,v)=>{const f=(0,a.resolveComponent)("Fa"),h=(0,a.resolveDirective)("debounce");return(0,a.openBlock)(),(0,a.createBlock)("div",{class:["juejbjww",{focused:e.focused,filled:e.filled,inline:e.inline,disabled:e.disabled}]},[(0,a.createVNode)("div",l,[(0,a.renderSlot)(e.$slots,"icon")],512),(0,a.createVNode)("div",i,[(0,a.createVNode)("span",s,[(0,a.renderSlot)(e.$slots,"default")],512),(0,a.createVNode)("span",d,[(0,a.renderSlot)(e.$slots,"title"),e.invalid?((0,a.openBlock)(),(0,a.createBlock)("span",r,[(0,a.createVNode)(f,{icon:e.faExclamationCircle},null,8,["icon"]),(0,a.createTextVNode)((0,a.toDisplayString)(e.$refs.input.validationMessage),1)])):(0,a.createCommentVNode)("",!0)],512),(0,a.createVNode)("div",c,[(0,a.renderSlot)(e.$slots,"prefix")],512),e.debounce?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("input",{key:0,ref:"inputEl",type:e.type,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v=t),disabled:e.disabled,required:e.required,readonly:e.readonly,placeholder:e.placeholder,pattern:e.pattern,autocomplete:e.autocomplete,spellcheck:e.spellcheck,step:e.step,onFocus:t[2]||(t[2]=t=>e.focused=!0),onBlur:t[3]||(t[3]=t=>e.focused=!1),onKeydown:t[4]||(t[4]=t=>e.onKeydown(t)),onInput:t[5]||(t[5]=(...t)=>e.onInput&&e.onInput(...t)),list:e.id},null,40,["type","disabled","required","readonly","placeholder","pattern","autocomplete","spellcheck","step","list"])),[[h,500],[a.vModelDynamic,e.v,void 0,{lazy:!0}]]):(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)("input",{key:1,ref:"inputEl",type:e.type,"onUpdate:modelValue":t[6]||(t[6]=t=>e.v=t),disabled:e.disabled,required:e.required,readonly:e.readonly,placeholder:e.placeholder,pattern:e.pattern,autocomplete:e.autocomplete,spellcheck:e.spellcheck,step:e.step,onFocus:t[7]||(t[7]=t=>e.focused=!0),onBlur:t[8]||(t[8]=t=>e.focused=!1),onKeydown:t[9]||(t[9]=t=>e.onKeydown(t)),onInput:t[10]||(t[10]=(...t)=>e.onInput&&e.onInput(...t)),list:e.id},null,40,["type","disabled","required","readonly","placeholder","pattern","autocomplete","spellcheck","step","list"])),[[a.vModelDynamic,e.v]]),e.datalist?((0,a.openBlock)(),(0,a.createBlock)("datalist",{key:2,id:e.id},[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(e.datalist,(e=>((0,a.openBlock)(),(0,a.createBlock)("option",{value:e},null,8,["value"])))),256))],8,["id"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("div",u,[(0,a.renderSlot)(e.$slots,"suffix")],512)]),e.save&&e.changed?((0,a.openBlock)(),(0,a.createBlock)("button",{key:0,class:"save _textButton",onClick:t[11]||(t[11]=()=>{e.changed=!1,e.save()})},(0,a.toDisplayString)(e.$ts.save),1)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("div",p,[(0,a.renderSlot)(e.$slots,"desc")])],2)}));var v=o(45030),f=o.n(v),h=o(51436);const w=(0,a.defineComponent)({directives:{debounce:f()},props:{value:{required:!1},type:{type:String,required:!1},required:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},pattern:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!1},autocomplete:{required:!1},spellcheck:{required:!1},step:{required:!1},debounce:{required:!1},datalist:{type:Array,required:!1},inline:{type:Boolean,required:!1,default:!1},save:{type:Function,required:!1}},emits:["change","keydown","enter"],setup(e,t){const{value:o,type:n,autofocus:l}=(0,a.toRefs)(e),i=(0,a.ref)(o.value),s=Math.random().toString(),d=(0,a.ref)(!1),r=(0,a.ref)(!1),c=(0,a.ref)(!1),u=(0,a.computed)((()=>""!==i.value&&null!=i.value)),p=(0,a.ref)(null),b=(0,a.ref)(null),v=(0,a.ref)(null),f=(0,a.ref)(null),w=()=>p.value.focus();return(0,a.watch)(o,(e=>{i.value=e})),(0,a.watch)(i,(e=>{"number"===(null==n?void 0:n.value)?t.emit("update:value",parseFloat(e)):t.emit("update:value",e),c.value=p.value.validity.badInput})),(0,a.onMounted)((()=>{(0,a.nextTick)((()=>{l.value&&w();const e=setInterval((()=>{b.value&&(f.value.style.left=b.value.offsetLeft+b.value.offsetWidth+"px",b.value.offsetWidth&&(p.value.style.paddingLeft=b.value.offsetWidth+"px")),v.value&&v.value.offsetWidth&&(p.value.style.paddingRight=v.value.offsetWidth+"px")}),100);(0,a.onUnmounted)((()=>{clearInterval(e)}))}))})),{id:s,v:i,focused:d,invalid:c,changed:r,filled:u,inputEl:p,prefixEl:b,suffixEl:v,labelEl:f,focus:w,onInput:e=>{r.value=!0,t.emit("change",e)},onKeydown:e=>{t.emit("keydown",e),"Enter"===e.code&&t.emit("enter")},faExclamationCircle:h.RLE}}});o(7803);w.render=b,w.__scopeId="data-v-32b1e952";const m=w},26786:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var a=o(55393);const n=(0,a.withScopeId)("data-v-4b49273d");(0,a.pushScopeId)("data-v-4b49273d");const l={class:"header"},i={class:"title"},s={key:0,class:"body"},d={class:"_section"},r={key:1,class:"body"};(0,a.popScopeId)();const c=n(((e,t,o,c,u,p)=>{const b=(0,a.resolveComponent)("Fa"),v=(0,a.resolveComponent)("MkModal");return(0,a.openBlock)(),(0,a.createBlock)(v,{ref:"modal",onClick:t[5]||(t[5]=t=>e.$emit("click")),onClosed:t[6]||(t[6]=t=>e.$emit("closed"))},{default:n((()=>[(0,a.createVNode)("div",{class:"ebkgoccj _popup _narrow_",onKeydown:t[4]||(t[4]=(...t)=>e.onKeydown&&e.onKeydown(...t)),style:{width:e.width+"px",height:e.height?e.height+"px":null}},[(0,a.createVNode)("div",l,[e.withOkButton?((0,a.openBlock)(),(0,a.createBlock)("button",{key:0,class:"_button",onClick:t[1]||(t[1]=t=>e.$emit("close"))},[(0,a.createVNode)(b,{icon:e.faTimes},null,8,["icon"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("span",i,[(0,a.renderSlot)(e.$slots,"header")]),e.withOkButton?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)("button",{key:1,class:"_button",onClick:t[2]||(t[2]=t=>e.$emit("close"))},[(0,a.createVNode)(b,{icon:e.faTimes},null,8,["icon"])])),e.withOkButton?((0,a.openBlock)(),(0,a.createBlock)("button",{key:2,class:"_button",onClick:t[3]||(t[3]=t=>e.$emit("ok")),disabled:e.okButtonDisabled},[(0,a.createVNode)(b,{icon:e.faCheck},null,8,["icon"])],8,["disabled"])):(0,a.createCommentVNode)("",!0)]),e.padding?((0,a.openBlock)(),(0,a.createBlock)("div",s,[(0,a.createVNode)("div",d,[(0,a.renderSlot)(e.$slots,"default")])])):((0,a.openBlock)(),(0,a.createBlock)("div",r,[(0,a.renderSlot)(e.$slots,"default")]))],36)])),_:3},512)}));var u=o(51436),p=o(89939);const b=(0,a.defineComponent)({components:{MkModal:p.Z},props:{withOkButton:{type:Boolean,required:!1,default:!1},okButtonDisabled:{type:Boolean,required:!1,default:!1},padding:{type:Boolean,required:!1,default:!1},width:{type:Number,required:!1,default:400},height:{type:Number,required:!1,default:null},canClose:{type:Boolean,required:!1,default:!0}},emits:["click","close","closed","ok"],data:()=>({faTimes:u.NBC,faCheck:u.LEp}),methods:{close(){this.$refs.modal.close()},onKeydown(e){27===e.which&&(e.preventDefault(),e.stopPropagation(),this.close())}}});o(70675);b.render=c,b.__scopeId="data-v-4b49273d";const v=b},42151:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>y});var a=o(55393);const n=(0,a.withScopeId)("data-v-7cef8253");(0,a.pushScopeId)("data-v-7cef8253");const l={class:"tbhwbxda _section"},i={class:"inputs"},s=(0,a.createTextVNode)("@"),d=(0,a.createTextVNode)("@"),r={key:0,class:"users"},c={class:"body"},u={key:1,class:"empty"},p={key:1,class:"tbhwbxda _section recent"},b={class:"users"},v={class:"body"};(0,a.popScopeId)();const f=n(((e,t,o,f,h,w)=>{const m=(0,a.resolveComponent)("MkInput"),k=(0,a.resolveComponent)("MkAvatar"),x=(0,a.resolveComponent)("MkUserName"),y=(0,a.resolveComponent)("MkAcct"),j=(0,a.resolveComponent)("XModalWindow");return(0,a.openBlock)(),(0,a.createBlock)(j,{ref:"dialog","with-ok-button":!0,"ok-button-disabled":null==e.selected,onClick:t[5]||(t[5]=t=>e.cancel()),onClose:t[6]||(t[6]=t=>e.cancel()),onOk:t[7]||(t[7]=t=>e.ok()),onClosed:t[8]||(t[8]=t=>e.$emit("closed"))},{header:n((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$ts.selectUser),1)])),default:n((()=>[(0,a.createVNode)("div",l,[(0,a.createVNode)("div",i,[(0,a.createVNode)(m,{value:e.username,"onUpdate:value":[t[1]||(t[1]=t=>e.username=t),e.search],class:"input",ref:"username"},{prefix:n((()=>[s])),default:n((()=>[(0,a.createVNode)("span",null,(0,a.toDisplayString)(e.$ts.username),1)])),_:1},8,["value","onUpdate:value"]),(0,a.createVNode)(m,{value:e.host,"onUpdate:value":[t[2]||(t[2]=t=>e.host=t),e.search],class:"input"},{prefix:n((()=>[d])),default:n((()=>[(0,a.createVNode)("span",null,(0,a.toDisplayString)(e.$ts.host),1)])),_:1},8,["value","onUpdate:value"])])]),""!=e.username||""!=e.host?((0,a.openBlock)(),(0,a.createBlock)("div",{key:0,class:["tbhwbxda _section result",{hit:e.users.length>0}]},[e.users.length>0?((0,a.openBlock)(),(0,a.createBlock)("div",r,[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(e.users,(o=>((0,a.openBlock)(),(0,a.createBlock)("div",{class:["user",{selected:e.selected&&e.selected.id===o.id}],key:o.id,onClick:t=>e.selected=o,onDblclick:t[3]||(t[3]=t=>e.ok())},[(0,a.createVNode)(k,{user:o,class:"avatar"},null,8,["user"]),(0,a.createVNode)("div",c,[(0,a.createVNode)(x,{user:o,class:"name"},null,8,["user"]),(0,a.createVNode)(y,{user:o,class:"acct"},null,8,["user"])])],42,["onClick"])))),128))])):((0,a.openBlock)(),(0,a.createBlock)("div",u,[(0,a.createVNode)("span",null,(0,a.toDisplayString)(e.$ts.noUsers),1)]))],2)):(0,a.createCommentVNode)("",!0),""==e.username&&""==e.host?((0,a.openBlock)(),(0,a.createBlock)("div",p,[(0,a.createVNode)("div",b,[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(e.recentUsers,(o=>((0,a.openBlock)(),(0,a.createBlock)("div",{class:["user",{selected:e.selected&&e.selected.id===o.id}],key:o.id,onClick:t=>e.selected=o,onDblclick:t[4]||(t[4]=t=>e.ok())},[(0,a.createVNode)(k,{user:o,class:"avatar"},null,8,["user"]),(0,a.createVNode)("div",v,[(0,a.createVNode)(x,{user:o,class:"name"},null,8,["user"]),(0,a.createVNode)(y,{user:o,class:"acct"},null,8,["user"])])],42,["onClick"])))),128))])])):(0,a.createCommentVNode)("",!0)])),_:1},8,["ok-button-disabled"])}));var h=o(51436),w=o(77121),m=o(26786),k=o(10192);const x=(0,a.defineComponent)({components:{MkInput:w.Z,XModalWindow:m.Z},props:{},emits:["ok","cancel","closed"],data:()=>({username:"",host:"",recentUsers:[],users:[],selected:null,faTimes:h.NBC,faCheck:h.LEp}),async mounted(){this.focus(),this.$nextTick((()=>{this.focus()})),this.recentUsers=await k.hi("users/show",{userIds:this.$store.state.recentlyUsedUsers})},methods:{search(){""!=this.username||""!=this.host?k.hi("users/search-by-username-and-host",{username:this.username,host:this.host,limit:10,detail:!1}).then((e=>{this.users=e})):this.users=[]},focus(){this.$refs.username.focus()},ok(){this.$emit("ok",this.selected),this.$refs.dialog.close();let e=this.$store.state.recentlyUsedUsers;e=e.filter((e=>e!==this.selected.id)),e.unshift(this.selected.id),this.$store.set("recentlyUsedUsers",e.splice(0,16))},cancel(){this.$emit("cancel"),this.$refs.dialog.close()}}});o(19169);x.render=f,x.__scopeId="data-v-7cef8253";const y=x},7803:(e,t,o)=>{var a=o(27582);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("1c67ebb2",a,!0,{})},70675:(e,t,o)=>{var a=o(84602);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("58d1b0c9",a,!0,{})},19169:(e,t,o)=>{var a=o(10357);"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,o(45346).Z)("30f734f3",a,!0,{})}}]);