(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[3401],{79960:(e,t,o)=>{var n=o(23645)((function(e){return e[1]}));n.push([e.id,".mfcuwfyp>.empty[data-v-6fde599d]{margin:0;padding:16px;text-align:center;color:var(--fg)}.mfcuwfyp>.placeholder[data-v-6fde599d]{padding:32px;opacity:.3}",""]),e.exports=n},8035:(e,t,o)=>{"use strict";o.d(t,{mv:()=>n});const n=["follow","mention","reply","renote","quote","reaction","pollVote","receiveFollowRequest","followRequestAccepted","groupInvited","app"]},17553:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var n=o(55393);const i=(0,n.withScopeId)("data-v-6fde599d");(0,n.pushScopeId)("data-v-6fde599d");const c={class:"mfcuwfyp _noGap_"},s={key:0,class:"empty"};(0,n.popScopeId)();const a=i(((e,t,o,a,r,l)=>{const d=(0,n.resolveComponent)("XNote"),p=(0,n.resolveComponent)("XNotification"),f=(0,n.resolveComponent)("XList"),m=(0,n.resolveComponent)("MkLoading"),u=(0,n.resolveComponent)("MkError"),h=(0,n.resolveDirective)("appear");return(0,n.openBlock)(),(0,n.createBlock)("div",c,[(0,n.createVNode)(f,{class:"notifications",items:e.items},{default:i((({item:t})=>[["reply","quote","mention"].includes(t.type)?((0,n.openBlock)(),(0,n.createBlock)(d,{note:t.note,"onUpdate:note":o=>e.noteUpdated(t.note,o),key:t.id},null,8,["note","onUpdate:note"])):((0,n.openBlock)(),(0,n.createBlock)(p,{notification:t,"with-time":!0,full:!0,class:"_panel notification",key:t.id},null,8,["notification"]))])),_:1},8,["items"]),(0,n.withDirectives)((0,n.createVNode)("button",{class:"_buttonPrimary",onClick:t[1]||(t[1]=(...t)=>e.fetchMore&&e.fetchMore(...t)),disabled:e.moreFetching,style:{cursor:e.moreFetching?"wait":"pointer"}},[e.moreFetching?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.loadMore),1)],64)),e.moreFetching?((0,n.openBlock)(),(0,n.createBlock)(m,{key:1,inline:""})):(0,n.createCommentVNode)("",!0)],12,["disabled"]),[[h,e.$store.state.enableInfiniteScroll?e.fetchMore:null],[n.vShow,e.more]]),e.empty?((0,n.openBlock)(),(0,n.createBlock)("p",s,(0,n.toDisplayString)(e.$ts.noNotifications),1)):(0,n.createCommentVNode)("",!0),e.error?((0,n.openBlock)(),(0,n.createBlock)(u,{key:1,onRetry:t[2]||(t[2]=t=>e.init())})):(0,n.createCommentVNode)("",!0)])}));var r=o(90381),l=o(47577),d=o(8914),p=o(64099),f=o(8035),m=o(10192);const u=(0,n.defineComponent)({components:{XNotification:l.Z,XList:d.Z,XNote:p.Z},mixins:[(0,r.Z)({})],props:{includeTypes:{type:Array,required:!1,default:null}},data(){return{connection:null,pagination:{endpoint:"i/notifications",limit:10,params:()=>({includeTypes:this.allIncludeTypes||void 0})}}},computed:{allIncludeTypes(){var e;return null!==(e=this.includeTypes)&&void 0!==e?e:f.mv.filter((e=>!this.$i.mutingNotificationTypes.includes(e)))}},watch:{includeTypes:{handler(){this.reload()},deep:!0},"$i.mutingNotificationTypes":{handler(){null===this.includeTypes&&this.reload()},deep:!0}},mounted(){this.connection=m.Vw.useSharedConnection("main"),this.connection.on("notification",this.onNotification)},beforeUnmount(){this.connection.dispose()},methods:{onNotification(e){const t=!this.allIncludeTypes.includes(e.type);(t||"visible"===document.visibilityState)&&m.Vw.send("readNotification",{id:e.id}),t||this.prepend(Object.assign(Object.assign({},e),{isRead:"visible"===document.visibilityState}))},noteUpdated(e,t){const o=this.items.findIndex((t=>t.note===e));this.items[o]=Object.assign(Object.assign({},this.items[o]),{note:t})}}});o(2797);u.render=a,u.__scopeId="data-v-6fde599d";const h=u},11228:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(55393);const i={class:"_section"};var c=o(51436),s=o(13885),a=o(17553);const r=(0,n.defineComponent)({components:{XNotifications:a.Z},data(){return{INFO:{title:this.$ts.notifications,icon:c.qmU}}},methods:{before(){s.Z.start()},after(){s.Z.done()}}});r.render=function(e,t,o,c,s,a){const r=(0,n.resolveComponent)("XNotifications");return(0,n.openBlock)(),(0,n.createBlock)("div",null,[(0,n.createVNode)("div",i,[(0,n.createVNode)(r,{class:"_content",onBefore:e.before,onAfter:e.after,page:""},null,8,["onBefore","onAfter"])])])};const l=r},2797:(e,t,o)=>{var n=o(79960);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,o(45346).Z)("ccf24ffc",n,!0,{})}}]);