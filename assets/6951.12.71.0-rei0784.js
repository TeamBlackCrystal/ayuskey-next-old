(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[6951],{16951:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>b});var s=o(55393);const c=(0,s.withScopeId)("data-v-39cb3c6c");(0,s.pushScopeId)("data-v-39cb3c6c");const n={key:0},i={key:0,class:"waiting _section"},a={class:"_content"},l={key:1,class:"denied _section"},r={class:"_content"},d={key:2,class:"accepted _section"},k={class:"_content"},p={key:0},u={key:1},h={key:3,class:"_section"},m={key:0,class:"_title"},y={key:1,class:"_title"},B={class:"_content"},g={class:"_footer"},v={key:1,class:"signin"};(0,s.popScopeId)();const _=c(((e,t,o,_,$,N)=>{const V=(0,s.resolveComponent)("MkLoading"),S=(0,s.resolveComponent)("MkEllipsis"),C=(0,s.resolveComponent)("MkButton"),b=(0,s.resolveComponent)("MkSignin");return e.$i?((0,s.openBlock)(),(0,s.createBlock)("div",n,["waiting"==e.state?((0,s.openBlock)(),(0,s.createBlock)("div",i,[(0,s.createVNode)("div",a,[(0,s.createVNode)(V)])])):(0,s.createCommentVNode)("",!0),"denied"==e.state?((0,s.openBlock)(),(0,s.createBlock)("div",l,[(0,s.createVNode)("div",r,[(0,s.createVNode)("p",null,(0,s.toDisplayString)(e.$ts._auth.denied),1)])])):"accepted"==e.state?((0,s.openBlock)(),(0,s.createBlock)("div",d,[(0,s.createVNode)("div",k,[e.callback?((0,s.openBlock)(),(0,s.createBlock)("p",p,[(0,s.createTextVNode)((0,s.toDisplayString)(e.$ts._auth.callback),1),(0,s.createVNode)(S)])):((0,s.openBlock)(),(0,s.createBlock)("p",u,(0,s.toDisplayString)(e.$ts._auth.pleaseGoBack),1))])])):((0,s.openBlock)(),(0,s.createBlock)("div",h,[e.name?((0,s.openBlock)(),(0,s.createBlock)("div",m,(0,s.toDisplayString)(e.$t("_auth.shareAccess",{name:e.name})),1)):((0,s.openBlock)(),(0,s.createBlock)("div",y,(0,s.toDisplayString)(e.$ts._auth.shareAccessAsk),1)),(0,s.createVNode)("div",B,[(0,s.createVNode)("p",null,(0,s.toDisplayString)(e.$ts._auth.permissionAsk),1),(0,s.createVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.permission,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t},(0,s.toDisplayString)(e.$t("_permissions."+t)),1)))),128))])]),(0,s.createVNode)("div",g,[(0,s.createVNode)(C,{onClick:e.deny,inline:""},{default:c((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.$ts.cancel),1)])),_:1},8,["onClick"]),(0,s.createVNode)(C,{onClick:e.accept,inline:"",primary:""},{default:c((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.$ts.accept),1)])),_:1},8,["onClick"])])]))])):((0,s.openBlock)(),(0,s.createBlock)("div",v,[(0,s.createVNode)(b,{onLogin:e.onLogin},null,8,["onLogin"])]))}));var $=o(92254),N=o(42453),V=o(10192),S=o(37200);const C=(0,s.defineComponent)({components:{MkSignin:$.Z,MkButton:N.Z},data:()=>({state:null}),computed:{session(){return this.$route.params.session},callback(){return this.$route.query.callback},name(){return this.$route.query.name},icon(){return this.$route.query.icon},permission(){return this.$route.query.permission?this.$route.query.permission.split(","):[]}},methods:{async accept(){this.state="waiting",await V.hi("miauth/gen-token",{session:this.session,name:this.name,iconUrl:this.icon,permission:this.permission}),this.state="accepted",this.callback&&(location.href=`${this.callback}?session=${this.session}`)},deny(){this.state="denied"},onLogin(e){(0,S.x4)(e.i)}}});C.render=_,C.__scopeId="data-v-39cb3c6c";const b=C}}]);