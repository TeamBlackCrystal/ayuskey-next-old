(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[5747],{58745:(e,t,a)=>{var n=a(23645)((function(e){return e[1]}));n.push([e.id,".folder-toggle-enter-active[data-v-b1439222],.folder-toggle-leave-active[data-v-b1439222]{overflow-y:hidden;transition:opacity .5s,height .5s!important}.folder-toggle-enter-from[data-v-b1439222],.folder-toggle-leave-to[data-v-b1439222]{opacity:0}.ssazuxis[data-v-b1439222]{position:relative}.ssazuxis>header[data-v-b1439222]{display:flex;position:relative;z-index:2}.ssazuxis>header>.title[data-v-b1439222]{margin:0;padding:12px 16px 12px 0}.ssazuxis>header>.title>[data-icon][data-v-b1439222]{margin-right:6px}.ssazuxis>header>.title[data-v-b1439222]:empty{display:none}.ssazuxis>header>.divider[data-v-b1439222]{flex:1;margin:auto;height:1px;background:var(--divider)}.ssazuxis>header>button[data-v-b1439222]{padding:12px 0 12px 16px}.ssazuxis.max-width_500px>header>.title[data-v-b1439222]{padding:8px 10px 8px 0}",""]),e.exports=n},55794:(e,t,a)=>{var n=a(23645)((function(e){return e[1]}));n.push([e.id,".bgvwxkhb>h1[data-v-408cdeb9]{margin:0;padding:24px;text-align:center;font-size:1.5em;background:linear-gradient(0deg,#43c583,#438881);color:#fff}.bgvwxkhb>.play[data-v-408cdeb9]{text-align:center}.sazhgisb[data-v-408cdeb9]{text-align:center}.nfcacttm>.invitation[data-v-408cdeb9]{display:flex;box-sizing:border-box;width:100%;padding:16px;line-height:32px;text-align:left}.nfcacttm>.invitation>.avatar[data-v-408cdeb9]{width:32px;height:32px;margin-right:8px}.nfcacttm>.invitation>.name[data-v-408cdeb9]{margin-right:8px}.nfcacttm>.invitation>.username[data-v-408cdeb9]{margin-right:8px;opacity:.7}.nfcacttm>.invitation>.time[data-v-408cdeb9]{margin-left:auto;opacity:.7}.knextgwz[data-v-408cdeb9]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-gap:var(--margin)}.knextgwz>.game>.players[data-v-408cdeb9]{text-align:center;padding:16px;line-height:32px}.knextgwz>.game>.players>.avatar[data-v-408cdeb9]{width:32px;height:32px}.knextgwz>.game>.players>.avatar[data-v-408cdeb9]:first-child{margin-right:8px}.knextgwz>.game>.players>.avatar[data-v-408cdeb9]:last-child{margin-left:8px}.knextgwz>.game>footer[data-v-408cdeb9]{display:flex;align-items:baseline;border-top:1px solid var(--divider);padding:6px 8px;font-size:.9em}.knextgwz>.game>footer>.state.playing[data-v-408cdeb9]{color:var(--accent)}.knextgwz>.game>footer>.time[data-v-408cdeb9]{margin-left:auto;opacity:.7}",""]),e.exports=n},44219:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n=a(55393);const s=(0,n.withScopeId)("data-v-b1439222");(0,n.pushScopeId)("data-v-b1439222");const i={class:"ssazuxis"},o={class:"title"},r=(0,n.createVNode)("div",{class:"divider"},null,-1),l={class:"_button"};(0,n.popScopeId)();const c=s(((e,t,a,c,d,g)=>{const p=(0,n.resolveComponent)("Fa"),h=(0,n.resolveDirective)("size");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)("div",i,[(0,n.createVNode)("header",{onClick:t[1]||(t[1]=t=>e.showBody=!e.showBody),class:"_button"},[(0,n.createVNode)("div",o,[(0,n.renderSlot)(e.$slots,"header")]),r,(0,n.createVNode)("button",l,[e.showBody?((0,n.openBlock)(),(0,n.createBlock)(p,{key:0,icon:e.faAngleUp},null,8,["icon"])):((0,n.openBlock)(),(0,n.createBlock)(p,{key:1,icon:e.faAngleDown},null,8,["icon"]))])]),(0,n.createVNode)(n.Transition,{name:"folder-toggle",onEnter:e.enter,onAfterEnter:e.afterEnter,onLeave:e.leave,onAfterLeave:e.afterLeave},{default:s((()=>[(0,n.withDirectives)((0,n.createVNode)("div",null,[(0,n.renderSlot)(e.$slots,"default")],512),[[n.vShow,e.showBody]])])),_:3},8,["onEnter","onAfterEnter","onLeave","onAfterLeave"])],512)),[[h,{max:[500]}]])}));var d=a(51436);const g="ui:folder:",p=(0,n.defineComponent)({props:{expanded:{type:Boolean,required:!1,default:!0},persistKey:{type:String,required:!1,default:null}},data(){return{showBody:this.persistKey&&localStorage.getItem(g+this.persistKey)?"t"===localStorage.getItem(g+this.persistKey):this.expanded,faAngleUp:d.onQ,faAngleDown:d.gc2}},watch:{showBody(){this.persistKey&&localStorage.setItem(g+this.persistKey,this.showBody?"t":"f")}},methods:{toggleContent(e){this.showBody=e},enter(e){const t=e.getBoundingClientRect().height;e.style.height=0,e.offsetHeight,e.style.height=t+"px"},afterEnter(e){e.style.height=null},leave(e){const t=e.getBoundingClientRect().height;e.style.height=t+"px",e.offsetHeight,e.style.height=0},afterLeave(e){e.style.height=null}}});a(26802);p.render=c,p.__scopeId="data-v-b1439222";const h=p},5747:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var n=a(55393);const s=(0,n.withScopeId)("data-v-408cdeb9");(0,n.pushScopeId)("data-v-408cdeb9");const i={key:0,class:"bgvwxkhb"},o={class:"play"},r={class:"_section"},l={class:"nfcacttm"},c={class:"name"},d={class:"username"},g={class:"knextgwz"},p={class:"players"},h=(0,n.createTextVNode)(" vs "),v={class:"knextgwz"},u={class:"players"},m=(0,n.createTextVNode)(" vs "),x={key:1,class:"sazhgisb"},k={class:"cancel"};(0,n.popScopeId)();const y=s(((e,t,a,y,f,b)=>{const N=(0,n.resolveComponent)("MkButton"),V=(0,n.resolveComponent)("MkAvatar"),B=(0,n.resolveComponent)("MkUserName"),w=(0,n.resolveComponent)("MkTime"),C=(0,n.resolveComponent)("MkFolder"),_=(0,n.resolveComponent)("MkA"),z=(0,n.resolveComponent)("I18n"),S=(0,n.resolveComponent)("MkEllipsis");return e.matching?((0,n.openBlock)(),(0,n.createBlock)("div",x,[(0,n.createVNode)("h1",null,[(0,n.createVNode)(z,{src:e.$ts.waitingFor,tag:"span"},{x:s((()=>[(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:e.matching},null,8,["user"])])])),_:1},8,["src"]),(0,n.createVNode)(S)]),(0,n.createVNode)("div",k,[(0,n.createVNode)(N,{inline:"",round:"",onClick:e.cancel},{default:s((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.cancel),1)])),_:1},8,["onClick"])])])):((0,n.openBlock)(),(0,n.createBlock)("div",i,[(0,n.createVNode)("h1",null,"Misskey "+(0,n.toDisplayString)(e.$ts._reversi.reversi),1),(0,n.createVNode)("div",o,[(0,n.createVNode)(N,{primary:"",round:"",onClick:e.match,style:{margin:"var(--margin) auto 0 auto"}},{default:s((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.invite),1)])),_:1},8,["onClick"])]),(0,n.createVNode)("div",r,[e.invitations.length>0?((0,n.openBlock)(),(0,n.createBlock)(C,{key:0},{header:s((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts.invitations),1)])),default:s((()=>[(0,n.createVNode)("div",l,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(e.invitations,(t=>((0,n.openBlock)(),(0,n.createBlock)("button",{class:"invitation _panel _button",tabindex:"-1",onClick:a=>e.accept(t)},[(0,n.createVNode)(V,{class:"avatar",user:t.parent},null,8,["user"]),(0,n.createVNode)("span",c,[(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:t.parent},null,8,["user"])])]),(0,n.createVNode)("span",d,"@"+(0,n.toDisplayString)(t.parent.username),1),(0,n.createVNode)(w,{time:t.createdAt,class:"time"},null,8,["time"])],8,["onClick"])))),256))])])),_:1})):(0,n.createCommentVNode)("",!0),e.myGames.length>0?((0,n.openBlock)(),(0,n.createBlock)(C,{key:1},{header:s((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts._reversi.myGames),1)])),default:s((()=>[(0,n.createVNode)("div",g,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(e.myGames,(t=>((0,n.openBlock)(),(0,n.createBlock)(_,{class:"game _panel",tabindex:"-1",to:"/games/reversi/"+t.id,key:t.id},{default:s((()=>[(0,n.createVNode)("div",p,[(0,n.createVNode)(V,{class:"avatar",user:t.user1},null,8,["user"]),(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:t.user1},null,8,["user"])]),h,(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:t.user2},null,8,["user"])]),(0,n.createVNode)(V,{class:"avatar",user:t.user2},null,8,["user"])]),(0,n.createVNode)("footer",null,[(0,n.createVNode)("span",{class:["state",{playing:!t.isEnded}]},(0,n.toDisplayString)(t.isEnded?e.$ts._reversi.ended:e.$ts._reversi.playing),3),(0,n.createVNode)(w,{class:"time",time:t.createdAt},null,8,["time"])])])),_:2},1032,["to"])))),128))])])),_:1})):(0,n.createCommentVNode)("",!0),e.games.length>0?((0,n.openBlock)(),(0,n.createBlock)(C,{key:2},{header:s((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.$ts._reversi.allGames),1)])),default:s((()=>[(0,n.createVNode)("div",v,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(e.games,(t=>((0,n.openBlock)(),(0,n.createBlock)(_,{class:"game _panel",tabindex:"-1",to:"/games/reversi/"+t.id,key:t.id},{default:s((()=>[(0,n.createVNode)("div",u,[(0,n.createVNode)(V,{class:"avatar",user:t.user1},null,8,["user"]),(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:t.user1},null,8,["user"])]),m,(0,n.createVNode)("b",null,[(0,n.createVNode)(B,{user:t.user2},null,8,["user"])]),(0,n.createVNode)(V,{class:"avatar",user:t.user2},null,8,["user"])]),(0,n.createVNode)("footer",null,[(0,n.createVNode)("span",{class:["state",{playing:!t.isEnded}]},(0,n.toDisplayString)(t.isEnded?e.$ts._reversi.ended:e.$ts._reversi.playing),3),(0,n.createVNode)(w,{class:"time",time:t.createdAt},null,8,["time"])])])),_:2},1032,["to"])))),128))])])),_:1})):(0,n.createCommentVNode)("",!0)])]))}));var f=a(10192),b=a(42453),N=a(44219),V=a(51436);const B=(0,n.defineComponent)({components:{MkButton:b.Z,MkFolder:N.Z},inject:["navHook"],data(){return{INFO:{title:this.$ts._reversi.reversi,icon:V.l9D},games:[],gamesFetching:!0,gamesMoreFetching:!1,myGames:[],matching:null,invitations:[],connection:null,pingClock:null}},mounted(){this.$i&&(this.connection=f.Vw.useSharedConnection("gamesReversi"),this.connection.on("invited",this.onInvited),this.connection.on("matched",this.onMatched),this.pingClock=setInterval((()=>{this.matching&&this.connection.send("ping",{id:this.matching.id})}),3e3),f.hi("games/reversi/games",{my:!0}).then((e=>{this.myGames=e})),f.hi("games/reversi/invitations").then((e=>{this.invitations=this.invitations.concat(e)}))),f.hi("games/reversi/games").then((e=>{this.games=e,this.gamesFetching=!1}))},beforeUnmount(){this.connection&&(this.connection.dispose(),clearInterval(this.pingClock))},methods:{go(e){const t="/games/reversi/"+e.id;this.navHook?this.navHook(t):this.$router.push(t)},async match(){const e=await f.dy({local:!0});null!=e&&f.hi("games/reversi/match",{userId:e.id}).then((t=>{null==t?this.matching=e:this.go(t)}))},cancel(){this.matching=null,f.hi("games/reversi/match/cancel")},accept(e){f.hi("games/reversi/match",{userId:e.parent.id}).then((e=>{e&&this.go(e)}))},onMatched(e){this.go(e)},onInvited(e){this.invitations.unshift(e)}}});a(57400);B.render=y,B.__scopeId="data-v-408cdeb9";const w=B},26802:(e,t,a)=>{var n=a(58745);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("c323ceb2",n,!0,{})},57400:(e,t,a)=>{var n=a(55794);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,a(45346).Z)("755a9e65",n,!0,{})}}]);