(self.webpackChunkmisskey=self.webpackChunkmisskey||[]).push([[1098],{26368:(e,o,t)=>{var n=t(23645)((function(e){return e[1]}));n.push([e.id,'.kpoogebi[data-v-74d2d7c0]{position:relative;display:inline-block;font-weight:700;color:var(--accent);background:transparent;border:1px solid var(--accent);padding:0;height:31px;font-size:16px;border-radius:32px;background:#fff}.kpoogebi.full[data-v-74d2d7c0]{padding:0 8px 0 12px;font-size:14px}.kpoogebi.large[data-v-74d2d7c0]{font-size:16px;height:38px;padding:0 12px 0 16px}.kpoogebi[data-v-74d2d7c0]:not(.full){width:31px}.kpoogebi[data-v-74d2d7c0]:focus:after{content:"";pointer-events:none;position:absolute;top:-5px;right:-5px;bottom:-5px;left:-5px;border:2px solid var(--focus);border-radius:32px}.kpoogebi.active[data-v-74d2d7c0]{color:#fff;background:var(--accent)}.kpoogebi.active[data-v-74d2d7c0]:hover{background:var(--accentLighten);border-color:var(--accentLighten)}.kpoogebi.active[data-v-74d2d7c0]:active{background:var(--accentDarken);border-color:var(--accentDarken)}.kpoogebi.wait[data-v-74d2d7c0]{cursor:wait!important;opacity:.7}.kpoogebi>span[data-v-74d2d7c0]{margin-right:6px}',""]),e.exports=n},25434:(e,o,t)=>{var n=t(23645)((function(e){return e[1]}));n.push([e.id,".popup-enter-active[data-v-4607707e],.popup-leave-active[data-v-4607707e]{transition:opacity .3s,transform .3s!important}.popup-enter-from[data-v-4607707e],.popup-leave-to[data-v-4607707e]{opacity:0;transform:scale(.9)}.fxxzrfni[data-v-4607707e]{position:absolute;z-index:11000;width:300px;overflow:hidden;transform-origin:center top}.fxxzrfni>.info>.banner[data-v-4607707e]{height:84px;background-color:rgba(0,0,0,.1);background-size:cover;background-position:50%}.fxxzrfni>.info>.avatar[data-v-4607707e]{display:block;position:absolute;top:62px;left:13px;z-index:2;width:58px;height:58px;border:3px solid var(--face);border-radius:8px}.fxxzrfni>.info>.title[data-v-4607707e]{display:block;padding:8px 0 8px 82px}.fxxzrfni>.info>.title>.name[data-v-4607707e]{display:inline-block;margin:0;font-weight:700;line-height:16px;word-break:break-all}.fxxzrfni>.info>.title>.username[data-v-4607707e]{display:block;margin:0;line-height:16px;font-size:.8em;color:var(--fg);opacity:.7}.fxxzrfni>.info>.description[data-v-4607707e]{padding:0 16px;font-size:.8em;color:var(--fg)}.fxxzrfni>.info>.status[data-v-4607707e]{padding:8px 16px}.fxxzrfni>.info>.status>div[data-v-4607707e]{display:inline-block;width:33%}.fxxzrfni>.info>.status>div>p[data-v-4607707e]{margin:0;font-size:.7em;color:var(--fg)}.fxxzrfni>.info>.status>div>span[data-v-4607707e]{font-size:1em;color:var(--accent)}.fxxzrfni>.info>.koudoku-button[data-v-4607707e]{position:absolute;top:8px;right:8px}",""]),e.exports=n},49683:(e,o,t)=>{"use strict";t.d(o,{Z:()=>h});var n=t(55393);const i=(0,n.withScopeId)("data-v-74d2d7c0");(0,n.pushScopeId)("data-v-74d2d7c0");const a={key:0},s={key:0},r={key:0},l={key:0},c={key:0},d={key:0};(0,n.popScopeId)();const u=i(((e,o,t,i,u,p)=>{const f=(0,n.resolveComponent)("Fa");return(0,n.openBlock)(),(0,n.createBlock)("button",{class:["kpoogebi _button",{wait:e.wait,active:e.isFollowing||e.hasPendingFollowRequestFromYou,full:e.full,large:e.large}],onClick:o[1]||(o[1]=(...o)=>e.onClick&&e.onClick(...o)),disabled:e.wait},[e.wait?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:1},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",d,(0,n.toDisplayString)(e.$ts.processing),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faSpinner,pulse:"","fixed-width":""},null,8,["icon"])],64)):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[e.hasPendingFollowRequestFromYou&&e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:0},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",a,(0,n.toDisplayString)(e.$ts.followRequestPending),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faHourglassHalf},null,8,["icon"])],64)):e.hasPendingFollowRequestFromYou&&!e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:1},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",s,(0,n.toDisplayString)(e.$ts.processing),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faSpinner,pulse:""},null,8,["icon"])],64)):e.isFollowing?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:2},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",r,(0,n.toDisplayString)(e.$ts.unfollow),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faMinus},null,8,["icon"])],64)):!e.isFollowing&&e.user.isLocked?((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:3},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",l,(0,n.toDisplayString)(e.$ts.followRequest),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faPlus},null,8,["icon"])],64)):e.isFollowing||e.user.isLocked?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:4},[e.full?((0,n.openBlock)(),(0,n.createBlock)("span",c,(0,n.toDisplayString)(e.$ts.follow),1)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{icon:e.faPlus},null,8,["icon"])],64))],64))],10,["disabled"])}));var p=t(51436),f=t(10192);const g=(0,n.defineComponent)({props:{user:{type:Object,required:!0},full:{type:Boolean,required:!1,default:!1},large:{type:Boolean,required:!1,default:!1}},data(){return{isFollowing:this.user.isFollowing,hasPendingFollowRequestFromYou:this.user.hasPendingFollowRequestFromYou,wait:!1,connection:null,faSpinner:p.LM3,faPlus:p.r8p,faMinus:p.Kl4,faHourglassHalf:p.B2l}},created(){null==this.user.isFollowing&&f.hi("users/show",{userId:this.user.id}).then((e=>{this.isFollowing=e.isFollowing,this.hasPendingFollowRequestFromYou=e.hasPendingFollowRequestFromYou}))},mounted(){this.connection=f.Vw.useSharedConnection("main"),this.connection.on("follow",this.onFollowChange),this.connection.on("unfollow",this.onFollowChange)},beforeUnmount(){this.connection.dispose()},methods:{onFollowChange(e){e.id==this.user.id&&(this.isFollowing=e.isFollowing,this.hasPendingFollowRequestFromYou=e.hasPendingFollowRequestFromYou)},async onClick(){this.wait=!0;try{if(this.isFollowing){const{canceled:e}=await f.WZ({type:"warning",text:this.$t("unfollowConfirm",{name:this.user.name||this.user.username}),showCancelButton:!0});if(e)return;await f.hi("following/delete",{userId:this.user.id})}else this.hasPendingFollowRequestFromYou?await f.hi("following/requests/cancel",{userId:this.user.id}):(this.user.isLocked,await f.hi("following/create",{userId:this.user.id}),this.hasPendingFollowRequestFromYou=!0)}catch(e){console.error(e)}finally{this.wait=!1}}}});t(48623);g.render=u,g.__scopeId="data-v-74d2d7c0";const h=g},41098:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>v});var n=t(55393);const i=(0,n.withScopeId)("data-v-4607707e");(0,n.pushScopeId)("data-v-4607707e");const a={key:0,class:"info"},s={class:"title"},r={class:"username"},l={class:"description"},c={class:"status"},d={key:1};(0,n.popScopeId)();const u=i(((e,o,t,u,p,f)=>{const g=(0,n.resolveComponent)("MkAvatar"),h=(0,n.resolveComponent)("MkUserName"),k=(0,n.resolveComponent)("MkA"),v=(0,n.resolveComponent)("MkAcct"),m=(0,n.resolveComponent)("Mfm"),w=(0,n.resolveComponent)("MkFollowButton"),x=(0,n.resolveComponent)("MkLoading");return(0,n.openBlock)(),(0,n.createBlock)(n.Transition,{name:"popup",appear:"",onAfterLeave:o[3]||(o[3]=o=>e.$emit("closed"))},{default:i((()=>[e.showing?((0,n.openBlock)(),(0,n.createBlock)("div",{key:0,class:"fxxzrfni _popup _shadow",style:{top:e.top+"px",left:e.left+"px"},onMouseover:o[1]||(o[1]=()=>{e.$emit("mouseover")}),onMouseleave:o[2]||(o[2]=()=>{e.$emit("mouseleave")})},[e.fetched?((0,n.openBlock)(),(0,n.createBlock)("div",a,[(0,n.createVNode)("div",{class:"banner",style:e.user.bannerUrl?`background-image: url(${e.user.bannerUrl})`:""},null,4),(0,n.createVNode)(g,{class:"avatar",user:e.user,"disable-preview":!0},null,8,["user"]),(0,n.createVNode)("div",s,[(0,n.createVNode)(k,{class:"name",to:e.userPage(e.user)},{default:i((()=>[(0,n.createVNode)(h,{user:e.user,nowrap:!1},null,8,["user"])])),_:1},8,["to"]),(0,n.createVNode)("p",r,[(0,n.createVNode)(v,{user:e.user},null,8,["user"])])]),(0,n.createVNode)("div",l,[e.user.description?((0,n.openBlock)(),(0,n.createBlock)(m,{key:0,text:e.user.description,author:e.user,i:e.$i,"custom-emojis":e.user.emojis},null,8,["text","author","i","custom-emojis"])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)("div",c,[(0,n.createVNode)("div",null,[(0,n.createVNode)("p",null,(0,n.toDisplayString)(e.$ts.notes),1),(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.user.notesCount),1)]),(0,n.createVNode)("div",null,[(0,n.createVNode)("p",null,(0,n.toDisplayString)(e.$ts.following),1),(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.user.followingCount),1)]),(0,n.createVNode)("div",null,[(0,n.createVNode)("p",null,(0,n.toDisplayString)(e.$ts.followers),1),(0,n.createVNode)("span",null,(0,n.toDisplayString)(e.user.followersCount),1)])]),e.$i&&e.user.id!=e.$i.id?((0,n.openBlock)(),(0,n.createBlock)(w,{key:0,class:"koudoku-button",user:e.user,mini:""},null,8,["user"])):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createBlock)("div",d,[(0,n.createVNode)(x)]))],36)):(0,n.createCommentVNode)("",!0)])),_:1})}));var p=t(77127),f=t(49683),g=t(55006),h=t(10192);const k=(0,n.defineComponent)({components:{MkFollowButton:f.Z},props:{showing:{type:Boolean,required:!0},q:{type:String,required:!0},source:{required:!0}},emits:["closed","mouseover","mouseleave"],data:()=>({user:null,fetched:!1,top:0,left:0}),mounted(){if("object"==typeof this.q)this.user=this.q,this.fetched=!0;else{const e=this.q.startsWith("@")?(0,p.Z)(this.q.substr(1)):{userId:this.q};h.hi("users/show",e).then((e=>{this.showing&&(this.user=e,this.fetched=!0)}))}const e=this.source.getBoundingClientRect(),o=e.left+this.source.offsetWidth/2-150+window.pageXOffset,t=e.top+this.source.offsetHeight+window.pageYOffset;this.top=t,this.left=o},methods:{userPage:g.tL}});t(55235);k.render=u,k.__scopeId="data-v-4607707e";const v=k},48623:(e,o,t)=>{var n=t(26368);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,t(45346).Z)("cd997be6",n,!0,{})},55235:(e,o,t)=>{var n=t(25434);"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,t(45346).Z)("1ffa3086",n,!0,{})}}]);